/*! For license information please see main.eecf6beb.js.LICENSE.txt */
(()=>{"use strict";var e={579:(e,t,n)=>{e.exports=n(2799)},2799:(e,t)=>{var n=Symbol.for("react.transitional.element");function r(e,t,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),"key"in t)for(var s in r={},t)"key"!==s&&(r[s]=t[s]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:i,ref:void 0!==t?t:null,props:r}}Symbol.for("react.fragment"),t.jsx=r,t.jsxs=r},4391:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(7004)},5896:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],u=a+1,c=e[u];if(0>s(l,n))u<i&&0>s(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[a]=n,r=a);else{if(!(u<i&&0>s(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],c=[],d=1,h=null,f=3,p=!1,g=!1,m=!1,v=!1,y="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function S(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function E(e){if(m=!1,S(e),!g)if(null!==r(u))g=!0,_||(_=!0,k());else{var t=r(c);null!==t&&R(E,t.startTime-e)}}var k,_=!1,T=-1,C=5,I=-1;function x(){return!!v||!(t.unstable_now()-I<C)}function A(){if(v=!1,_){var e=t.unstable_now();I=e;var n=!0;try{e:{g=!1,m&&(m=!1,b(T),T=-1),p=!0;var s=f;try{t:{for(S(e),h=r(u);null!==h&&!(h.expirationTime>e&&x());){var o=h.callback;if("function"===typeof o){h.callback=null,f=h.priorityLevel;var a=o(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof a){h.callback=a,S(e),n=!0;break t}h===r(u)&&i(u),S(e)}else i(u);h=r(u)}if(null!==h)n=!0;else{var l=r(c);null!==l&&R(E,l.startTime-e),n=!1}}break e}finally{h=null,f=s,p=!1}n=void 0}}finally{n?k():_=!1}}}if("function"===typeof w)k=function(){w(A)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,D=N.port2;N.port1.onmessage=A,k=function(){D.postMessage(null)}}else k=function(){y(A,0)};function R(e,n){T=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(c,e),null===r(u)&&e===r(c)&&(m?(b(T),T=-1):m=!0,R(E,s-o))):(e.sortIndex=a,n(u,e),g||p||(g=!0,_||(_=!0,k()))),e},t.unstable_shouldYield=x,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},7004:(e,t,n)=>{var r=n(8853),i=n(8613),s=n(5055);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function u(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function c(e){if(l(e)!==e)throw Error(o(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var h=Object.assign,f=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),S=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),C=Symbol.for("react.lazy");Symbol.for("react.scope");var I=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var x=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var A=Symbol.iterator;function N(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=A&&e[A]||e["@@iterator"])?e:null}var D=Symbol.for("react.client.reference");function R(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===D?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case m:return"Fragment";case y:return"Profiler";case v:return"StrictMode";case k:return"Suspense";case _:return"SuspenseList";case I:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case g:return"Portal";case S:return(e.displayName||"Context")+".Provider";case w:return(e._context.displayName||"Context")+".Consumer";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case T:return null!==(t=e.displayName||null)?t:R(e.type)||"Memo";case C:t=e._payload,e=e._init;try{return R(e(t))}catch(n){}}return null}var P=Array.isArray,O=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M={pending:!1,data:null,method:null,action:null},F=[],j=-1;function U(e){return{current:e}}function V(e){0>j||(e.current=F[j],F[j]=null,j--)}function z(e,t){j++,F[j]=e.current,e.current=t}var B=U(null),$=U(null),q=U(null),H=U(null);function W(e,t){switch(z(q,t),z($,e),z(B,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?id(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=sd(t=id(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}V(B),z(B,e)}function K(){V(B),V($),V(q)}function G(e){null!==e.memoizedState&&z(H,e);var t=B.current,n=sd(t,e.type);t!==n&&(z($,e),z(B,n))}function Q(e){$.current===e&&(V(B),V($)),H.current===e&&(V(H),Gd._currentValue=M)}var Y=Object.prototype.hasOwnProperty,X=r.unstable_scheduleCallback,J=r.unstable_cancelCallback,Z=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,ie=r.unstable_UserBlockingPriority,se=r.unstable_NormalPriority,oe=r.unstable_LowPriority,ae=r.unstable_IdlePriority,le=r.log,ue=r.unstable_setDisableYieldValue,ce=null,de=null;function he(e){if("function"===typeof le&&ue(e),de&&"function"===typeof de.setStrictMode)try{de.setStrictMode(ce,e)}catch(t){}}var fe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(pe(e)/ge|0)|0},pe=Math.log,ge=Math.LN2;var me=256,ve=4194304;function ye(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function be(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var i=0,s=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var a=134217727&r;return 0!==a?0!==(r=a&~s)?i=ye(r):0!==(o&=a)?i=ye(o):n||0!==(n=a&~e)&&(i=ye(n)):0!==(a=r&~s)?i=ye(a):0!==o?i=ye(o):n||0!==(n=r&~e)&&(i=ye(n)),0===i?0:0!==t&&t!==i&&0===(t&s)&&((s=i&-i)>=(n=t&-t)||32===s&&0!==(4194048&n))?t:i}function we(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Se(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Ee(){var e=me;return 0===(4194048&(me<<=1))&&(me=256),e}function ke(){var e=ve;return 0===(62914560&(ve<<=1))&&(ve=4194304),e}function _e(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Te(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ce(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-fe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function Ie(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-fe(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function xe(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ae(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Ne(){var e=L.p;return 0!==e?e:void 0===(e=window.event)?32:uh(e.type)}var De=Math.random().toString(36).slice(2),Re="__reactFiber$"+De,Pe="__reactProps$"+De,Oe="__reactContainer$"+De,Le="__reactEvents$"+De,Me="__reactListeners$"+De,Fe="__reactHandles$"+De,je="__reactResources$"+De,Ue="__reactMarker$"+De;function Ve(e){delete e[Re],delete e[Pe],delete e[Le],delete e[Me],delete e[Fe]}function ze(e){var t=e[Re];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Oe]||n[Re]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=bd(e);null!==e;){if(n=e[Re])return n;e=bd(e)}return t}n=(e=n).parentNode}return null}function Be(e){if(e=e[Re]||e[Oe]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function $e(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(o(33))}function qe(e){var t=e[je];return t||(t=e[je]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function He(e){e[Ue]=!0}var We=new Set,Ke={};function Ge(e,t){Qe(e,t),Qe(e+"Capture",t)}function Qe(e,t){for(Ke[e]=t,e=0;e<t.length;e++)We.add(t[e])}var Ye,Xe,Je=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ze={},et={};function tt(e,t,n){if(i=t,Y.call(et,i)||!Y.call(Ze,i)&&(Je.test(i)?et[i]=!0:(Ze[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function rt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function it(e){if(void 0===Ye)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ye=t&&t[1]||"",Xe=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Ye+e+Xe}var st=!1;function ot(e,t){if(!e||st)return"";st=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(i){var r=i}Reflect.construct(e,[],n)}else{try{n.call()}catch(s){r=s}e.call(n.prototype)}}else{try{throw Error()}catch(o){r=o}(n=e())&&"function"===typeof n.catch&&n.catch((function(){}))}}catch(a){if(a&&r&&"string"===typeof a.stack)return[a.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=r.DetermineComponentFrameRoot(),o=s[0],a=s[1];if(o&&a){var l=o.split("\n"),u=a.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===u.length)for(r=l.length-1,i=u.length-1;1<=r&&0<=i&&l[r]!==u[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==u[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==u[i]){var c="\n"+l[r].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=r&&0<=i);break}}}finally{st=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?it(n):""}function at(e){switch(e.tag){case 26:case 27:case 5:return it(e.type);case 16:return it("Lazy");case 13:return it("Suspense");case 19:return it("SuspenseList");case 0:case 15:return ot(e.type,!1);case 11:return ot(e.type.render,!1);case 1:return ot(e.type,!0);case 31:return it("Activity");default:return""}}function lt(e){try{var t="";do{t+=at(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function ut(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ct(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ct(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ct(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ft(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var pt=/[\n"\\]/g;function gt(e){return e.replace(pt,(function(e){return"\\"+e.charCodeAt(0).toString(16)+" "}))}function mt(e,t,n,r,i,s,o,a){e.name="",null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.type=o:e.removeAttribute("type"),null!=t?"number"===o?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ut(t)):e.value!==""+ut(t)&&(e.value=""+ut(t)):"submit"!==o&&"reset"!==o||e.removeAttribute("value"),null!=t?yt(e,o,ut(t)):null!=n?yt(e,o,ut(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=s&&(e.defaultChecked=!!s),null!=i&&(e.checked=i&&"function"!==typeof i&&"symbol"!==typeof i),null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.name=""+ut(a):e.removeAttribute("name")}function vt(e,t,n,r,i,s,o,a){if(null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.type=s),null!=t||null!=n){if(!("submit"!==s&&"reset"!==s||void 0!==t&&null!==t))return;n=null!=n?""+ut(n):"",t=null!=t?""+ut(t):n,a||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:i)&&"symbol"!==typeof r&&!!r,e.checked=a?e.checked:!!r,e.defaultChecked=!!r,null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.name=o)}function yt(e,t,n){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function bt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ut(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function wt(e,t,n){null==t||((t=""+ut(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ut(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function St(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(o(92));if(P(r)){if(1<r.length)throw Error(o(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ut(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function Et(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var kt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _t(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||kt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Tt(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(o(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&_t(e,i,r)}else for(var s in t)t.hasOwnProperty(s)&&_t(e,s,t[s])}function Ct(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var It=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function At(e){return xt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Nt=null;function Dt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Rt=null,Pt=null;function Ot(e){var t=Be(e);if(t&&(e=t.stateNode)){var n=e[Pe]||null;e:switch(e=t.stateNode,t.type){case"input":if(mt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+gt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[Pe]||null;if(!i)throw Error(o(90));mt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ht(r)}break e;case"textarea":wt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&bt(e,!!n.multiple,t,!1)}}}var Lt=!1;function Mt(e,t,n){if(Lt)return e(t,n);Lt=!0;try{return e(t)}finally{if(Lt=!1,(null!==Rt||null!==Pt)&&(zu(),Rt&&(t=Rt,e=Pt,Pt=Rt=null,Ot(t),e)))for(t=0;t<e.length;t++)Ot(e[t])}}function Ft(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Pe]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var jt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Ut=!1;if(jt)try{var Vt={};Object.defineProperty(Vt,"passive",{get:function(){Ut=!0}}),window.addEventListener("test",Vt,Vt),window.removeEventListener("test",Vt,Vt)}catch(Ph){Ut=!1}var zt=null,Bt=null,$t=null;function qt(){if($t)return $t;var e,t,n=Bt,r=n.length,i="value"in zt?zt.value:zt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function Ht(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Wt(){return!0}function Kt(){return!1}function Gt(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Wt:Kt,this.isPropagationStopped=Kt,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Wt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Wt)},persist:function(){},isPersistent:Wt}),t}var Qt,Yt,Xt,Jt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zt=Gt(Jt),en=h({},Jt,{view:0,detail:0}),tn=Gt(en),nn=h({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xt&&(Xt&&"mousemove"===e.type?(Qt=e.screenX-Xt.screenX,Yt=e.screenY-Xt.screenY):Yt=Qt=0,Xt=e),Qt)},movementY:function(e){return"movementY"in e?e.movementY:Yt}}),rn=Gt(nn),sn=Gt(h({},nn,{dataTransfer:0})),on=Gt(h({},en,{relatedTarget:0})),an=Gt(h({},Jt,{animationName:0,elapsedTime:0,pseudoElement:0})),ln=Gt(h({},Jt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),un=Gt(h({},Jt,{data:0})),cn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=hn[e])&&!!t[e]}function pn(){return fn}var gn=Gt(h({},en,{key:function(e){if(e.key){var t=cn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Ht(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?dn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pn,charCode:function(e){return"keypress"===e.type?Ht(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Ht(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),mn=Gt(h({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),vn=Gt(h({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pn})),yn=Gt(h({},Jt,{propertyName:0,elapsedTime:0,pseudoElement:0})),bn=Gt(h({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),wn=Gt(h({},Jt,{newState:0,oldState:0})),Sn=[9,13,27,32],En=jt&&"CompositionEvent"in window,kn=null;jt&&"documentMode"in document&&(kn=document.documentMode);var _n=jt&&"TextEvent"in window&&!kn,Tn=jt&&(!En||kn&&8<kn&&11>=kn),Cn=String.fromCharCode(32),In=!1;function xn(e,t){switch(e){case"keyup":return-1!==Sn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function An(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Nn=!1;var Dn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Dn[e.type]:"textarea"===t}function Pn(e,t,n,r){Rt?Pt?Pt.push(r):Pt=[r]:Rt=r,0<(t=qc(t,"onChange")).length&&(n=new Zt("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var On=null,Ln=null;function Mn(e){Mc(e,0)}function Fn(e){if(ht($e(e)))return e}function jn(e,t){if("change"===e)return t}var Un=!1;if(jt){var Vn;if(jt){var zn="oninput"in document;if(!zn){var Bn=document.createElement("div");Bn.setAttribute("oninput","return;"),zn="function"===typeof Bn.oninput}Vn=zn}else Vn=!1;Un=Vn&&(!document.documentMode||9<document.documentMode)}function $n(){On&&(On.detachEvent("onpropertychange",qn),Ln=On=null)}function qn(e){if("value"===e.propertyName&&Fn(Ln)){var t=[];Pn(t,Ln,e,Dt(e)),Mt(Mn,t)}}function Hn(e,t,n){"focusin"===e?($n(),Ln=n,(On=t).attachEvent("onpropertychange",qn)):"focusout"===e&&$n()}function Wn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Fn(Ln)}function Kn(e,t){if("click"===e)return Fn(t)}function Gn(e,t){if("input"===e||"change"===e)return Fn(t)}var Qn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Yn(e,t){if(Qn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Y.call(t,i)||!Qn(e[i],t[i]))return!1}return!0}function Xn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jn(e,t){var n,r=Xn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Xn(r)}}function Zn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Zn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function er(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=ft((e=t.contentWindow).document)}return t}function tr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nr=jt&&"documentMode"in document&&11>=document.documentMode,rr=null,ir=null,sr=null,or=!1;function ar(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;or||null==rr||rr!==ft(r)||("selectionStart"in(r=rr)&&tr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},sr&&Yn(sr,r)||(sr=r,0<(r=qc(ir,"onSelect")).length&&(t=new Zt("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function lr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ur={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},cr={},dr={};function hr(e){if(cr[e])return cr[e];if(!ur[e])return e;var t,n=ur[e];for(t in n)if(n.hasOwnProperty(t)&&t in dr)return cr[e]=n[t];return e}jt&&(dr=document.createElement("div").style,"AnimationEvent"in window||(delete ur.animationend.animation,delete ur.animationiteration.animation,delete ur.animationstart.animation),"TransitionEvent"in window||delete ur.transitionend.transition);var fr=hr("animationend"),pr=hr("animationiteration"),gr=hr("animationstart"),mr=hr("transitionrun"),vr=hr("transitionstart"),yr=hr("transitioncancel"),br=hr("transitionend"),wr=new Map,Sr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Er(e,t){wr.set(e,t),Ge(t,[e])}Sr.push("scrollEnd");var kr=new WeakMap;function _r(e,t){if("object"===typeof e&&null!==e){var n=kr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},kr.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var Tr=[],Cr=0,Ir=0;function xr(){for(var e=Cr,t=Ir=Cr=0;t<e;){var n=Tr[t];Tr[t++]=null;var r=Tr[t];Tr[t++]=null;var i=Tr[t];Tr[t++]=null;var s=Tr[t];if(Tr[t++]=null,null!==r&&null!==i){var o=r.pending;null===o?i.next=i:(i.next=o.next,o.next=i),r.pending=i}0!==s&&Rr(n,i,s)}}function Ar(e,t,n,r){Tr[Cr++]=e,Tr[Cr++]=t,Tr[Cr++]=n,Tr[Cr++]=r,Ir|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Nr(e,t,n,r){return Ar(e,t,n,r),Pr(e)}function Dr(e,t){return Ar(e,null,null,t),Pr(e)}function Rr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,s=e.return;null!==s;)s.childLanes|=n,null!==(r=s.alternate)&&(r.childLanes|=n),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(i=!0)),e=s,s=s.return;return 3===e.tag?(s=e.stateNode,i&&null!==t&&(i=31-fe(n),null===(r=(e=s.hiddenUpdates)[i])?e[i]=[t]:r.push(t),t.lane=536870912|n),s):null}function Pr(e){if(50<Ru)throw Ru=0,Pu=null,Error(o(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Or={};function Lr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mr(e,t,n,r){return new Lr(e,t,n,r)}function Fr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function jr(e,t){var n=e.alternate;return null===n?((n=Mr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Ur(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Vr(e,t,n,r,i,s){var a=0;if(r=e,"function"===typeof e)Fr(e)&&(a=1);else if("string"===typeof e)a=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,B.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case I:return(e=Mr(31,n,t,i)).elementType=I,e.lanes=s,e;case m:return zr(n.children,i,s,t);case v:a=8,i|=24;break;case y:return(e=Mr(12,n,t,2|i)).elementType=y,e.lanes=s,e;case k:return(e=Mr(13,n,t,i)).elementType=k,e.lanes=s,e;case _:return(e=Mr(19,n,t,i)).elementType=_,e.lanes=s,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case b:case S:a=10;break e;case w:a=9;break e;case E:a=11;break e;case T:a=14;break e;case C:a=16,r=null;break e}a=29,n=Error(o(130,null===e?"null":typeof e,"")),r=null}return(t=Mr(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function zr(e,t,n,r){return(e=Mr(7,e,r,t)).lanes=n,e}function Br(e,t,n){return(e=Mr(6,e,null,t)).lanes=n,e}function $r(e,t,n){return(t=Mr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var qr=[],Hr=0,Wr=null,Kr=0,Gr=[],Qr=0,Yr=null,Xr=1,Jr="";function Zr(e,t){qr[Hr++]=Kr,qr[Hr++]=Wr,Wr=e,Kr=t}function ei(e,t,n){Gr[Qr++]=Xr,Gr[Qr++]=Jr,Gr[Qr++]=Yr,Yr=e;var r=Xr;e=Jr;var i=32-fe(r)-1;r&=~(1<<i),n+=1;var s=32-fe(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xr=1<<32-fe(t)+i|n<<i|r,Jr=s+e}else Xr=1<<s|n<<i|r,Jr=e}function ti(e){null!==e.return&&(Zr(e,1),ei(e,1,0))}function ni(e){for(;e===Wr;)Wr=qr[--Hr],qr[Hr]=null,Kr=qr[--Hr],qr[Hr]=null;for(;e===Yr;)Yr=Gr[--Qr],Gr[Qr]=null,Jr=Gr[--Qr],Gr[Qr]=null,Xr=Gr[--Qr],Gr[Qr]=null}var ri=null,ii=null,si=!1,oi=null,ai=!1,li=Error(o(519));function ui(e){throw gi(_r(Error(o(418,"")),e)),li}function ci(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Re]=e,t[Pe]=r,n){case"dialog":Fc("cancel",t),Fc("close",t);break;case"iframe":case"object":case"embed":Fc("load",t);break;case"video":case"audio":for(n=0;n<Oc.length;n++)Fc(Oc[n],t);break;case"source":Fc("error",t);break;case"img":case"image":case"link":Fc("error",t),Fc("load",t);break;case"details":Fc("toggle",t);break;case"input":Fc("invalid",t),vt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),dt(t);break;case"select":Fc("invalid",t);break;case"textarea":Fc("invalid",t),St(t,r.value,r.defaultValue,r.children),dt(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Yc(t.textContent,n)?(null!=r.popover&&(Fc("beforetoggle",t),Fc("toggle",t)),null!=r.onScroll&&Fc("scroll",t),null!=r.onScrollEnd&&Fc("scrollend",t),null!=r.onClick&&(t.onclick=Xc),t=!0):t=!1,t||ui(e)}function di(e){for(ri=e.return;ri;)switch(ri.tag){case 5:case 13:return void(ai=!1);case 27:case 3:return void(ai=!0);default:ri=ri.return}}function hi(e){if(e!==ri)return!1;if(!si)return di(e),si=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||od(e.type,e.memoizedProps)),t=!t),t&&ii&&ui(e),di(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){ii=vd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}ii=null}}else 27===n?(n=ii,fd(e.type)?(e=yd,yd=null,ii=e):ii=n):ii=ri?vd(e.stateNode.nextSibling):null;return!0}function fi(){ii=ri=null,si=!1}function pi(){var e=oi;return null!==e&&(null===bu?bu=e:bu.push.apply(bu,e),oi=null),e}function gi(e){null===oi?oi=[e]:oi.push(e)}var mi=U(null),vi=null,yi=null;function bi(e,t,n){z(mi,t._currentValue),t._currentValue=n}function wi(e){e._currentValue=mi.current,V(mi)}function Si(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ei(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var s=i.dependencies;if(null!==s){var a=i.child;s=s.firstContext;e:for(;null!==s;){var l=s;s=i;for(var u=0;u<t.length;u++)if(l.context===t[u]){s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Si(s.return,n,e),r||(a=null);break e}s=l.next}}else if(18===i.tag){if(null===(a=i.return))throw Error(o(341));a.lanes|=n,null!==(s=a.alternate)&&(s.lanes|=n),Si(a,n,e),a=null}else a=i.child;if(null!==a)a.return=i;else for(a=i;null!==a;){if(a===e){a=null;break}if(null!==(i=a.sibling)){i.return=a.return,a=i;break}a=a.return}i=a}}function ki(e,t,n,r){e=null;for(var i=t,s=!1;null!==i;){if(!s)if(0!==(524288&i.flags))s=!0;else if(0!==(262144&i.flags))break;if(10===i.tag){var a=i.alternate;if(null===a)throw Error(o(387));if(null!==(a=a.memoizedProps)){var l=i.type;Qn(i.pendingProps.value,a.value)||(null!==e?e.push(l):e=[l])}}else if(i===H.current){if(null===(a=i.alternate))throw Error(o(387));a.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(Gd):e=[Gd])}i=i.return}null!==e&&Ei(t,e,n,r),t.flags|=262144}function _i(e){for(e=e.firstContext;null!==e;){if(!Qn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ti(e){vi=e,yi=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ci(e){return xi(vi,e)}function Ii(e,t){return null===vi&&Ti(e),xi(e,t)}function xi(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===yi){if(null===e)throw Error(o(308));yi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else yi=yi.next=t;return n}var Ai="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach((function(e){return e()}))}},Ni=r.unstable_scheduleCallback,Di=r.unstable_NormalPriority,Ri={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pi(){return{controller:new Ai,data:new Map,refCount:0}}function Oi(e){e.refCount--,0===e.refCount&&Ni(Di,(function(){e.controller.abort()}))}var Li=null,Mi=0,Fi=0,ji=null;function Ui(){if(0===--Mi&&null!==Li){null!==ji&&(ji.status="fulfilled");var e=Li;Li=null,Fi=0,ji=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Vi=O.S;O.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Li){var n=Li=[];Mi=0,Fi=Ac(),ji={status:"pending",value:void 0,then:function(e){n.push(e)}}}Mi++,t.then(Ui,Ui)}(0,t),null!==Vi&&Vi(e,t)};var zi=U(null);function Bi(){var e=zi.current;return null!==e?e:ru.pooledCache}function $i(e,t){z(zi,null===t?zi.current:t.pool)}function qi(){var e=Bi();return null===e?null:{parent:Ri._currentValue,pool:e}}var Hi=Error(o(460)),Wi=Error(o(474)),Ki=Error(o(542)),Gi={then:function(){}};function Qi(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Yi(){}function Xi(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Yi,Yi),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw es(e=t.reason),e;default:if("string"===typeof t.status)t.then(Yi,Yi);else{if(null!==(e=ru)&&100<e.shellSuspendCounter)throw Error(o(482));(e=t).status="pending",e.then((function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}}),(function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}}))}switch(t.status){case"fulfilled":return t.value;case"rejected":throw es(e=t.reason),e}throw Ji=t,Hi}}var Ji=null;function Zi(){if(null===Ji)throw Error(o(459));var e=Ji;return Ji=null,e}function es(e){if(e===Hi||e===Ki)throw Error(o(483))}var ts=!1;function ns(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function is(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ss(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&nu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Pr(e),Rr(e,null,n),t}return Ar(e,r,t,n),Pr(e)}function os(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ie(e,n)}}function as(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var ls=!1;function us(){if(ls){if(null!==ji)throw ji}}function cs(e,t,n,r){ls=!1;var i=e.updateQueue;ts=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,u=l.next;l.next=null,null===o?s=u:o.next=u,o=l;var c=e.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===a?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(o=0,c=u=l=null,a=s;;){var f=-536870913&a.lane,p=f!==a.lane;if(p?(su&f)===f:(r&f)===f){0!==f&&f===Fi&&(ls=!0),null!==c&&(c=c.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var g=e,m=a;f=t;var v=n;switch(m.tag){case 1:if("function"===typeof(g=m.payload)){d=g.call(v,d,f);break e}d=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null===(f="function"===typeof(g=m.payload)?g.call(v,d,f):g)||void 0===f)break e;d=h({},d,f);break e;case 2:ts=!0}}null!==(f=a.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=i.callbacks)?i.callbacks=[f]:p.push(f))}else p={lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(u=c=p,l=d):c=c.next=p,o|=f;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(p=a).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}null===c&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null===s&&(i.shared.lanes=0),fu|=o,e.lanes=o,e.memoizedState=d}}function ds(e,t){if("function"!==typeof e)throw Error(o(191,e));e.call(t)}function hs(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)ds(n[e],t)}var fs=U(null),ps=U(0);function gs(e,t){z(ps,e=du),z(fs,t),du=e|t.baseLanes}function ms(){z(ps,du),z(fs,fs.current)}function vs(){du=ps.current,V(fs),V(ps)}var ys=0,bs=null,ws=null,Ss=null,Es=!1,ks=!1,_s=!1,Ts=0,Cs=0,Is=null,xs=0;function As(){throw Error(o(321))}function Ns(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Qn(e[n],t[n]))return!1;return!0}function Ds(e,t,n,r,i,s){return ys=s,bs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,O.H=null===e||null===e.memoizedState?Wo:Ko,_s=!1,s=n(r,i),_s=!1,ks&&(s=Ps(t,n,r,i)),Rs(e),s}function Rs(e){O.H=Ho;var t=null!==ws&&null!==ws.next;if(ys=0,Ss=ws=bs=null,Es=!1,Cs=0,Is=null,t)throw Error(o(300));null===e||Ia||null!==(e=e.dependencies)&&_i(e)&&(Ia=!0)}function Ps(e,t,n,r){bs=e;var i=0;do{if(ks&&(Is=null),Cs=0,ks=!1,25<=i)throw Error(o(301));if(i+=1,Ss=ws=null,null!=e.updateQueue){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}O.H=Go,s=t(n,r)}while(ks);return s}function Os(){var e=O.H,t=e.useState()[0];return t="function"===typeof t.then?Vs(t):t,e=e.useState()[0],(null!==ws?ws.memoizedState:null)!==e&&(bs.flags|=1024),t}function Ls(){var e=0!==Ts;return Ts=0,e}function Ms(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Fs(e){if(Es){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Es=!1}ys=0,Ss=ws=bs=null,ks=!1,Cs=Ts=0,Is=null}function js(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ss?bs.memoizedState=Ss=e:Ss=Ss.next=e,Ss}function Us(){if(null===ws){var e=bs.alternate;e=null!==e?e.memoizedState:null}else e=ws.next;var t=null===Ss?bs.memoizedState:Ss.next;if(null!==t)Ss=t,ws=e;else{if(null===e){if(null===bs.alternate)throw Error(o(467));throw Error(o(310))}e={memoizedState:(ws=e).memoizedState,baseState:ws.baseState,baseQueue:ws.baseQueue,queue:ws.queue,next:null},null===Ss?bs.memoizedState=Ss=e:Ss=Ss.next=e}return Ss}function Vs(e){var t=Cs;return Cs+=1,null===Is&&(Is=[]),e=Xi(Is,e,t),t=bs,null===(null===Ss?t.memoizedState:Ss.next)&&(t=t.alternate,O.H=null===t||null===t.memoizedState?Wo:Ko),e}function zs(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return Vs(e);if(e.$$typeof===S)return Ci(e)}throw Error(o(438,String(e)))}function Bs(e){var t=null,n=bs.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=bs.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map((function(e){return e.slice()})),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},bs.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=x;return t.index++,n}function $s(e,t){return"function"===typeof t?t(e):t}function qs(e){return Hs(Us(),ws,e)}function Hs(e,t,n){var r=e.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=n;var i=e.baseQueue,s=r.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}t.baseQueue=i=s,r.pending=null}if(s=e.baseState,null===i)e.memoizedState=s;else{var l=a=null,u=null,c=t=i.next,d=!1;do{var h=-536870913&c.lane;if(h!==c.lane?(su&h)===h:(ys&h)===h){var f=c.revertLane;if(0===f)null!==u&&(u=u.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),h===Fi&&(d=!0);else{if((ys&f)===f){c=c.next,f===Fi&&(d=!0);continue}h={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=h,a=s):u=u.next=h,bs.lanes|=f,fu|=f}h=c.action,_s&&n(s,h),s=c.hasEagerState?c.eagerState:n(s,h)}else f={lane:h,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=f,a=s):u=u.next=f,bs.lanes|=h,fu|=h;c=c.next}while(null!==c&&c!==t);if(null===u?a=s:u.next=l,!Qn(s,e.memoizedState)&&(Ia=!0,d&&null!==(n=ji)))throw n;e.memoizedState=s,e.baseState=a,e.baseQueue=u,r.lastRenderedState=s}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Ws(e){var t=Us(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);Qn(s,t.memoizedState)||(Ia=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Ks(e,t,n){var r=bs,i=Us(),s=si;if(s){if(void 0===n)throw Error(o(407));n=n()}else n=t();var a=!Qn((ws||i).memoizedState,n);if(a&&(i.memoizedState=n,Ia=!0),i=i.queue,vo(2048,8,Ys.bind(null,r,i,e),[e]),i.getSnapshot!==t||a||null!==Ss&&1&Ss.memoizedState.tag){if(r.flags|=2048,po(9,{destroy:void 0,resource:void 0},Qs.bind(null,r,i,n,t),null),null===ru)throw Error(o(349));s||0!==(124&ys)||Gs(r,t,n)}return n}function Gs(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=bs.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},bs.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Qs(e,t,n,r){t.value=n,t.getSnapshot=r,Xs(t)&&Js(e)}function Ys(e,t,n){return n((function(){Xs(t)&&Js(e)}))}function Xs(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Qn(e,n)}catch(r){return!0}}function Js(e){var t=Dr(e,2);null!==t&&Mu(t,e,2)}function Zs(e){var t=js();if("function"===typeof e){var n=e;if(e=n(),_s){he(!0);try{n()}finally{he(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$s,lastRenderedState:e},t}function eo(e,t,n,r){return e.baseState=n,Hs(e,ws,"function"===typeof r?r:$s)}function to(e,t,n,r,i){if(Bo(e))throw Error(o(485));if(null!==(e=t.action)){var s={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){s.listeners.push(e)}};null!==O.T?n(!0):s.isTransition=!1,r(s),null===(n=t.pending)?(s.next=t.pending=s,no(t,s)):(s.next=n.next,t.pending=n.next=s)}}function no(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var s=O.T,o={};O.T=o;try{var a=n(i,r),l=O.S;null!==l&&l(o,a),ro(e,t,a)}catch(u){so(e,t,u)}finally{O.T=s}}else try{ro(e,t,s=n(i,r))}catch(c){so(e,t,c)}}function ro(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then((function(n){io(e,t,n)}),(function(n){return so(e,t,n)})):io(e,t,n)}function io(e,t,n){t.status="fulfilled",t.value=n,oo(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,no(e,n)))}function so(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,oo(t),t=t.next}while(t!==r)}e.action=null}function oo(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ao(e,t){return t}function lo(e,t){if(si){var n=ru.formState;if(null!==n){e:{var r=bs;if(si){if(ii){t:{for(var i=ii,s=ai;8!==i.nodeType;){if(!s){i=null;break t}if(null===(i=vd(i.nextSibling))){i=null;break t}}i="F!"===(s=i.data)||"F"===s?i:null}if(i){ii=vd(i.nextSibling),r="F!"===i.data;break e}}ui(r)}r=!1}r&&(t=n[0])}}return(n=js()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ao,lastRenderedState:t},n.queue=r,n=Uo.bind(null,bs,r),r.dispatch=n,r=Zs(!1),s=zo.bind(null,bs,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=js()).queue=i,n=to.bind(null,bs,i,s,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function uo(e){return co(Us(),ws,e)}function co(e,t,n){if(t=Hs(e,t,ao)[0],e=qs($s)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=Vs(t)}catch(o){if(o===Hi)throw Ki;throw o}else r=t;var i=(t=Us()).queue,s=i.dispatch;return n!==t.memoizedState&&(bs.flags|=2048,po(9,{destroy:void 0,resource:void 0},ho.bind(null,i,n),null)),[r,s,e]}function ho(e,t){e.action=t}function fo(e){var t=Us(),n=ws;if(null!==n)return co(t,n,e);Us(),t=t.memoizedState;var r=(n=Us()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function po(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=bs.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},bs.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function go(){return Us().memoizedState}function mo(e,t,n,r){var i=js();r=void 0===r?null:r,bs.flags|=e,i.memoizedState=po(1|t,{destroy:void 0,resource:void 0},n,r)}function vo(e,t,n,r){var i=Us();r=void 0===r?null:r;var s=i.memoizedState.inst;null!==ws&&null!==r&&Ns(r,ws.memoizedState.deps)?i.memoizedState=po(t,s,n,r):(bs.flags|=e,i.memoizedState=po(1|t,s,n,r))}function yo(e,t){mo(8390656,8,e,t)}function bo(e,t){vo(2048,8,e,t)}function wo(e,t){return vo(4,2,e,t)}function So(e,t){return vo(4,4,e,t)}function Eo(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function ko(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,vo(4,4,Eo.bind(null,t,e),n)}function _o(){}function To(e,t){var n=Us();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Ns(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Co(e,t){var n=Us();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Ns(t,r[1]))return r[0];if(r=e(),_s){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r}function Io(e,t,n){return void 0===n||0!==(1073741824&ys)?e.memoizedState=t:(e.memoizedState=n,e=Lu(),bs.lanes|=e,fu|=e,n)}function xo(e,t,n,r){return Qn(n,t)?n:null!==fs.current?(e=Io(e,n,r),Qn(e,t)||(Ia=!0),e):0===(42&ys)?(Ia=!0,e.memoizedState=n):(e=Lu(),bs.lanes|=e,fu|=e,t)}function Ao(e,t,n,r,i){var s=L.p;L.p=0!==s&&8>s?s:8;var o=O.T,a={};O.T=a,zo(e,!1,t,n);try{var l=i(),u=O.S;if(null!==u&&u(a,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)Vo(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then((function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)}),(function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)})),r}(l,r),Ou());else Vo(e,t,r,Ou())}catch(c){Vo(e,t,{then:function(){},status:"rejected",reason:c},Ou())}finally{L.p=s,O.T=o}}function No(){}function Do(e,t,n,r){if(5!==e.tag)throw Error(o(476));var i=Ro(e).queue;Ao(e,i,t,M,null===n?No:function(){return Po(e),n(r)})}function Ro(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:M,baseState:M,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$s,lastRenderedState:M},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$s,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Po(e){Vo(e,Ro(e).next.queue,{},Ou())}function Oo(){return Ci(Gd)}function Lo(){return Us().memoizedState}function Mo(){return Us().memoizedState}function Fo(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Ou(),r=ss(t,e=is(n),n);return null!==r&&(Mu(r,t,n),os(r,t,n)),t={cache:Pi()},void(e.payload=t)}t=t.return}}function jo(e,t,n){var r=Ou();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Bo(e)?$o(t,n):null!==(n=Nr(e,t,n,r))&&(Mu(n,e,r),qo(n,t,r))}function Uo(e,t,n){Vo(e,t,n,Ou())}function Vo(e,t,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Bo(e))$o(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Qn(a,o))return Ar(e,t,i,0),null===ru&&xr(),!1}catch(l){}if(null!==(n=Nr(e,t,i,r)))return Mu(n,e,r),qo(n,t,r),!0}return!1}function zo(e,t,n,r){if(r={lane:2,revertLane:Ac(),action:r,hasEagerState:!1,eagerState:null,next:null},Bo(e)){if(t)throw Error(o(479))}else null!==(t=Nr(e,n,r,2))&&Mu(t,e,2)}function Bo(e){var t=e.alternate;return e===bs||null!==t&&t===bs}function $o(e,t){ks=Es=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function qo(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ie(e,n)}}var Ho={readContext:Ci,use:zs,useCallback:As,useContext:As,useEffect:As,useImperativeHandle:As,useLayoutEffect:As,useInsertionEffect:As,useMemo:As,useReducer:As,useRef:As,useState:As,useDebugValue:As,useDeferredValue:As,useTransition:As,useSyncExternalStore:As,useId:As,useHostTransitionStatus:As,useFormState:As,useActionState:As,useOptimistic:As,useMemoCache:As,useCacheRefresh:As},Wo={readContext:Ci,use:zs,useCallback:function(e,t){return js().memoizedState=[e,void 0===t?null:t],e},useContext:Ci,useEffect:yo,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,mo(4194308,4,Eo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return mo(4194308,4,e,t)},useInsertionEffect:function(e,t){mo(4,2,e,t)},useMemo:function(e,t){var n=js();t=void 0===t?null:t;var r=e();if(_s){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=js();if(void 0!==n){var i=n(t);if(_s){he(!0);try{n(t)}finally{he(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=jo.bind(null,bs,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},js().memoizedState=e},useState:function(e){var t=(e=Zs(e)).queue,n=Uo.bind(null,bs,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:_o,useDeferredValue:function(e,t){return Io(js(),e,t)},useTransition:function(){var e=Zs(!1);return e=Ao.bind(null,bs,e.queue,!0,!1),js().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=bs,i=js();if(si){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===ru)throw Error(o(349));0!==(124&su)||Gs(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,yo(Ys.bind(null,r,s,e),[e]),r.flags|=2048,po(9,{destroy:void 0,resource:void 0},Qs.bind(null,r,s,n,t),null),n},useId:function(){var e=js(),t=ru.identifierPrefix;if(si){var n=Jr;t="\xab"+t+"R"+(n=(Xr&~(1<<32-fe(Xr)-1)).toString(32)+n),0<(n=Ts++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=xs++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Oo,useFormState:lo,useActionState:lo,useOptimistic:function(e){var t=js();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=zo.bind(null,bs,!0,n),n.dispatch=t,[e,t]},useMemoCache:Bs,useCacheRefresh:function(){return js().memoizedState=Fo.bind(null,bs)}},Ko={readContext:Ci,use:zs,useCallback:To,useContext:Ci,useEffect:bo,useImperativeHandle:ko,useInsertionEffect:wo,useLayoutEffect:So,useMemo:Co,useReducer:qs,useRef:go,useState:function(){return qs($s)},useDebugValue:_o,useDeferredValue:function(e,t){return xo(Us(),ws.memoizedState,e,t)},useTransition:function(){var e=qs($s)[0],t=Us().memoizedState;return["boolean"===typeof e?e:Vs(e),t]},useSyncExternalStore:Ks,useId:Lo,useHostTransitionStatus:Oo,useFormState:uo,useActionState:uo,useOptimistic:function(e,t){return eo(Us(),0,e,t)},useMemoCache:Bs,useCacheRefresh:Mo},Go={readContext:Ci,use:zs,useCallback:To,useContext:Ci,useEffect:bo,useImperativeHandle:ko,useInsertionEffect:wo,useLayoutEffect:So,useMemo:Co,useReducer:Ws,useRef:go,useState:function(){return Ws($s)},useDebugValue:_o,useDeferredValue:function(e,t){var n=Us();return null===ws?Io(n,e,t):xo(n,ws.memoizedState,e,t)},useTransition:function(){var e=Ws($s)[0],t=Us().memoizedState;return["boolean"===typeof e?e:Vs(e),t]},useSyncExternalStore:Ks,useId:Lo,useHostTransitionStatus:Oo,useFormState:fo,useActionState:fo,useOptimistic:function(e,t){var n=Us();return null!==ws?eo(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Bs,useCacheRefresh:Mo},Qo=null,Yo=0;function Xo(e){var t=Yo;return Yo+=1,null===Qo&&(Qo=[]),Xi(Qo,e,t)}function Jo(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Zo(e,t){if(t.$$typeof===f)throw Error(o(525));throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ea(e){return(0,e._init)(e._payload)}function ta(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=jr(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Br(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var s=n.type;return s===m?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===C&&ea(s)===t.type)?(Jo(t=i(t,n.props),n),t.return=e,t):(Jo(t=Vr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=$r(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=zr(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Br(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case p:return Jo(n=Vr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case g:return(t=$r(t,e.mode,n)).return=e,t;case C:return h(e,t=(0,t._init)(t._payload),n)}if(P(t)||N(t))return(t=zr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,Xo(t),n);if(t.$$typeof===S)return h(e,Ii(e,t),n);Zo(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case p:return n.key===i?u(e,t,n,r):null;case g:return n.key===i?c(e,t,n,r):null;case C:return f(e,t,n=(i=n._init)(n._payload),r)}if(P(n)||N(n))return null!==i?null:d(e,t,n,r,null);if("function"===typeof n.then)return f(e,t,Xo(n),r);if(n.$$typeof===S)return f(e,t,Ii(e,n),r);Zo(e,n)}return null}function v(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case p:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case g:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case C:return v(e,t,n,r=(0,r._init)(r._payload),i)}if(P(r)||N(r))return d(t,e=e.get(n)||null,r,i,null);if("function"===typeof r.then)return v(e,t,n,Xo(r),i);if(r.$$typeof===S)return v(e,t,n,Ii(t,r),i);Zo(t,r)}return null}function y(l,u,c,d){if("object"===typeof c&&null!==c&&c.type===m&&null===c.key&&(c=c.props.children),"object"===typeof c&&null!==c){switch(c.$$typeof){case p:e:{for(var b=c.key;null!==u;){if(u.key===b){if((b=c.type)===m){if(7===u.tag){n(l,u.sibling),(d=i(u,c.props.children)).return=l,l=d;break e}}else if(u.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===C&&ea(b)===u.type){n(l,u.sibling),Jo(d=i(u,c.props),c),d.return=l,l=d;break e}n(l,u);break}t(l,u),u=u.sibling}c.type===m?((d=zr(c.props.children,l.mode,d,c.key)).return=l,l=d):(Jo(d=Vr(c.type,c.key,c.props,null,l.mode,d),c),d.return=l,l=d)}return a(l);case g:e:{for(b=c.key;null!==u;){if(u.key===b){if(4===u.tag&&u.stateNode.containerInfo===c.containerInfo&&u.stateNode.implementation===c.implementation){n(l,u.sibling),(d=i(u,c.children||[])).return=l,l=d;break e}n(l,u);break}t(l,u),u=u.sibling}(d=$r(c,l.mode,d)).return=l,l=d}return a(l);case C:return y(l,u,c=(b=c._init)(c._payload),d)}if(P(c))return function(i,o,a,l){for(var u=null,c=null,d=o,p=o=0,g=null;null!==d&&p<a.length;p++){d.index>p?(g=d,d=null):g=d.sibling;var m=f(i,d,a[p],l);if(null===m){null===d&&(d=g);break}e&&d&&null===m.alternate&&t(i,d),o=s(m,o,p),null===c?u=m:c.sibling=m,c=m,d=g}if(p===a.length)return n(i,d),si&&Zr(i,p),u;if(null===d){for(;p<a.length;p++)null!==(d=h(i,a[p],l))&&(o=s(d,o,p),null===c?u=d:c.sibling=d,c=d);return si&&Zr(i,p),u}for(d=r(d);p<a.length;p++)null!==(g=v(d,i,p,a[p],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?p:g.key),o=s(g,o,p),null===c?u=g:c.sibling=g,c=g);return e&&d.forEach((function(e){return t(i,e)})),si&&Zr(i,p),u}(l,u,c,d);if(N(c)){if("function"!==typeof(b=N(c)))throw Error(o(150));return function(i,a,l,u){if(null==l)throw Error(o(151));for(var c=null,d=null,p=a,g=a=0,m=null,y=l.next();null!==p&&!y.done;g++,y=l.next()){p.index>g?(m=p,p=null):m=p.sibling;var b=f(i,p,y.value,u);if(null===b){null===p&&(p=m);break}e&&p&&null===b.alternate&&t(i,p),a=s(b,a,g),null===d?c=b:d.sibling=b,d=b,p=m}if(y.done)return n(i,p),si&&Zr(i,g),c;if(null===p){for(;!y.done;g++,y=l.next())null!==(y=h(i,y.value,u))&&(a=s(y,a,g),null===d?c=y:d.sibling=y,d=y);return si&&Zr(i,g),c}for(p=r(p);!y.done;g++,y=l.next())null!==(y=v(p,i,g,y.value,u))&&(e&&null!==y.alternate&&p.delete(null===y.key?g:y.key),a=s(y,a,g),null===d?c=y:d.sibling=y,d=y);return e&&p.forEach((function(e){return t(i,e)})),si&&Zr(i,g),c}(l,u,c=b.call(c),d)}if("function"===typeof c.then)return y(l,u,Xo(c),d);if(c.$$typeof===S)return y(l,u,Ii(l,c),d);Zo(l,c)}return"string"===typeof c&&""!==c||"number"===typeof c||"bigint"===typeof c?(c=""+c,null!==u&&6===u.tag?(n(l,u.sibling),(d=i(u,c)).return=l,l=d):(n(l,u),(d=Br(c,l.mode,d)).return=l,l=d),a(l)):n(l,u)}return function(e,t,n,r){try{Yo=0;var i=y(e,t,n,r);return Qo=null,i}catch(o){if(o===Hi||o===Ki)throw o;var s=Mr(29,o,null,e.mode);return s.lanes=r,s.return=e,s}}}var na=ta(!0),ra=ta(!1),ia=U(null),sa=null;function oa(e){var t=e.alternate;z(ca,1&ca.current),z(ia,e),null===sa&&(null===t||null!==fs.current||null!==t.memoizedState)&&(sa=e)}function aa(e){if(22===e.tag){if(z(ca,ca.current),z(ia,e),null===sa){var t=e.alternate;null!==t&&null!==t.memoizedState&&(sa=e)}}else la()}function la(){z(ca,ca.current),z(ia,ia.current)}function ua(e){V(ia),sa===e&&(sa=null),V(ca)}var ca=U(0);function da(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||md(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ha(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:h({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var fa={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ou(),i=is(r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=ss(e,i,r))&&(Mu(t,e,r),os(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ou(),i=is(r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=ss(e,i,r))&&(Mu(t,e,r),os(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ou(),r=is(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=ss(e,r,n))&&(Mu(t,e,n),os(t,e,n))}};function pa(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!Yn(n,r)||!Yn(i,s))}function ga(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&fa.enqueueReplaceState(t,t.state,null)}function ma(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=h({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}var va="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function ya(e){va(e)}function ba(e){console.error(e)}function wa(e){va(e)}function Sa(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout((function(){throw n}))}}function Ea(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout((function(){throw r}))}}function ka(e,t,n){return(n=is(n)).tag=3,n.payload={element:null},n.callback=function(){Sa(e,t)},n}function _a(e){return(e=is(e)).tag=3,e}function Ta(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"===typeof i){var s=r.value;e.payload=function(){return i(s)},e.callback=function(){Ea(t,n,r)}}var o=n.stateNode;null!==o&&"function"===typeof o.componentDidCatch&&(e.callback=function(){Ea(t,n,r),"function"!==typeof i&&(null===_u?_u=new Set([this]):_u.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Ca=Error(o(461)),Ia=!1;function xa(e,t,n,r){t.child=null===e?ra(t,null,n,r):na(t,e.child,n,r)}function Aa(e,t,n,r,i){n=n.render;var s=t.ref;if("ref"in r){var o={};for(var a in r)"ref"!==a&&(o[a]=r[a])}else o=r;return Ti(t),r=Ds(e,t,n,o,s,i),a=Ls(),null===e||Ia?(si&&a&&ti(t),t.flags|=1,xa(e,t,r,i),t.child):(Ms(e,t,i),Qa(e,t,i))}function Na(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Fr(s)||void 0!==s.defaultProps||null!==n.compare?((e=Vr(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Da(e,t,s,r,i))}if(s=e.child,!Ya(e,i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:Yn)(o,r)&&e.ref===t.ref)return Qa(e,t,i)}return t.flags|=1,(e=jr(s,r)).ref=t.ref,e.return=t,t.child=e}function Da(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(Yn(s,r)&&e.ref===t.ref){if(Ia=!1,t.pendingProps=r=s,!Ya(e,i))return t.lanes=e.lanes,Qa(e,t,i);0!==(131072&e.flags)&&(Ia=!0)}}return La(e,t,n,r,i)}function Ra(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0!==(128&t.flags)){if(r=null!==s?s.baseLanes|n:n,null!==e){for(i=t.child=e.child,s=0;null!==i;)s=s|i.lanes|i.childLanes,i=i.sibling;t.childLanes=s&~r}else t.childLanes=0,t.child=null;return Pa(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Pa(e,t,null!==s?s.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&$i(0,null!==s?s.cachePool:null),null!==s?gs(t,s):ms(),aa(t)}else null!==s?($i(0,s.cachePool),gs(t,s),la(),t.memoizedState=null):(null!==e&&$i(0,null),ms(),la());return xa(e,t,i,n),t.child}function Pa(e,t,n,r){var i=Bi();return i=null===i?null:{parent:Ri._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&$i(0,null),ms(),aa(t),null!==e&&ki(e,t,r,!0),null}function Oa(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(o(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function La(e,t,n,r,i){return Ti(t),n=Ds(e,t,n,r,void 0,i),r=Ls(),null===e||Ia?(si&&r&&ti(t),t.flags|=1,xa(e,t,n,i),t.child):(Ms(e,t,i),Qa(e,t,i))}function Ma(e,t,n,r,i,s){return Ti(t),t.updateQueue=null,n=Ps(t,r,n,i),Rs(e),r=Ls(),null===e||Ia?(si&&r&&ti(t),t.flags|=1,xa(e,t,n,s),t.child):(Ms(e,t,s),Qa(e,t,s))}function Fa(e,t,n,r,i){if(Ti(t),null===t.stateNode){var s=Or,o=n.contextType;"object"===typeof o&&null!==o&&(s=Ci(o)),s=new n(r,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=fa,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=r,s.state=t.memoizedState,s.refs={},ns(t),o=n.contextType,s.context="object"===typeof o&&null!==o?Ci(o):Or,s.state=t.memoizedState,"function"===typeof(o=n.getDerivedStateFromProps)&&(ha(t,n,o,r),s.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(o=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),o!==s.state&&fa.enqueueReplaceState(s,s.state,null),cs(t,r,s,i),us(),s.state=t.memoizedState),"function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){s=t.stateNode;var a=t.memoizedProps,l=ma(n,a);s.props=l;var u=s.context,c=n.contextType;o=Or,"object"===typeof c&&null!==c&&(o=Ci(c));var d=n.getDerivedStateFromProps;c="function"===typeof d||"function"===typeof s.getSnapshotBeforeUpdate,a=t.pendingProps!==a,c||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a||u!==o)&&ga(t,s,r,o),ts=!1;var h=t.memoizedState;s.state=h,cs(t,r,s,i),us(),u=t.memoizedState,a||h!==u||ts?("function"===typeof d&&(ha(t,n,d,r),u=t.memoizedState),(l=ts||pa(t,n,l,r,h,u,o))?(c||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),s.props=r,s.state=u,s.context=o,r=l):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,rs(e,t),c=ma(n,o=t.memoizedProps),s.props=c,d=t.pendingProps,h=s.context,u=n.contextType,l=Or,"object"===typeof u&&null!==u&&(l=Ci(u)),(u="function"===typeof(a=n.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==d||h!==l)&&ga(t,s,r,l),ts=!1,h=t.memoizedState,s.state=h,cs(t,r,s,i),us();var f=t.memoizedState;o!==d||h!==f||ts||null!==e&&null!==e.dependencies&&_i(e.dependencies)?("function"===typeof a&&(ha(t,n,a,r),f=t.memoizedState),(c=ts||pa(t,n,c,r,h,f,l)||null!==e&&null!==e.dependencies&&_i(e.dependencies))?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=c):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return s=r,Oa(e,t),r=0!==(128&t.flags),s||r?(s=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&r?(t.child=na(t,e.child,null,i),t.child=na(t,null,n,i)):xa(e,t,n,i),t.memoizedState=s.state,e=t.child):e=Qa(e,t,i),e}function ja(e,t,n,r){return fi(),t.flags|=256,xa(e,t,n,r),t.child}var Ua={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Va(e){return{baseLanes:e,cachePool:qi()}}function za(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=mu),e}function Ba(e,t,n){var r,i=t.pendingProps,s=!1,a=0!==(128&t.flags);if((r=a)||(r=(null===e||null!==e.memoizedState)&&0!==(2&ca.current)),r&&(s=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(si){if(s?oa(t):la(),si){var l,u=ii;if(l=u){e:{for(l=u,u=ai;8!==l.nodeType;){if(!u){u=null;break e}if(null===(l=vd(l.nextSibling))){u=null;break e}}u=l}null!==u?(t.memoizedState={dehydrated:u,treeContext:null!==Yr?{id:Xr,overflow:Jr}:null,retryLane:536870912,hydrationErrors:null},(l=Mr(18,null,null,0)).stateNode=u,l.return=t,t.child=l,ri=t,ii=null,l=!0):l=!1}l||ui(t)}if(null!==(u=t.memoizedState)&&null!==(u=u.dehydrated))return md(u)?t.lanes=32:t.lanes=536870912,null;ua(t)}return u=i.children,i=i.fallback,s?(la(),u=qa({mode:"hidden",children:u},s=t.mode),i=zr(i,s,n,null),u.return=t,i.return=t,u.sibling=i,t.child=u,(s=t.child).memoizedState=Va(n),s.childLanes=za(e,r,n),t.memoizedState=Ua,i):(oa(t),$a(t,u))}if(null!==(l=e.memoizedState)&&null!==(u=l.dehydrated)){if(a)256&t.flags?(oa(t),t.flags&=-257,t=Ha(e,t,n)):null!==t.memoizedState?(la(),t.child=e.child,t.flags|=128,t=null):(la(),s=i.fallback,u=t.mode,i=qa({mode:"visible",children:i.children},u),(s=zr(s,u,n,null)).flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,na(t,e.child,null,n),(i=t.child).memoizedState=Va(n),i.childLanes=za(e,r,n),t.memoizedState=Ua,t=s);else if(oa(t),md(u)){if(r=u.nextSibling&&u.nextSibling.dataset)var c=r.dgst;r=c,(i=Error(o(419))).stack="",i.digest=r,gi({value:i,source:null,stack:null}),t=Ha(e,t,n)}else if(Ia||ki(e,t,n,!1),r=0!==(n&e.childLanes),Ia||r){if(null!==(r=ru)&&(0!==(i=0!==((i=0!==(42&(i=n&-n))?1:xe(i))&(r.suspendedLanes|n))?0:i)&&i!==l.retryLane))throw l.retryLane=i,Dr(e,i),Mu(r,e,i),Ca;"$?"===u.data||Ku(),t=Ha(e,t,n)}else"$?"===u.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,ii=vd(u.nextSibling),ri=t,si=!0,oi=null,ai=!1,null!==e&&(Gr[Qr++]=Xr,Gr[Qr++]=Jr,Gr[Qr++]=Yr,Xr=e.id,Jr=e.overflow,Yr=t),(t=$a(t,i.children)).flags|=4096);return t}return s?(la(),s=i.fallback,u=t.mode,c=(l=e.child).sibling,(i=jr(l,{mode:"hidden",children:i.children})).subtreeFlags=65011712&l.subtreeFlags,null!==c?s=jr(c,s):(s=zr(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,null===(u=e.child.memoizedState)?u=Va(n):(null!==(l=u.cachePool)?(c=Ri._currentValue,l=l.parent!==c?{parent:c,pool:c}:l):l=qi(),u={baseLanes:u.baseLanes|n,cachePool:l}),s.memoizedState=u,s.childLanes=za(e,r,n),t.memoizedState=Ua,i):(oa(t),e=(n=e.child).sibling,(n=jr(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function $a(e,t){return(t=qa({mode:"visible",children:t},e.mode)).return=e,e.child=t}function qa(e,t){return(e=Mr(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Ha(e,t,n){return na(t,e.child,null,n),(e=$a(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Wa(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Si(e.return,t,n)}function Ka(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ga(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(xa(e,t,r.children,n),0!==(2&(r=ca.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Wa(e,n,t);else if(19===e.tag)Wa(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(z(ca,r),i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===da(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ka(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===da(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ka(t,!0,n,null,s);break;case"together":Ka(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),fu|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(ki(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=jr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=jr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ya(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!_i(e))}function Xa(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Ia=!0;else{if(!Ya(e,n)&&0===(128&t.flags))return Ia=!1,function(e,t,n){switch(t.tag){case 3:W(t,t.stateNode.containerInfo),bi(0,Ri,e.memoizedState.cache),fi();break;case 27:case 5:G(t);break;case 4:W(t,t.stateNode.containerInfo);break;case 10:bi(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(oa(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Ba(e,t,n):(oa(t),null!==(e=Qa(e,t,n))?e.sibling:null);oa(t);break;case 19:var i=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(ki(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return Ga(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),z(ca,ca.current),r)break;return null;case 22:case 23:return t.lanes=0,Ra(e,t,n);case 24:bi(0,Ri,e.memoizedState.cache)}return Qa(e,t,n)}(e,t,n);Ia=0!==(131072&e.flags)}else Ia=!1,si&&0!==(1048576&t.flags)&&ei(t,Kr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,i=r._init;if(r=i(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((i=r.$$typeof)===E){t.tag=11,t=Aa(null,t,r,e,n);break e}if(i===T){t.tag=14,t=Na(null,t,r,e,n);break e}}throw t=R(r)||r,Error(o(306,t,""))}Fr(r)?(e=ma(r,e),t.tag=1,t=Fa(null,t,r,e,n)):(t.tag=0,t=La(null,t,r,e,n))}return t;case 0:return La(e,t,t.type,t.pendingProps,n);case 1:return Fa(e,t,r=t.type,i=ma(r,t.pendingProps),n);case 3:e:{if(W(t,t.stateNode.containerInfo),null===e)throw Error(o(387));r=t.pendingProps;var s=t.memoizedState;i=s.element,rs(e,t),cs(t,r,null,n);var a=t.memoizedState;if(r=a.cache,bi(0,Ri,r),r!==s.cache&&Ei(t,[Ri],n,!0),us(),r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=ja(e,t,r,n);break e}if(r!==i){gi(i=_r(Error(o(424)),t)),t=ja(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ii=vd(e.firstChild),ri=t,si=!0,oi=null,ai=!0,n=ra(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fi(),r===i){t=Qa(e,t,n);break e}xa(e,t,r,n)}t=t.child}return t;case 26:return Oa(e,t),null===e?(n=xd(t.type,null,t.pendingProps,null))?t.memoizedState=n:si||(n=t.type,e=t.pendingProps,(r=rd(q.current).createElement(n))[Re]=t,r[Pe]=e,ed(r,n,e),He(r),t.stateNode=r):t.memoizedState=xd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return G(t),null===e&&si&&(r=t.stateNode=wd(t.type,t.pendingProps,q.current),ri=t,ai=!0,i=ii,fd(t.type)?(yd=i,ii=vd(r.firstChild)):ii=i),xa(e,t,t.pendingProps.children,n),Oa(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&si&&((i=r=ii)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Ue])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===s)return e}if(null===(e=vd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,ai))?(t.stateNode=r,ri=t,ii=vd(r.firstChild),ai=!1,i=!0):i=!1),i||ui(t)),G(t),i=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,r=s.children,od(i,s)?r=null:null!==a&&od(i,a)&&(t.flags|=32),null!==t.memoizedState&&(i=Ds(e,t,Os,null,null,n),Gd._currentValue=i),Oa(e,t),xa(e,t,r,n),t.child;case 6:return null===e&&si&&((e=n=ii)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=vd(e.nextSibling)))return null}return e}(n,t.pendingProps,ai))?(t.stateNode=n,ri=t,ii=null,e=!0):e=!1),e||ui(t)),null;case 13:return Ba(e,t,n);case 4:return W(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=na(t,null,r,n):xa(e,t,r,n),t.child;case 11:return Aa(e,t,t.type,t.pendingProps,n);case 7:return xa(e,t,t.pendingProps,n),t.child;case 8:case 12:return xa(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,bi(0,t.type,r.value),xa(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,Ti(t),r=r(i=Ci(i)),t.flags|=1,xa(e,t,r,n),t.child;case 14:return Na(e,t,t.type,t.pendingProps,n);case 15:return Da(e,t,t.type,t.pendingProps,n);case 19:return Ga(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=qa(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=jr(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Ra(e,t,n);case 24:return Ti(t),r=Ci(Ri),null===e?(null===(i=Bi())&&(i=ru,s=Pi(),i.pooledCache=s,s.refCount++,null!==s&&(i.pooledCacheLanes|=n),i=s),t.memoizedState={parent:r,cache:i},ns(t),bi(0,Ri,i)):(0!==(e.lanes&n)&&(rs(e,t),cs(t,null,null,n),us()),i=e.memoizedState,s=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),bi(0,Ri,r)):(r=s.cache,bi(0,Ri,r),r!==i.cache&&Ei(t,[Ri],n,!0))),xa(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function Ja(e){e.flags|=4}function Za(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!zd(t)){if(null!==(t=ia.current)&&((4194048&su)===su?null!==sa:(62914560&su)!==su&&0===(536870912&su)||t!==sa))throw Ji=Gi,Wi;e.flags|=8192}}function el(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?ke():536870912,e.lanes|=t,vu|=t)}function tl(e,t){if(!si)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function nl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=65011712&i.subtreeFlags,r|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function rl(e,t,n){var r=t.pendingProps;switch(ni(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return nl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),wi(Ri),K(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(hi(t)?Ja(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,pi())),nl(t),null;case 26:return n=t.memoizedState,null===e?(Ja(t),null!==n?(nl(t),Za(t,n)):(nl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Ja(t),nl(t),Za(t,n)):(nl(t),t.flags&=-16777217):(e.memoizedProps!==r&&Ja(t),nl(t),t.flags&=-16777217),null;case 27:Q(t),n=q.current;var i=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Ja(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return nl(t),null}e=B.current,hi(t)?ci(t):(e=wd(i,r,n),t.stateNode=e,Ja(t))}return nl(t),null;case 5:if(Q(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Ja(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return nl(t),null}if(e=B.current,hi(t))ci(t);else{switch(i=rd(q.current),e){case 1:e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?i.createElement(n,{is:r.is}):i.createElement(n)}}e[Re]=t,e[Pe]=r;e:for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;null===i.sibling;){if(null===i.return||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=e;e:switch(ed(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Ja(t)}}return nl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Ja(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(e=q.current,hi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=ri))switch(i.tag){case 27:case 5:r=i.memoizedProps}e[Re]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Yc(e.nodeValue,n)))||ui(t)}else(e=rd(e).createTextNode(r))[Re]=t,t.stateNode=e}return nl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=hi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(o(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(o(317));i[Re]=t}else fi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;nl(t),i=!1}else i=pi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&t.flags?(ua(t),t):(ua(t),null)}if(ua(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){i=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool);var s=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(s=r.memoizedState.cachePool.pool),s!==i&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),el(t,t.updateQueue),nl(t),null;case 4:return K(),null===e&&Vc(t.stateNode.containerInfo),nl(t),null;case 10:return wi(t.type),nl(t),null;case 19:if(V(ca),null===(i=t.memoizedState))return nl(t),null;if(r=0!==(128&t.flags),null===(s=i.rendering))if(r)tl(i,!1);else{if(0!==hu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=da(e))){for(t.flags|=128,tl(i,!1),e=s.updateQueue,t.updateQueue=e,el(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Ur(n,e),n=n.sibling;return z(ca,1&ca.current|2),t.child}e=e.sibling}null!==i.tail&&te()>Eu&&(t.flags|=128,r=!0,tl(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=da(s))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,el(t,e),tl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!s.alternate&&!si)return nl(t),null}else 2*te()-i.renderingStartTime>Eu&&536870912!==n&&(t.flags|=128,r=!0,tl(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=i.last)?e.sibling=s:t.child=s,i.last=s)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=te(),t.sibling=null,e=ca.current,z(ca,r?1&e|2:1&e),t):(nl(t),null);case 22:case 23:return ua(t),vs(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(nl(t),6&t.subtreeFlags&&(t.flags|=8192)):nl(t),null!==(n=t.updateQueue)&&el(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&V(zi),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),wi(Ri),nl(t),null;case 25:case 30:return null}throw Error(o(156,t.tag))}function il(e,t){switch(ni(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return wi(Ri),K(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Q(t),null;case 13:if(ua(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return V(ca),null;case 4:return K(),null;case 10:return wi(t.type),null;case 22:case 23:return ua(t),vs(),null!==e&&V(zi),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return wi(Ri),null;default:return null}}function sl(e,t){switch(ni(t),t.tag){case 3:wi(Ri),K();break;case 26:case 27:case 5:Q(t);break;case 4:K();break;case 13:ua(t);break;case 19:V(ca);break;case 10:wi(t.type);break;case 22:case 23:ua(t),vs(),null!==e&&V(zi);break;case 24:wi(Ri)}}function ol(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var s=n.create,o=n.inst;r=s(),o.destroy=r}n=n.next}while(n!==i)}}catch(a){cc(t,t.return,a)}}function al(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var s=i.next;r=s;do{if((r.tag&e)===e){var o=r.inst,a=o.destroy;if(void 0!==a){o.destroy=void 0,i=t;var l=n,u=a;try{u()}catch(c){cc(i,l,c)}}}r=r.next}while(r!==s)}}catch(c){cc(t,t.return,c)}}function ll(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{hs(t,n)}catch(r){cc(e,e.return,r)}}}function ul(e,t,n){n.props=ma(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){cc(e,t,r)}}function cl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(i){cc(e,t,i)}}function dl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(i){cc(e,t,i)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(s){cc(e,t,s)}else n.current=null}function hl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){cc(e,e.return,i)}}function fl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,s=null,a=null,l=null,u=null,c=null,d=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":u=h;default:r.hasOwnProperty(p)||Jc(e,t,p,null,r,h)}}for(var f in r){var p=r[f];if(h=n[f],r.hasOwnProperty(f)&&(null!=p||null!=h))switch(f){case"type":s=p;break;case"name":i=p;break;case"checked":c=p;break;case"defaultChecked":d=p;break;case"value":a=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(o(137,t));break;default:p!==h&&Jc(e,t,f,p,r,h)}}return void mt(e,a,l,u,c,d,s,i);case"select":for(s in p=a=l=f=null,n)if(u=n[s],n.hasOwnProperty(s)&&null!=u)switch(s){case"value":break;case"multiple":p=u;default:r.hasOwnProperty(s)||Jc(e,t,s,null,r,u)}for(i in r)if(s=r[i],u=n[i],r.hasOwnProperty(i)&&(null!=s||null!=u))switch(i){case"value":f=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:s!==u&&Jc(e,t,i,s,r,u)}return t=l,n=a,r=p,void(null!=f?bt(e,!!n,f,!1):!!r!==!!n&&(null!=t?bt(e,!!n,t,!0):bt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=f=null,n)if(i=n[l],n.hasOwnProperty(l)&&null!=i&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Jc(e,t,l,null,r,i)}for(a in r)if(i=r[a],s=n[a],r.hasOwnProperty(a)&&(null!=i||null!=s))switch(a){case"value":f=i;break;case"defaultValue":p=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(o(91));break;default:i!==s&&Jc(e,t,a,i,r,s)}return void wt(e,f,p);case"option":for(var g in n)if(f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g))if("selected"===g)e.selected=!1;else Jc(e,t,g,null,r,f);for(u in r)if(f=r[u],p=n[u],r.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))if("selected"===u)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else Jc(e,t,u,f,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var m in n)f=n[m],n.hasOwnProperty(m)&&null!=f&&!r.hasOwnProperty(m)&&Jc(e,t,m,null,r,f);for(c in r)if(f=r[c],p=n[c],r.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))switch(c){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(o(137,t));break;default:Jc(e,t,c,f,r,p)}return;default:if(Ct(t)){for(var v in n)f=n[v],n.hasOwnProperty(v)&&void 0!==f&&!r.hasOwnProperty(v)&&Zc(e,t,v,void 0,r,f);for(d in r)f=r[d],p=n[d],!r.hasOwnProperty(d)||f===p||void 0===f&&void 0===p||Zc(e,t,d,f,r,p);return}}for(var y in n)f=n[y],n.hasOwnProperty(y)&&null!=f&&!r.hasOwnProperty(y)&&Jc(e,t,y,null,r,f);for(h in r)f=r[h],p=n[h],!r.hasOwnProperty(h)||f===p||null==f&&null==p||Jc(e,t,h,f,r,p)}(r,e.type,n,t),r[Pe]=t}catch(i){cc(e,e.return,i)}}function pl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&fd(e.type)||4===e.tag}function gl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||pl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&fd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ml(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Xc));else if(4!==r&&(27===r&&fd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(ml(e,t,n),e=e.sibling;null!==e;)ml(e,t,n),e=e.sibling}function vl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&fd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(vl(e,t,n),e=e.sibling;null!==e;)vl(e,t,n),e=e.sibling}function yl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);ed(t,r,n),t[Re]=e,t[Pe]=n}catch(s){cc(e,e.return,s)}}var bl=!1,wl=!1,Sl=!1,El="function"===typeof WeakSet?WeakSet:Set,kl=null;function _l(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Fl(e,n),4&r&&ol(5,n);break;case 1:if(Fl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(o){cc(n,n.return,o)}else{var i=ma(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){cc(n,n.return,a)}}64&r&&ll(n),512&r&&cl(n,n.return);break;case 3:if(Fl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{hs(e,t)}catch(o){cc(n,n.return,o)}}break;case 27:null===t&&4&r&&yl(n);case 26:case 5:Fl(e,n),null===t&&4&r&&hl(n),512&r&&cl(n,n.return);break;case 12:Fl(e,n);break;case 13:Fl(e,n),4&r&&Nl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=pc.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||bl)){t=null!==t&&null!==t.memoizedState||wl,i=bl;var s=wl;bl=r,(wl=t)&&!s?Ul(e,n,0!==(8772&n.subtreeFlags)):Fl(e,n),bl=i,wl=s}break;case 30:break;default:Fl(e,n)}}function Tl(e){var t=e.alternate;null!==t&&(e.alternate=null,Tl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ve(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Cl=null,Il=!1;function xl(e,t,n){for(n=n.child;null!==n;)Al(e,t,n),n=n.sibling}function Al(e,t,n){if(de&&"function"===typeof de.onCommitFiberUnmount)try{de.onCommitFiberUnmount(ce,n)}catch(s){}switch(n.tag){case 26:wl||dl(n,t),xl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:wl||dl(n,t);var r=Cl,i=Il;fd(n.type)&&(Cl=n.stateNode,Il=!1),xl(e,t,n),Sd(n.stateNode),Cl=r,Il=i;break;case 5:wl||dl(n,t);case 6:if(r=Cl,i=Il,Cl=null,xl(e,t,n),Il=i,null!==(Cl=r))if(Il)try{(9===Cl.nodeType?Cl.body:"HTML"===Cl.nodeName?Cl.ownerDocument.body:Cl).removeChild(n.stateNode)}catch(o){cc(n,t,o)}else try{Cl.removeChild(n.stateNode)}catch(o){cc(n,t,o)}break;case 18:null!==Cl&&(Il?(pd(9===(e=Cl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Ih(e)):pd(Cl,n.stateNode));break;case 4:r=Cl,i=Il,Cl=n.stateNode.containerInfo,Il=!0,xl(e,t,n),Cl=r,Il=i;break;case 0:case 11:case 14:case 15:wl||al(2,n,t),wl||al(4,n,t),xl(e,t,n);break;case 1:wl||(dl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&ul(n,t,r)),xl(e,t,n);break;case 21:xl(e,t,n);break;case 22:wl=(r=wl)||null!==n.memoizedState,xl(e,t,n),wl=r;break;default:xl(e,t,n)}}function Nl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Ih(e)}catch(n){cc(t,t.return,n)}}function Dl(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new El),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new El),t;default:throw Error(o(435,e.tag))}}(e);t.forEach((function(t){var r=gc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}function Rl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 27:if(fd(l.type)){Cl=l.stateNode,Il=!1;break e}break;case 5:Cl=l.stateNode,Il=!1;break e;case 3:case 4:Cl=l.stateNode.containerInfo,Il=!0;break e}l=l.return}if(null===Cl)throw Error(o(160));Al(s,a,i),Cl=null,Il=!1,null!==(s=i.alternate)&&(s.return=null),i.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Ol(t,e),t=t.sibling}var Pl=null;function Ol(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Rl(t,e),Ll(e),4&r&&(al(3,e,e.return),ol(3,e),al(5,e,e.return));break;case 1:Rl(t,e),Ll(e),512&r&&(wl||null===n||dl(n,n.return)),64&r&&bl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var i=Pl;if(Rl(t,e),Ll(e),512&r&&(wl||null===n||dl(n,n.return)),4&r){var s=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":(!(s=i.getElementsByTagName("title")[0])||s[Ue]||s[Re]||"http://www.w3.org/2000/svg"===s.namespaceURI||s.hasAttribute("itemprop"))&&(s=i.createElement(r),i.head.insertBefore(s,i.querySelector("head > title"))),ed(s,r,n),s[Re]=e,He(s),r=s;break e;case"link":var a=Ud("link","href",i).get(r+(n.href||""));if(a)for(var l=0;l<a.length;l++)if((s=a[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&s.getAttribute("rel")===(null==n.rel?null:n.rel)&&s.getAttribute("title")===(null==n.title?null:n.title)&&s.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){a.splice(l,1);break t}ed(s=i.createElement(r),r,n),i.head.appendChild(s);break;case"meta":if(a=Ud("meta","content",i).get(r+(n.content||"")))for(l=0;l<a.length;l++)if((s=a[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&s.getAttribute("name")===(null==n.name?null:n.name)&&s.getAttribute("property")===(null==n.property?null:n.property)&&s.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&s.getAttribute("charset")===(null==n.charSet?null:n.charSet)){a.splice(l,1);break t}ed(s=i.createElement(r),r,n),i.head.appendChild(s);break;default:throw Error(o(468,r))}s[Re]=e,He(s),r=s}e.stateNode=r}else Vd(i,e.type,e.stateNode);else e.stateNode=Od(i,r,e.memoizedProps);else s!==r?(null===s?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):s.count--,null===r?Vd(i,e.type,e.stateNode):Od(i,r,e.memoizedProps)):null===r&&null!==e.stateNode&&fl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Rl(t,e),Ll(e),512&r&&(wl||null===n||dl(n,n.return)),null!==n&&4&r&&fl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Rl(t,e),Ll(e),512&r&&(wl||null===n||dl(n,n.return)),32&e.flags){i=e.stateNode;try{Et(i,"")}catch(p){cc(e,e.return,p)}}4&r&&null!=e.stateNode&&fl(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&r&&(Sl=!0);break;case 6:if(Rl(t,e),Ll(e),4&r){if(null===e.stateNode)throw Error(o(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(p){cc(e,e.return,p)}}break;case 3:if(jd=null,i=Pl,Pl=_d(t.containerInfo),Rl(t,e),Pl=i,Ll(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ih(t.containerInfo)}catch(p){cc(e,e.return,p)}Sl&&(Sl=!1,Ml(e));break;case 4:r=Pl,Pl=_d(e.stateNode.containerInfo),Rl(t,e),Ll(e),Pl=r;break;case 12:default:Rl(t,e),Ll(e);break;case 13:Rl(t,e),Ll(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(Su=te()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Dl(e,r)));break;case 22:i=null!==e.memoizedState;var u=null!==n&&null!==n.memoizedState,c=bl,d=wl;if(bl=c||i,wl=d||u,Rl(t,e),wl=d,bl=c,Ll(e),8192&r)e:for(t=e.stateNode,t._visibility=i?-2&t._visibility:1|t._visibility,i&&(null===n||u||bl||wl||jl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){u=n=t;try{if(s=u.stateNode,i)"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none";else{l=u.stateNode;var h=u.memoizedProps.style,f=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(p){cc(u,u.return,p)}}}else if(6===t.tag){if(null===n){u=t;try{u.stateNode.nodeValue=i?"":u.memoizedProps}catch(p){cc(u,u.return,p)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Dl(e,n))));break;case 19:Rl(t,e),Ll(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Dl(e,r)));case 30:case 21:}}function Ll(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(pl(r)){n=r;break}r=r.return}if(null==n)throw Error(o(160));switch(n.tag){case 27:var i=n.stateNode;vl(e,gl(e),i);break;case 5:var s=n.stateNode;32&n.flags&&(Et(s,""),n.flags&=-33),vl(e,gl(e),s);break;case 3:case 4:var a=n.stateNode.containerInfo;ml(e,gl(e),a);break;default:throw Error(o(161))}}catch(l){cc(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ml(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ml(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Fl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)_l(e,t.alternate,t),t=t.sibling}function jl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:al(4,t,t.return),jl(t);break;case 1:dl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&ul(t,t.return,n),jl(t);break;case 27:Sd(t.stateNode);case 26:case 5:dl(t,t.return),jl(t);break;case 22:null===t.memoizedState&&jl(t);break;default:jl(t)}e=e.sibling}}function Ul(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,s=t,o=s.flags;switch(s.tag){case 0:case 11:case 15:Ul(i,s,n),ol(4,s);break;case 1:if(Ul(i,s,n),"function"===typeof(i=(r=s).stateNode).componentDidMount)try{i.componentDidMount()}catch(u){cc(r,r.return,u)}if(null!==(i=(r=s).updateQueue)){var a=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)ds(l[i],a)}catch(u){cc(r,r.return,u)}}n&&64&o&&ll(s),cl(s,s.return);break;case 27:yl(s);case 26:case 5:Ul(i,s,n),n&&null===r&&4&o&&hl(s),cl(s,s.return);break;case 12:Ul(i,s,n);break;case 13:Ul(i,s,n),n&&4&o&&Nl(i,s);break;case 22:null===s.memoizedState&&Ul(i,s,n),cl(s,s.return);break;case 30:break;default:Ul(i,s,n)}t=t.sibling}}function Vl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Oi(n))}function zl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Oi(e))}function Bl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)$l(e,t,n,r),t=t.sibling}function $l(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Bl(e,t,n,r),2048&i&&ol(9,t);break;case 1:case 13:default:Bl(e,t,n,r);break;case 3:Bl(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Oi(e)));break;case 12:if(2048&i){Bl(e,t,n,r),e=t.stateNode;try{var s=t.memoizedProps,o=s.id,a=s.onPostCommit;"function"===typeof a&&a(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){cc(t,t.return,l)}}else Bl(e,t,n,r);break;case 23:break;case 22:s=t.stateNode,o=t.alternate,null!==t.memoizedState?2&s._visibility?Bl(e,t,n,r):Hl(e,t):2&s._visibility?Bl(e,t,n,r):(s._visibility|=2,ql(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&i&&Vl(o,t);break;case 24:Bl(e,t,n,r),2048&i&&zl(t.alternate,t)}}function ql(e,t,n,r,i){for(i=i&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var s=e,o=t,a=n,l=r,u=o.flags;switch(o.tag){case 0:case 11:case 15:ql(s,o,a,l,i),ol(8,o);break;case 23:break;case 22:var c=o.stateNode;null!==o.memoizedState?2&c._visibility?ql(s,o,a,l,i):Hl(s,o):(c._visibility|=2,ql(s,o,a,l,i)),i&&2048&u&&Vl(o.alternate,o);break;case 24:ql(s,o,a,l,i),i&&2048&u&&zl(o.alternate,o);break;default:ql(s,o,a,l,i)}t=t.sibling}}function Hl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:Hl(n,r),2048&i&&Vl(r.alternate,r);break;case 24:Hl(n,r),2048&i&&zl(r.alternate,r);break;default:Hl(n,r)}t=t.sibling}}var Wl=8192;function Kl(e){if(e.subtreeFlags&Wl)for(e=e.child;null!==e;)Gl(e),e=e.sibling}function Gl(e){switch(e.tag){case 26:Kl(e),e.flags&Wl&&null!==e.memoizedState&&function(e,t,n){if(null===Bd)throw Error(o(475));var r=Bd;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var i=Ad(n.href),s=e.querySelector(Nd(i));if(s)return null!==(e=s._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=qd.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=s,void He(s);s=e.ownerDocument||e,n=Dd(n),(i=Ed.get(i))&&Md(n,i),He(s=s.createElement("link"));var a=s;a._p=new Promise((function(e,t){a.onload=e,a.onerror=t})),ed(s,"link",n),t.instance=s}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=qd.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Pl,e.memoizedState,e.memoizedProps);break;case 5:default:Kl(e);break;case 3:case 4:var t=Pl;Pl=_d(e.stateNode.containerInfo),Kl(e),Pl=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Wl,Wl=16777216,Kl(e),Wl=t):Kl(e))}}function Ql(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Yl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];kl=r,Zl(r,e)}Ql(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Xl(e),e=e.sibling}function Xl(e){switch(e.tag){case 0:case 11:case 15:Yl(e),2048&e.flags&&al(9,e,e.return);break;case 3:case 12:default:Yl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Jl(e)):Yl(e)}}function Jl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];kl=r,Zl(r,e)}Ql(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:al(8,t,t.return),Jl(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Jl(t));break;default:Jl(t)}e=e.sibling}}function Zl(e,t){for(;null!==kl;){var n=kl;switch(n.tag){case 0:case 11:case 15:al(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Oi(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,kl=r;else e:for(n=e;null!==kl;){var i=(r=kl).sibling,s=r.return;if(Tl(r),r===n){kl=null;break e}if(null!==i){i.return=s,kl=i;break e}kl=s}}}var eu={getCacheForType:function(e){var t=Ci(Ri),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},tu="function"===typeof WeakMap?WeakMap:Map,nu=0,ru=null,iu=null,su=0,ou=0,au=null,lu=!1,uu=!1,cu=!1,du=0,hu=0,fu=0,pu=0,gu=0,mu=0,vu=0,yu=null,bu=null,wu=!1,Su=0,Eu=1/0,ku=null,_u=null,Tu=0,Cu=null,Iu=null,xu=0,Au=0,Nu=null,Du=null,Ru=0,Pu=null;function Ou(){if(0!==(2&nu)&&0!==su)return su&-su;if(null!==O.T){return 0!==Fi?Fi:Ac()}return Ne()}function Lu(){0===mu&&(mu=0===(536870912&su)||si?Ee():536870912);var e=ia.current;return null!==e&&(e.flags|=32),mu}function Mu(e,t,n){(e!==ru||2!==ou&&9!==ou)&&null===e.cancelPendingCommit||($u(e,0),Vu(e,su,mu,!1)),Te(e,n),0!==(2&nu)&&e===ru||(e===ru&&(0===(2&nu)&&(pu|=n),4===hu&&Vu(e,su,mu,!1)),Ec(e))}function Fu(e,t,n){if(0!==(6&nu))throw Error(o(327));for(var r=!n&&0===(124&t)&&0===(t&e.expiredLanes)||we(e,t),i=r?function(e,t){var n=nu;nu|=2;var r=Hu(),i=Wu();ru!==e||su!==t?(ku=null,Eu=te()+500,$u(e,t)):uu=we(e,t);e:for(;;)try{if(0!==ou&&null!==iu){t=iu;var s=au;t:switch(ou){case 1:ou=0,au=null,Zu(e,t,s,1);break;case 2:case 9:if(Qi(s)){ou=0,au=null,Ju(t);break}t=function(){2!==ou&&9!==ou||ru!==e||(ou=7),Ec(e)},s.then(t,t);break e;case 3:ou=7;break e;case 4:ou=5;break e;case 7:Qi(s)?(ou=0,au=null,Ju(t)):(ou=0,au=null,Zu(e,t,s,7));break;case 5:var a=null;switch(iu.tag){case 26:a=iu.memoizedState;case 5:case 27:var l=iu;if(!a||zd(a)){ou=0,au=null;var u=l.sibling;if(null!==u)iu=u;else{var c=l.return;null!==c?(iu=c,ec(c)):iu=null}break t}}ou=0,au=null,Zu(e,t,s,5);break;case 6:ou=0,au=null,Zu(e,t,s,6);break;case 8:Bu(),hu=6;break e;default:throw Error(o(462))}}Yu();break}catch(d){qu(e,d)}return yi=vi=null,O.H=r,O.A=i,nu=n,null!==iu?0:(ru=null,su=0,xr(),hu)}(e,t):Gu(e,t,!0),s=r;;){if(0===i){uu&&!r&&Vu(e,t,0,!1);break}if(n=e.current.alternate,!s||Uu(n)){if(2===i){if(s=t,e.errorRecoveryDisabledLanes&s)var a=0;else a=0!==(a=-536870913&e.pendingLanes)?a:536870912&a?536870912:0;if(0!==a){t=a;e:{var l=e;i=yu;var u=l.current.memoizedState.isDehydrated;if(u&&($u(l,a).flags|=256),2!==(a=Gu(l,a,!1))){if(cu&&!u){l.errorRecoveryDisabledLanes|=s,pu|=s,i=4;break e}s=bu,bu=i,null!==s&&(null===bu?bu=s:bu.push.apply(bu,s))}i=a}if(s=!1,2!==i)continue}}if(1===i){$u(e,0),Vu(e,t,0,!0);break}e:{switch(r=e,s=i){case 0:case 1:throw Error(o(345));case 4:if((4194048&t)!==t)break;case 6:Vu(r,t,mu,!lu);break e;case 2:bu=null;break;case 3:case 5:break;default:throw Error(o(329))}if((62914560&t)===t&&10<(i=Su+300-te())){if(Vu(r,t,mu,!lu),0!==be(r,0,!0))break e;r.timeoutHandle=ld(ju.bind(null,r,n,bu,ku,wu,t,mu,pu,vu,lu,s,2,-0,0),i)}else ju(r,n,bu,ku,wu,t,mu,pu,vu,lu,s,0,-0,0)}break}i=Gu(e,t,!1),s=!1}Ec(e)}function ju(e,t,n,r,i,s,a,l,u,c,d,h,f,p){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||16785408===(16785408&h))&&(Bd={stylesheets:null,count:0,unsuspend:$d},Gl(t),null!==(h=function(){if(null===Bd)throw Error(o(475));var e=Bd;return e.stylesheets&&0===e.count&&Wd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout((function(){if(e.stylesheets&&Wd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}}),6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=h(nc.bind(null,e,t,s,n,r,i,a,l,u,d,1,f,p)),void Vu(e,s,a,!c);nc(e,t,s,n,r,i,a,l,u)}function Uu(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Qn(s(),i))return!1}catch(o){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Vu(e,t,n,r){t&=~gu,t&=~pu,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var s=31-fe(i),o=1<<s;r[s]=-1,i&=~o}0!==n&&Ce(e,n,t)}function zu(){return 0!==(6&nu)||(kc(0,!1),!1)}function Bu(){if(null!==iu){if(0===ou)var e=iu.return;else yi=vi=null,Fs(e=iu),Qo=null,Yo=0,e=iu;for(;null!==e;)sl(e.alternate,e),e=e.return;iu=null}}function $u(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,ud(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Bu(),ru=e,iu=n=jr(e.current,null),su=t,ou=0,au=null,lu=!1,uu=we(e,t),cu=!1,vu=mu=gu=pu=fu=hu=0,bu=yu=null,wu=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-fe(r),s=1<<i;t|=e[i],r&=~s}return du=t,xr(),n}function qu(e,t){bs=null,O.H=Ho,t===Hi||t===Ki?(t=Zi(),ou=3):t===Wi?(t=Zi(),ou=4):ou=t===Ca?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,au=t,null===iu&&(hu=1,Sa(e,_r(t,e.current)))}function Hu(){var e=O.H;return O.H=Ho,null===e?Ho:e}function Wu(){var e=O.A;return O.A=eu,e}function Ku(){hu=4,lu||(4194048&su)!==su&&null!==ia.current||(uu=!0),0===(134217727&fu)&&0===(134217727&pu)||null===ru||Vu(ru,su,mu,!1)}function Gu(e,t,n){var r=nu;nu|=2;var i=Hu(),s=Wu();ru===e&&su===t||(ku=null,$u(e,t)),t=!1;var o=hu;e:for(;;)try{if(0!==ou&&null!==iu){var a=iu,l=au;switch(ou){case 8:Bu(),o=6;break e;case 3:case 2:case 9:case 6:null===ia.current&&(t=!0);var u=ou;if(ou=0,au=null,Zu(e,a,l,u),n&&uu){o=0;break e}break;default:u=ou,ou=0,au=null,Zu(e,a,l,u)}}Qu(),o=hu;break}catch(c){qu(e,c)}return t&&e.shellSuspendCounter++,yi=vi=null,nu=r,O.H=i,O.A=s,null===iu&&(ru=null,su=0,xr()),o}function Qu(){for(;null!==iu;)Xu(iu)}function Yu(){for(;null!==iu&&!Z();)Xu(iu)}function Xu(e){var t=Xa(e.alternate,e,du);e.memoizedProps=e.pendingProps,null===t?ec(e):iu=t}function Ju(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ma(n,t,t.pendingProps,t.type,void 0,su);break;case 11:t=Ma(n,t,t.pendingProps,t.type.render,t.ref,su);break;case 5:Fs(t);default:sl(n,t),t=Xa(n,t=iu=Ur(t,du),du)}e.memoizedProps=e.pendingProps,null===t?ec(e):iu=t}function Zu(e,t,n,r){yi=vi=null,Fs(t),Qo=null,Yo=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&ki(t,n,i,!0),null!==(n=ia.current)){switch(n.tag){case 13:return null===sa?Ku():null===n.alternate&&0===hu&&(hu=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===Gi?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),dc(e,r,i)),!1;case 22:return n.flags|=65536,r===Gi?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),dc(e,r,i)),!1}throw Error(o(435,n.tag))}return dc(e,r,i),Ku(),!1}if(si)return null!==(t=ia.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==li&&gi(_r(e=Error(o(422),{cause:r}),n))):(r!==li&&gi(_r(t=Error(o(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,r=_r(r,n),as(e,i=ka(e.stateNode,r,i)),4!==hu&&(hu=2)),!1;var s=Error(o(520),{cause:r});if(s=_r(s,n),null===yu?yu=[s]:yu.push(s),4!==hu&&(hu=2),null===t)return!0;r=_r(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,as(n,e=ka(n.stateNode,r,e)),!1;case 1:if(t=n.type,s=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==s&&"function"===typeof s.componentDidCatch&&(null===_u||!_u.has(s))))return n.flags|=65536,i&=-i,n.lanes|=i,Ta(i=_a(i),e,n,r),as(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,su))return hu=1,Sa(e,_r(n,e.current)),void(iu=null)}catch(s){if(null!==i)throw iu=i,s;return hu=1,Sa(e,_r(n,e.current)),void(iu=null)}32768&t.flags?(si||1===r?e=!0:uu||0!==(536870912&su)?e=!1:(lu=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=ia.current)&&13===r.tag&&(r.flags|=16384))),tc(t,e)):ec(t)}function ec(e){var t=e;do{if(0!==(32768&t.flags))return void tc(t,lu);e=t.return;var n=rl(t.alternate,t,du);if(null!==n)return void(iu=n);if(null!==(t=t.sibling))return void(iu=t);iu=t=e}while(null!==t);0===hu&&(hu=5)}function tc(e,t){do{var n=il(e.alternate,e);if(null!==n)return n.flags&=32767,void(iu=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(iu=e);iu=e=n}while(null!==e);hu=6,iu=null}function nc(e,t,n,r,i,s,a,l,u){e.cancelPendingCommit=null;do{ac()}while(0!==Tu);if(0!==(6&nu))throw Error(o(327));if(null!==t){if(t===e.current)throw Error(o(177));if(s=t.lanes|t.childLanes,function(e,t,n,r,i,s){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,u=e.hiddenUpdates;for(n=o&~n;0<n;){var c=31-fe(n),d=1<<c;a[c]=0,l[c]=-1;var h=u[c];if(null!==h)for(u[c]=null,c=0;c<h.length;c++){var f=h[c];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&Ce(e,r,0),0!==s&&0===i&&0!==e.tag&&(e.suspendedLanes|=s&~(o&~t))}(e,n,s|=Ir,a,l,u),e===ru&&(iu=ru=null,su=0),Iu=t,Cu=e,xu=n,Au=s,Nu=i,Du=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,X(se,(function(){return lc(),null}))):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=O.T,O.T=null,i=L.p,L.p=2,a=nu,nu|=4;try{!function(e,t){if(e=e.containerInfo,td=nh,tr(e=er(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(m){n=null;break e}var a=0,l=-1,u=-1,c=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==s||0!==r&&3!==h.nodeType||(u=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++c===i&&(l=a),f===s&&++d===r&&(u=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(nd={focusedElem:e,selectionRange:n},nh=!1,kl=t;null!==kl;)if(e=(t=kl).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,kl=e;else for(;null!==kl;){switch(s=(t=kl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==s){e=void 0,n=t,i=s.memoizedProps,s=s.memoizedState,r=n.stateNode;try{var g=ma(n.type,i,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(g,s),r.__reactInternalSnapshotBeforeUpdate=e}catch(v){cc(n,n.return,v)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))gd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":gd(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(o(163))}if(null!==(e=t.sibling)){e.return=t.return,kl=e;break}kl=t.return}}(e,t)}finally{nu=a,L.p=i,O.T=r}}Tu=1,rc(),ic(),sc()}}function rc(){if(1===Tu){Tu=0;var e=Cu,t=Iu,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=O.T,O.T=null;var r=L.p;L.p=2;var i=nu;nu|=4;try{Ol(t,e);var s=nd,o=er(e.containerInfo),a=s.focusedElem,l=s.selectionRange;if(o!==a&&a&&a.ownerDocument&&Zn(a.ownerDocument.documentElement,a)){if(null!==l&&tr(a)){var u=l.start,c=l.end;if(void 0===c&&(c=u),"selectionStart"in a)a.selectionStart=u,a.selectionEnd=Math.min(c,a.value.length);else{var d=a.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),p=a.textContent.length,g=Math.min(l.start,p),m=void 0===l.end?g:Math.min(l.end,p);!f.extend&&g>m&&(o=m,m=g,g=o);var v=Jn(a,g),y=Jn(a,m);if(v&&y&&(1!==f.rangeCount||f.anchorNode!==v.node||f.anchorOffset!==v.offset||f.focusNode!==y.node||f.focusOffset!==y.offset)){var b=d.createRange();b.setStart(v.node,v.offset),f.removeAllRanges(),g>m?(f.addRange(b),f.extend(y.node,y.offset)):(b.setEnd(y.node,y.offset),f.addRange(b))}}}}for(d=[],f=a;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof a.focus&&a.focus(),a=0;a<d.length;a++){var w=d[a];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}nh=!!td,nd=td=null}finally{nu=i,L.p=r,O.T=n}}e.current=t,Tu=2}}function ic(){if(2===Tu){Tu=0;var e=Cu,t=Iu,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=O.T,O.T=null;var r=L.p;L.p=2;var i=nu;nu|=4;try{_l(e,t.alternate,t)}finally{nu=i,L.p=r,O.T=n}}Tu=3}}function sc(){if(4===Tu||3===Tu){Tu=0,ee();var e=Cu,t=Iu,n=xu,r=Du;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Tu=5:(Tu=0,Iu=Cu=null,oc(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(_u=null),Ae(n),t=t.stateNode,de&&"function"===typeof de.onCommitFiberRoot)try{de.onCommitFiberRoot(ce,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=O.T,i=L.p,L.p=2,O.T=null;try{for(var s=e.onRecoverableError,o=0;o<r.length;o++){var a=r[o];s(a.value,{componentStack:a.stack})}}finally{O.T=t,L.p=i}}0!==(3&xu)&&ac(),Ec(e),i=e.pendingLanes,0!==(4194090&n)&&0!==(42&i)?e===Pu?Ru++:(Ru=0,Pu=e):Ru=0,kc(0,!1)}}function oc(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Oi(t)))}function ac(e){return rc(),ic(),sc(),lc()}function lc(){if(5!==Tu)return!1;var e=Cu,t=Au;Au=0;var n=Ae(xu),r=O.T,i=L.p;try{L.p=32>n?32:n,O.T=null,n=Nu,Nu=null;var s=Cu,a=xu;if(Tu=0,Iu=Cu=null,xu=0,0!==(6&nu))throw Error(o(331));var l=nu;if(nu|=4,Xl(s.current),$l(s,s.current,a,n),nu=l,kc(0,!1),de&&"function"===typeof de.onPostCommitFiberRoot)try{de.onPostCommitFiberRoot(ce,s)}catch(u){}return!0}finally{L.p=i,O.T=r,oc(e,t)}}function uc(e,t,n){t=_r(n,t),null!==(e=ss(e,t=ka(e.stateNode,t,2),2))&&(Te(e,2),Ec(e))}function cc(e,t,n){if(3===e.tag)uc(e,e,n);else for(;null!==t;){if(3===t.tag){uc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===_u||!_u.has(r))){e=_r(n,e),null!==(r=ss(t,n=_a(2),2))&&(Ta(n,r,t,e),Te(r,2),Ec(r));break}}t=t.return}}function dc(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new tu;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(cu=!0,i.add(n),e=hc.bind(null,e,t,n),t.then(e,e))}function hc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,ru===e&&(su&n)===n&&(4===hu||3===hu&&(62914560&su)===su&&300>te()-Su?0===(2&nu)&&$u(e,0):gu|=n,vu===su&&(vu=0)),Ec(e)}function fc(e,t){0===t&&(t=ke()),null!==(e=Dr(e,t))&&(Te(e,t),Ec(e))}function pc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),fc(e,n)}function gc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(o(314))}null!==r&&r.delete(t),fc(e,n)}var mc=null,vc=null,yc=!1,bc=!1,wc=!1,Sc=0;function Ec(e){e!==vc&&null===e.next&&(null===vc?mc=vc=e:vc=vc.next=e),bc=!0,yc||(yc=!0,dd((function(){0!==(6&nu)?X(re,_c):Tc()})))}function kc(e,t){if(!wc&&bc){wc=!0;do{for(var n=!1,r=mc;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var s=0;else{var o=r.suspendedLanes,a=r.pingedLanes;s=(1<<31-fe(42|e)+1)-1,s=201326741&(s&=i&~(o&~a))?201326741&s|1:s?2|s:0}0!==s&&(n=!0,xc(r,s))}else s=su,0===(3&(s=be(r,r===ru?s:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||we(r,s)||(n=!0,xc(r,s));r=r.next}}while(n);wc=!1}}function _c(){Tc()}function Tc(){bc=yc=!1;var e=0;0!==Sc&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==ad&&(ad=e,!0);return ad=null,!1}()&&(e=Sc),Sc=0);for(var t=te(),n=null,r=mc;null!==r;){var i=r.next,s=Cc(r,t);0===s?(r.next=null,null===n?mc=i:n.next=i,null===i&&(vc=n)):(n=r,(0!==e||0!==(3&s))&&(bc=!0)),r=i}kc(e,!1)}function Cc(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var o=31-fe(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=Se(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}if(n=su,n=be(e,e===(t=ru)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===ou||9===ou)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&J(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||we(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&J(r),Ae(n)){case 2:case 8:n=ie;break;case 32:default:n=se;break;case 268435456:n=ae}return r=Ic.bind(null,e),n=X(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&J(r),e.callbackPriority=2,e.callbackNode=null,2}function Ic(e,t){if(0!==Tu&&5!==Tu)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(ac()&&e.callbackNode!==n)return null;var r=su;return 0===(r=be(e,e===ru?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Fu(e,r,t),Cc(e,te()),null!=e.callbackNode&&e.callbackNode===n?Ic.bind(null,e):null)}function xc(e,t){if(ac())return null;Fu(e,t,!0)}function Ac(){return 0===Sc&&(Sc=Ee()),Sc}function Nc(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:At(""+e)}function Dc(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Rc=0;Rc<Sr.length;Rc++){var Pc=Sr[Rc];Er(Pc.toLowerCase(),"on"+(Pc[0].toUpperCase()+Pc.slice(1)))}Er(fr,"onAnimationEnd"),Er(pr,"onAnimationIteration"),Er(gr,"onAnimationStart"),Er("dblclick","onDoubleClick"),Er("focusin","onFocus"),Er("focusout","onBlur"),Er(mr,"onTransitionRun"),Er(vr,"onTransitionStart"),Er(yr,"onTransitionCancel"),Er(br,"onTransitionEnd"),Qe("onMouseEnter",["mouseout","mouseover"]),Qe("onMouseLeave",["mouseout","mouseover"]),Qe("onPointerEnter",["pointerout","pointerover"]),Qe("onPointerLeave",["pointerout","pointerover"]),Ge("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ge("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ge("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ge("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ge("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ge("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lc=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Oc));function Mc(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;s=a,i.currentTarget=u;try{s(i)}catch(c){va(c)}i.currentTarget=null,s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;s=a,i.currentTarget=u;try{s(i)}catch(c){va(c)}i.currentTarget=null,s=l}}}}function Fc(e,t){var n=t[Le];void 0===n&&(n=t[Le]=new Set);var r=e+"__bubble";n.has(r)||(zc(t,e,2,!1),n.add(r))}function jc(e,t,n){var r=0;t&&(r|=4),zc(n,e,r,t)}var Uc="_reactListening"+Math.random().toString(36).slice(2);function Vc(e){if(!e[Uc]){e[Uc]=!0,We.forEach((function(t){"selectionchange"!==t&&(Lc.has(t)||jc(t,!1,e),jc(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Uc]||(t[Uc]=!0,jc("selectionchange",!1,t))}}function zc(e,t,n,r){switch(uh(t)){case 2:var i=rh;break;case 8:i=ih;break;default:i=sh}n=i.bind(null,t,n,e),i=void 0,!Ut||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Bc(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&o.stateNode.containerInfo===i)return;o=o.return}for(;null!==a;){if(null===(o=ze(a)))return;if(5===(u=o.tag)||6===u||26===u||27===u){r=s=o;continue e}a=a.parentNode}}r=r.return}Mt((function(){var r=s,i=Dt(n),o=[];e:{var a=wr.get(e);if(void 0!==a){var u=Zt,c=e;switch(e){case"keypress":if(0===Ht(n))break e;case"keydown":case"keyup":u=gn;break;case"focusin":c="focus",u=on;break;case"focusout":c="blur",u=on;break;case"beforeblur":case"afterblur":u=on;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=sn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=vn;break;case fr:case pr:case gr:u=an;break;case br:u=yn;break;case"scroll":case"scrollend":u=tn;break;case"wheel":u=bn;break;case"copy":case"cut":case"paste":u=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=mn;break;case"toggle":case"beforetoggle":u=wn}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),f=d?null!==a?a+"Capture":null:a;d=[];for(var p,g=r;null!==g;){var m=g;if(p=m.stateNode,5!==(m=m.tag)&&26!==m&&27!==m||null===p||null===f||null!=(m=Ft(g,f))&&d.push($c(g,m,p)),h)break;g=g.return}0<d.length&&(a=new u(a,c,null,n,i),o.push({event:a,listeners:d}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===Nt||!(c=n.relatedTarget||n.fromElement)||!ze(c)&&!c[Oe])&&(u||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?ze(c):null)&&(h=l(c),d=c.tag,c!==h||5!==d&&27!==d&&6!==d)&&(c=null)):(u=null,c=r),u!==c)){if(d=rn,m="onMouseLeave",f="onMouseEnter",g="mouse","pointerout"!==e&&"pointerover"!==e||(d=mn,m="onPointerLeave",f="onPointerEnter",g="pointer"),h=null==u?a:$e(u),p=null==c?a:$e(c),(a=new d(m,g+"leave",u,n,i)).target=h,a.relatedTarget=p,m=null,ze(i)===r&&((d=new d(f,g+"enter",c,n,i)).target=p,d.relatedTarget=h,m=d),h=m,u&&c)e:{for(f=c,g=0,p=d=u;p;p=Hc(p))g++;for(p=0,m=f;m;m=Hc(m))p++;for(;0<g-p;)d=Hc(d),g--;for(;0<p-g;)f=Hc(f),p--;for(;g--;){if(d===f||null!==f&&d===f.alternate)break e;d=Hc(d),f=Hc(f)}d=null}else d=null;null!==u&&Wc(o,a,u,d,!1),null!==c&&null!==h&&Wc(o,h,c,d,!0)}if("select"===(u=(a=r?$e(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===u&&"file"===a.type)var v=jn;else if(Rn(a))if(Un)v=Gn;else{v=Wn;var y=Hn}else!(u=a.nodeName)||"input"!==u.toLowerCase()||"checkbox"!==a.type&&"radio"!==a.type?r&&Ct(r.elementType)&&(v=jn):v=Kn;switch(v&&(v=v(e,r))?Pn(o,v,n,i):(y&&y(e,a,r),"focusout"===e&&r&&"number"===a.type&&null!=r.memoizedProps.value&&yt(a,"number",a.value)),y=r?$e(r):window,e){case"focusin":(Rn(y)||"true"===y.contentEditable)&&(rr=y,ir=r,sr=null);break;case"focusout":sr=ir=rr=null;break;case"mousedown":or=!0;break;case"contextmenu":case"mouseup":case"dragend":or=!1,ar(o,n,i);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":ar(o,n,i)}var b;if(En)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Nn?xn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Tn&&"ko"!==n.locale&&(Nn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Nn&&(b=qt()):(Bt="value"in(zt=i)?zt.value:zt.textContent,Nn=!0)),0<(y=qc(r,w)).length&&(w=new un(w,e,null,n,i),o.push({event:w,listeners:y}),b?w.data=b:null!==(b=An(n))&&(w.data=b))),(b=_n?function(e,t){switch(e){case"compositionend":return An(t);case"keypress":return 32!==t.which?null:(In=!0,Cn);case"textInput":return(e=t.data)===Cn&&In?null:e;default:return null}}(e,n):function(e,t){if(Nn)return"compositionend"===e||!En&&xn(e,t)?(e=qt(),$t=Bt=zt=null,Nn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Tn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=qc(r,"onBeforeInput")).length&&(y=new un("onBeforeInput","beforeinput",null,n,i),o.push({event:y,listeners:w}),y.data=b)),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var s=Nc((i[Pe]||null).action),o=r.submitter;o&&null!==(t=(t=o[Pe]||null)?Nc(t.formAction):o.getAttribute("formAction"))&&(s=t,o=null);var a=new Zt("action","action",null,r,i);e.push({event:a,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Sc){var e=o?Dc(i,o):new FormData(i);Do(n,{pending:!0,data:e,method:i.method,action:s},null,e)}}else"function"===typeof s&&(a.preventDefault(),e=o?Dc(i,o):new FormData(i),Do(n,{pending:!0,data:e,method:i.method,action:s},s,e))},currentTarget:i}]})}}(o,e,r,n,i)}Mc(o,t)}))}function $c(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qc(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===s||(null!=(i=Ft(e,n))&&r.unshift($c(e,i,s)),null!=(i=Ft(e,t))&&r.push($c(e,i,s))),3===e.tag)return r;e=e.return}return[]}function Hc(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Wc(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(a=a.tag,null!==l&&l===r)break;5!==a&&26!==a&&27!==a||null===u||(l=u,i?null!=(u=Ft(n,s))&&o.unshift($c(n,u,l)):i||null!=(u=Ft(n,s))&&o.push($c(n,u,l))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Kc=/\r\n?/g,Gc=/\u0000|\uFFFD/g;function Qc(e){return("string"===typeof e?e:""+e).replace(Kc,"\n").replace(Gc,"")}function Yc(e,t){return t=Qc(t),Qc(e)===t}function Xc(){}function Jc(e,t,n,r,i,s){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||Et(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&Et(e,""+r);break;case"className":nt(e,"class",r);break;case"tabIndex":nt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,r);break;case"style":Tt(e,r,s);break;case"data":if("object"!==t){nt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=At(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof s&&("formAction"===n?("input"!==t&&Jc(e,t,"name",i.name,i,null),Jc(e,t,"formEncType",i.formEncType,i,null),Jc(e,t,"formMethod",i.formMethod,i,null),Jc(e,t,"formTarget",i.formTarget,i,null)):(Jc(e,t,"encType",i.encType,i,null),Jc(e,t,"method",i.method,i,null),Jc(e,t,"target",i.target,i,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=At(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Xc);break;case"onScroll":null!=r&&Fc("scroll",e);break;case"onScrollEnd":null!=r&&Fc("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(o(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=At(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Fc("beforetoggle",e),Fc("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=It.get(n)||n,r)}}function Zc(e,t,n,r,i,s){switch(n){case"style":Tt(e,r,s);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(o(60));e.innerHTML=n}}break;case"children":"string"===typeof r?Et(e,r):("number"===typeof r||"bigint"===typeof r)&&Et(e,""+r);break;case"onScroll":null!=r&&Fc("scroll",e);break;case"onScrollEnd":null!=r&&Fc("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Xc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ke.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"===typeof(s=null!=(s=e[Pe]||null)?s[n]:null)&&e.removeEventListener(t,s,i),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):tt(e,n,r):("function"!==typeof s&&null!==s&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i)))}}function ed(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fc("error",e),Fc("load",e);var r,i=!1,s=!1;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(null!=a)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Jc(e,t,r,a,n,null)}}return s&&Jc(e,t,"srcSet",n.srcSet,n,null),void(i&&Jc(e,t,"src",n.src,n,null));case"input":Fc("invalid",e);var l=r=a=s=null,u=null,c=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(null!=d)switch(i){case"name":s=d;break;case"type":a=d;break;case"checked":u=d;break;case"defaultChecked":c=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(o(137,t));break;default:Jc(e,t,i,d,n,null)}}return vt(e,r,l,u,c,a,s,!1),void dt(e);case"select":for(s in Fc("invalid",e),i=a=r=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":r=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:Jc(e,t,s,l,n,null)}return t=r,n=a,e.multiple=!!i,void(null!=t?bt(e,!!i,t,!1):null!=n&&bt(e,!!i,n,!0));case"textarea":for(a in Fc("invalid",e),r=s=i=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":i=l;break;case"defaultValue":s=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(o(91));break;default:Jc(e,t,a,l,n,null)}return St(e,i,s,r),void dt(e);case"option":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))if("selected"===u)e.selected=i&&"function"!==typeof i&&"symbol"!==typeof i;else Jc(e,t,u,i,n,null);return;case"dialog":Fc("beforetoggle",e),Fc("toggle",e),Fc("cancel",e),Fc("close",e);break;case"iframe":case"object":Fc("load",e);break;case"video":case"audio":for(i=0;i<Oc.length;i++)Fc(Oc[i],e);break;case"image":Fc("error",e),Fc("load",e);break;case"details":Fc("toggle",e);break;case"embed":case"source":case"link":Fc("error",e),Fc("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Jc(e,t,c,i,n,null)}return;default:if(Ct(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(i=n[d])&&Zc(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(i=n[l])&&Jc(e,t,l,i,n,null))}var td=null,nd=null;function rd(e){return 9===e.nodeType?e:e.ownerDocument}function id(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sd(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function od(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ad=null;var ld="function"===typeof setTimeout?setTimeout:void 0,ud="function"===typeof clearTimeout?clearTimeout:void 0,cd="function"===typeof Promise?Promise:void 0,dd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof cd?function(e){return cd.resolve(null).then(e).catch(hd)}:ld;function hd(e){setTimeout((function(){throw e}))}function fd(e){return"head"===e}function pd(e,t){var n=t,r=0,i=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0<r&&8>r){n=r;var o=e.ownerDocument;if(1&n&&Sd(o.documentElement),2&n&&Sd(o.body),4&n)for(Sd(n=o.head),o=n.firstChild;o;){var a=o.nextSibling,l=o.nodeName;o[Ue]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===o.rel.toLowerCase()||n.removeChild(o),o=a}}if(0===i)return e.removeChild(s),void Ih(t);i--}else"$"===n||"$?"===n||"$!"===n?i++:r=n.charCodeAt(0)-48;else r=0;n=s}while(n);Ih(t)}function gd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":gd(n),Ve(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function md(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function vd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var yd=null;function bd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function wd(e,t,n){switch(t=rd(n),e){case"html":if(!(e=t.documentElement))throw Error(o(452));return e;case"head":if(!(e=t.head))throw Error(o(453));return e;case"body":if(!(e=t.body))throw Error(o(454));return e;default:throw Error(o(451))}}function Sd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ve(e)}var Ed=new Map,kd=new Set;function _d(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Td=L.d;L.d={f:function(){var e=Td.f(),t=zu();return e||t},r:function(e){var t=Be(e);null!==t&&5===t.tag&&"form"===t.type?Po(t):Td.r(e)},D:function(e){Td.D(e),Id("dns-prefetch",e,null)},C:function(e,t){Td.C(e,t),Id("preconnect",e,t)},L:function(e,t,n){Td.L(e,t,n);var r=Cd;if(r&&e&&t){var i='link[rel="preload"][as="'+gt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+gt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(i+='[imagesizes="'+gt(n.imageSizes)+'"]')):i+='[href="'+gt(e)+'"]';var s=i;switch(t){case"style":s=Ad(e);break;case"script":s=Rd(e)}Ed.has(s)||(e=h({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Ed.set(s,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(Nd(s))||"script"===t&&r.querySelector(Pd(s))||(ed(t=r.createElement("link"),"link",e),He(t),r.head.appendChild(t)))}},m:function(e,t){Td.m(e,t);var n=Cd;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+gt(r)+'"][href="'+gt(e)+'"]',s=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Rd(e)}if(!Ed.has(s)&&(e=h({rel:"modulepreload",href:e},t),Ed.set(s,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Pd(s)))return}ed(r=n.createElement("link"),"link",e),He(r),n.head.appendChild(r)}}},X:function(e,t){Td.X(e,t);var n=Cd;if(n&&e){var r=qe(n).hoistableScripts,i=Rd(e),s=r.get(i);s||((s=n.querySelector(Pd(i)))||(e=h({src:e,async:!0},t),(t=Ed.get(i))&&Fd(e,t),He(s=n.createElement("script")),ed(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}},S:function(e,t,n){Td.S(e,t,n);var r=Cd;if(r&&e){var i=qe(r).hoistableStyles,s=Ad(e);t=t||"default";var o=i.get(s);if(!o){var a={loading:0,preload:null};if(o=r.querySelector(Nd(s)))a.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Ed.get(s))&&Md(e,n);var l=o=r.createElement("link");He(l),ed(l,"link",e),l._p=new Promise((function(e,t){l.onload=e,l.onerror=t})),l.addEventListener("load",(function(){a.loading|=1})),l.addEventListener("error",(function(){a.loading|=2})),a.loading|=4,Ld(o,t,r)}o={type:"stylesheet",instance:o,count:1,state:a},i.set(s,o)}}},M:function(e,t){Td.M(e,t);var n=Cd;if(n&&e){var r=qe(n).hoistableScripts,i=Rd(e),s=r.get(i);s||((s=n.querySelector(Pd(i)))||(e=h({src:e,async:!0,type:"module"},t),(t=Ed.get(i))&&Fd(e,t),He(s=n.createElement("script")),ed(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}}};var Cd="undefined"===typeof document?null:document;function Id(e,t,n){var r=Cd;if(r&&"string"===typeof t&&t){var i=gt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"===typeof n&&(i+='[crossorigin="'+n+'"]'),kd.has(i)||(kd.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(ed(t=r.createElement("link"),"link",e),He(t),r.head.appendChild(t)))}}function xd(e,t,n,r){var i,s,a,l,u=(u=q.current)?_d(u):null;if(!u)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Ad(n.href),(r=(n=qe(u).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Ad(n.href);var c=qe(u).hoistableStyles,d=c.get(e);if(d||(u=u.ownerDocument||u,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,d),(c=u.querySelector(Nd(e)))&&!c._p&&(d.instance=c,d.state.loading=5),Ed.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Ed.set(e,n),c||(i=u,s=e,a=n,l=d.state,i.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=i.createElement("link"),l.preload=s,s.addEventListener("load",(function(){return l.loading|=1})),s.addEventListener("error",(function(){return l.loading|=2})),ed(s,"link",a),He(s),i.head.appendChild(s))))),t&&null===r)throw Error(o(528,""));return d}if(t&&null!==r)throw Error(o(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Rd(n),(r=(n=qe(u).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Ad(e){return'href="'+gt(e)+'"'}function Nd(e){return'link[rel="stylesheet"]['+e+"]"}function Dd(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Rd(e){return'[src="'+gt(e)+'"]'}function Pd(e){return"script[async]"+e}function Od(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+gt(n.href)+'"]');if(r)return t.instance=r,He(r),r;var i=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return He(r=(e.ownerDocument||e).createElement("style")),ed(r,"style",i),Ld(r,n.precedence,e),t.instance=r;case"stylesheet":i=Ad(n.href);var s=e.querySelector(Nd(i));if(s)return t.state.loading|=4,t.instance=s,He(s),s;r=Dd(n),(i=Ed.get(i))&&Md(r,i),He(s=(e.ownerDocument||e).createElement("link"));var a=s;return a._p=new Promise((function(e,t){a.onload=e,a.onerror=t})),ed(s,"link",r),t.state.loading|=4,Ld(s,n.precedence,e),t.instance=s;case"script":return s=Rd(n.src),(i=e.querySelector(Pd(s)))?(t.instance=i,He(i),i):(r=n,(i=Ed.get(s))&&Fd(r=h({},n),i),He(i=(e=e.ownerDocument||e).createElement("script")),ed(i,"link",r),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(o(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Ld(r,n.precedence,e));return t.instance}function Ld(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,s=i,o=0;o<r.length;o++){var a=r[o];if(a.dataset.precedence===t)s=a;else if(s!==i)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Md(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Fd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var jd=null;function Ud(e,t,n){if(null===jd){var r=new Map,i=jd=new Map;i.set(n,r)}else(r=(i=jd).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var s=n[i];if(!(s[Ue]||s[Re]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var o=s.getAttribute(t)||"";o=e+o;var a=r.get(o);a?a.push(s):r.set(o,[s])}}return r}function Vd(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function zd(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Bd=null;function $d(){}function qd(){if(this.count--,0===this.count)if(this.stylesheets)Wd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Hd=null;function Wd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Hd=new Map,t.forEach(Kd,e),Hd=null,qd.call(e))}function Kd(e,t){if(!(4&t.state.loading)){var n=Hd.get(e);if(n)var r=n.get(null);else{n=new Map,Hd.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<i.length;s++){var o=i[s];"LINK"!==o.nodeName&&"not all"===o.getAttribute("media")||(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}o=(i=t.instance).getAttribute("data-precedence"),(s=n.get(o)||r)===r&&n.set(null,i),n.set(o,i),this.count++,r=qd.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),s?s.parentNode.insertBefore(i,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var Gd={$$typeof:S,Provider:null,Consumer:null,_currentValue:M,_currentValue2:M,_threadCount:0};function Qd(e,t,n,r,i,s,o,a){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_e(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_e(0),this.hiddenUpdates=_e(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=s,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=a,this.incompleteTransitions=new Map}function Yd(e,t,n,r,i,s,o,a,l,u,c,d){return e=new Qd(e,t,n,o,a,l,u,d),t=1,!0===s&&(t|=24),s=Mr(3,null,null,t),e.current=s,s.stateNode=e,(t=Pi()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:r,isDehydrated:n,cache:t},ns(s),e}function Xd(e){return e?e=Or:Or}function Jd(e,t,n,r,i,s){i=Xd(i),null===r.context?r.context=i:r.pendingContext=i,(r=is(t)).payload={element:n},null!==(s=void 0===s?null:s)&&(r.callback=s),null!==(n=ss(e,r,t))&&(Mu(n,0,t),os(n,e,t))}function Zd(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function eh(e,t){Zd(e,t),(e=e.alternate)&&Zd(e,t)}function th(e){if(13===e.tag){var t=Dr(e,67108864);null!==t&&Mu(t,0,67108864),eh(e,67108864)}}var nh=!0;function rh(e,t,n,r){var i=O.T;O.T=null;var s=L.p;try{L.p=2,sh(e,t,n,r)}finally{L.p=s,O.T=i}}function ih(e,t,n,r){var i=O.T;O.T=null;var s=L.p;try{L.p=8,sh(e,t,n,r)}finally{L.p=s,O.T=i}}function sh(e,t,n,r){if(nh){var i=oh(r);if(null===i)Bc(e,t,r,ah,n),yh(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return dh=bh(dh,e,t,n,r,i),!0;case"dragenter":return hh=bh(hh,e,t,n,r,i),!0;case"mouseover":return fh=bh(fh,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return ph.set(s,bh(ph.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,gh.set(s,bh(gh.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(yh(e,r),4&t&&-1<vh.indexOf(e)){for(;null!==i;){var s=Be(i);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var o=ye(s.pendingLanes);if(0!==o){var a=s;for(a.pendingLanes|=2,a.entangledLanes|=2;o;){var l=1<<31-fe(o);a.entanglements[1]|=l,o&=~l}Ec(s),0===(6&nu)&&(Eu=te()+500,kc(0,!1))}}break;case 13:null!==(a=Dr(s,2))&&Mu(a,0,2),zu(),eh(s,2)}if(null===(s=oh(r))&&Bc(e,t,r,ah,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Bc(e,t,r,null,n)}}function oh(e){return lh(e=Dt(e))}var ah=null;function lh(e){if(ah=null,null!==(e=ze(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=u(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ah=e,null}function uh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case re:return 2;case ie:return 8;case se:case oe:return 32;case ae:return 268435456;default:return 32}default:return 32}}var ch=!1,dh=null,hh=null,fh=null,ph=new Map,gh=new Map,mh=[],vh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yh(e,t){switch(e){case"focusin":case"focusout":dh=null;break;case"dragenter":case"dragleave":hh=null;break;case"mouseover":case"mouseout":fh=null;break;case"pointerover":case"pointerout":ph.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gh.delete(t.pointerId)}}function bh(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=Be(t))&&th(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function wh(e){var t=ze(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=u(n)))return e.blockedOn=t,void function(e,t){var n=L.p;try{return L.p=e,t()}finally{L.p=n}}(e.priority,(function(){if(13===n.tag){var e=Ou();e=xe(e);var t=Dr(n,e);null!==t&&Mu(t,0,e),eh(n,e)}}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Sh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=oh(e.nativeEvent);if(null!==n)return null!==(t=Be(n))&&th(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Nt=r,n.target.dispatchEvent(r),Nt=null,t.shift()}return!0}function Eh(e,t,n){Sh(e)&&n.delete(t)}function kh(){ch=!1,null!==dh&&Sh(dh)&&(dh=null),null!==hh&&Sh(hh)&&(hh=null),null!==fh&&Sh(fh)&&(fh=null),ph.forEach(Eh),gh.forEach(Eh)}function _h(e,t){e.blockedOn===t&&(e.blockedOn=null,ch||(ch=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,kh)))}var Th=null;function Ch(e){Th!==e&&(Th=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,(function(){Th===e&&(Th=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!==typeof r){if(null===lh(r||n))continue;break}var s=Be(n);null!==s&&(e.splice(t,3),t-=3,Do(s,{pending:!0,data:i,method:n.method,action:r},r,i))}})))}function Ih(e){function t(t){return _h(t,e)}null!==dh&&_h(dh,e),null!==hh&&_h(hh,e),null!==fh&&_h(fh,e),ph.forEach(t),gh.forEach(t);for(var n=0;n<mh.length;n++){var r=mh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<mh.length&&null===(n=mh[0]).blockedOn;)wh(n),null===n.blockedOn&&mh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],s=n[r+1],o=i[Pe]||null;if("function"===typeof s)o||Ch(n);else if(o){var a=null;if(s&&s.hasAttribute("formAction")){if(i=s,o=s[Pe]||null)a=o.formAction;else if(null!==lh(i))continue}else a=o.action;"function"===typeof a?n[r+1]=a:(n.splice(r,3),r-=3),Ch(n)}}}function xh(e){this._internalRoot=e}function Ah(e){this._internalRoot=e}Ah.prototype.render=xh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Jd(t.current,Ou(),e,t,null,null)},Ah.prototype.unmount=xh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Jd(e.current,2,null,e,null,null),zu(),t[Oe]=null}},Ah.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ne();e={blockedOn:null,target:e,priority:t};for(var n=0;n<mh.length&&0!==t&&t<mh[n].priority;n++);mh.splice(n,0,e),0===n&&wh(e)}};var Nh=i.version;if("19.1.0"!==Nh)throw Error(o(527,Nh,"19.1.0"));L.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return c(i),e;if(s===r)return c(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,u=i.child;u;){if(u===n){a=!0,n=i,r=s;break}if(u===r){a=!0,r=i,n=s;break}u=u.sibling}if(!a){for(u=s.child;u;){if(u===n){a=!0,n=s,r=i;break}if(u===r){a=!0,r=s,n=i;break}u=u.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Dh={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.1.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Rh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rh.isDisabled&&Rh.supportsFiber)try{ce=Rh.inject(Dh),de=Rh}catch(Oh){}}t.createRoot=function(e,t){if(!a(e))throw Error(o(299));var n=!1,r="",i=ya,s=ba,l=wa;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Yd(e,1,!1,null,0,n,r,i,s,l,0,null),e[Oe]=t.current,Vc(e),new xh(t)},t.hydrateRoot=function(e,t,n){if(!a(e))throw Error(o(299));var r=!1,i="",s=ya,l=ba,u=wa,c=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(s=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(u=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(c=n.formState)),(t=Yd(e,1,!0,t,0,r,i,s,l,u,0,c)).context=Xd(null),n=t.current,(i=is(r=xe(r=Ou()))).callback=null,ss(n,i,r),n=r,t.current.lanes=n,Te(t,n),Ec(t),e[Oe]=t.current,Vc(e),new Ah(t)},t.version="19.1.0"},7936:(e,t,n)=>{var r=n(8613),i=n.n(r),s=n(4391);const o=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,u=t>>2,c=(3&t)<<4|o>>4;let d=(15&o)<<2|l>>6,h=63&l;a||(h=64,s||(d=64)),r.push(n[u],n[c],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(o(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new l;const u=t<<2|s>>4;if(r.push(u),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class l extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const u=function(e){return function(e){const t=o(e);return a.encodeByteArray(t,!0)}(e).replace(/\./g,"")},c=function(e){try{return a.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const d=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,h=()=>{try{return d()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyCC6x0MS2KOTIZtZUYh59KdsBos1fasNtA",REACT_APP_FIREBASE_APP_ID:"1:201098929511:web:a257c60dd4d6b4d2ab7bc2",REACT_APP_FIREBASE_AUTH_DOMAIN:"hubalm.firebaseapp.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"201098929511",REACT_APP_FIREBASE_PROJECT_ID:"hubalm",REACT_APP_FIREBASE_STORAGE_BUCKET:"hubalm.firebasestorage.app"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&c(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},f=e=>{var t,n;return null===(n=null===(t=h())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},p=()=>{var e;return null===(e=h())||void 0===e?void 0:e.config},g=e=>{var t;return null===(t=h())||void 0===t?void 0:t[`_${e}`]};class m{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function v(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function y(){return!function(){var e;const t=null===(e=h())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function b(){try{return"object"===typeof indexedDB}catch(e){return!1}}class w extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,w.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,S.prototype.create)}}class S{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(E,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(r,t):"Error",s=`${this.serviceName}: ${i} (${n}).`;return new w(n,s,t)}}const E=/\{\$([^}]+)}/g;function k(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(_(n)&&_(s)){if(!k(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function _(e){return null!==e&&"object"===typeof e}function T(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function C(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function I(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class x{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=A),void 0===r.error&&(r.error=A),void 0===r.complete&&(r.complete=A);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function A(){}function N(e){return e&&e._delegate?e._delegate:e}class D{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const R="[DEFAULT]";class P{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new m;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:R})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===R?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R;return this.component?this.component.multipleInstances?e:R:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class O{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new P(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const L=[];var M;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(M||(M={}));const F={debug:M.DEBUG,verbose:M.VERBOSE,info:M.INFO,warn:M.WARN,error:M.ERROR,silent:M.SILENT},j=M.INFO,U={[M.DEBUG]:"log",[M.VERBOSE]:"log",[M.INFO]:"info",[M.WARN]:"warn",[M.ERROR]:"error"},V=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=U[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r](`[${n}]  ${e.name}:`,...s)};class z{constructor(e){this.name=e,this._logLevel=j,this._logHandler=V,this._userLogHandler=null,L.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in M))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?F[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,M.DEBUG,...t),this._logHandler(this,M.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,M.VERBOSE,...t),this._logHandler(this,M.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,M.INFO,...t),this._logHandler(this,M.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,M.WARN,...t),this._logHandler(this,M.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,M.ERROR,...t),this._logHandler(this,M.ERROR,...t)}}let B,$;const q=new WeakMap,H=new WeakMap,W=new WeakMap,K=new WeakMap,G=new WeakMap;let Q={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return H.get(e);if("objectStoreNames"===t)return e.objectStoreNames||W.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return J(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Y(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?($||($=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Z(this),n),J(q.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return J(e.apply(Z(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(Z(this),t,...r);return W.set(s,t.sort?t.sort():[t]),J(s)}}function X(e){return"function"===typeof e?Y(e):(e instanceof IDBTransaction&&function(e){if(H.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));H.set(e,t)}(e),t=e,(B||(B=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,Q):e);var t}function J(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(J(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&q.set(t,e)})).catch((()=>{})),G.set(t,e),t}(e);if(K.has(e))return K.get(e);const t=X(e);return t!==e&&(K.set(e,t),G.set(t,e)),t}const Z=e=>G.get(e);const ee=["get","getKey","getAll","getAllKeys","count"],te=["put","add","delete","clear"],ne=new Map;function re(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(ne.get(t))return ne.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=te.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!ee.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return ne.set(t,s),s}Q=(e=>({...e,get:(t,n,r)=>re(t,n)||e.get(t,n,r),has:(t,n)=>!!re(t,n)||e.has(t,n)}))(Q);class ie{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const se="@firebase/app",oe="0.11.4",ae=new z("@firebase/app"),le="@firebase/app-compat",ue="@firebase/analytics-compat",ce="@firebase/analytics",de="@firebase/app-check-compat",he="@firebase/app-check",fe="@firebase/auth",pe="@firebase/auth-compat",ge="@firebase/database",me="@firebase/data-connect",ve="@firebase/database-compat",ye="@firebase/functions",be="@firebase/functions-compat",we="@firebase/installations",Se="@firebase/installations-compat",Ee="@firebase/messaging",ke="@firebase/messaging-compat",_e="@firebase/performance",Te="@firebase/performance-compat",Ce="@firebase/remote-config",Ie="@firebase/remote-config-compat",xe="@firebase/storage",Ae="@firebase/storage-compat",Ne="@firebase/firestore",De="@firebase/vertexai",Re="@firebase/firestore-compat",Pe="firebase",Oe="[DEFAULT]",Le={[se]:"fire-core",[le]:"fire-core-compat",[ce]:"fire-analytics",[ue]:"fire-analytics-compat",[he]:"fire-app-check",[de]:"fire-app-check-compat",[fe]:"fire-auth",[pe]:"fire-auth-compat",[ge]:"fire-rtdb",[me]:"fire-data-connect",[ve]:"fire-rtdb-compat",[ye]:"fire-fn",[be]:"fire-fn-compat",[we]:"fire-iid",[Se]:"fire-iid-compat",[Ee]:"fire-fcm",[ke]:"fire-fcm-compat",[_e]:"fire-perf",[Te]:"fire-perf-compat",[Ce]:"fire-rc",[Ie]:"fire-rc-compat",[xe]:"fire-gcs",[Ae]:"fire-gcs-compat",[Ne]:"fire-fst",[Re]:"fire-fst-compat",[De]:"fire-vertex","fire-js":"fire-js",[Pe]:"fire-js-all"},Me=new Map,Fe=new Map,je=new Map;function Ue(e,t){try{e.container.addComponent(t)}catch(n){ae.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Ve(e){const t=e.name;if(je.has(t))return ae.debug(`There were multiple attempts to register component ${t}.`),!1;je.set(t,e);for(const n of Me.values())Ue(n,e);for(const n of Fe.values())Ue(n,e);return!0}function ze(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Be(e){return null!==e&&void 0!==e&&void 0!==e.settings}const $e=new S("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class qe{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new D("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $e.create("app-deleted",{appName:this._name})}}const He="11.6.0";function We(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Oe,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw $e.create("bad-app-name",{appName:String(i)});if(n||(n=p()),!n)throw $e.create("no-options");const s=Me.get(i);if(s){if(k(n,s.options)&&k(r,s.config))return s;throw $e.create("duplicate-app",{appName:i})}const o=new O(i);for(const l of je.values())o.addComponent(l);const a=new qe(n,r,o);return Me.set(i,a),a}function Ke(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe;const t=Me.get(e);if(!t&&e===Oe&&p())return We();if(!t)throw $e.create("no-app",{appName:e});return t}function Ge(e,t,n){var r;let i=null!==(r=Le[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void ae.warn(e.join(" "))}Ve(new D(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}const Qe="firebase-heartbeat-store";let Ye=null;function Xe(){return Ye||(Ye=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=J(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(J(o.result),e.oldVersion,e.newVersion,J(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Qe)}catch(n){console.warn(n)}}}).catch((e=>{throw $e.create("idb-open",{originalErrorMessage:e.message})}))),Ye}async function Je(e,t){try{const n=(await Xe()).transaction(Qe,"readwrite"),r=n.objectStore(Qe);await r.put(t,Ze(e)),await n.done}catch(n){if(n instanceof w)ae.warn(n.message);else{const e=$e.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});ae.warn(e.message)}}}function Ze(e){return`${e.name}!${e.options.appId}`}class et{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new nt(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=tt();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){ae.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=tt(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),rt(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),rt(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=u(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return ae.warn(t),""}}}function tt(){return(new Date).toISOString().substring(0,10)}class nt{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!b()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Xe()).transaction(Qe),n=await t.objectStore(Qe).get(Ze(e));return await t.done,n}catch(t){if(t instanceof w)ae.warn(t.message);else{const e=$e.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});ae.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Je(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Je(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function rt(e){return u(JSON.stringify({version:2,heartbeats:e})).length}var it;it="",Ve(new D("platform-logger",(e=>new ie(e)),"PRIVATE")),Ve(new D("heartbeat",(e=>new et(e)),"PRIVATE")),Ge(se,oe,it),Ge(se,oe,"esm2017"),Ge("fire-js","");Ge("firebase","11.6.0","app");function st(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function ot(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const at=ot,lt=new S("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ut=new z("@firebase/auth");function ct(e){if(ut.logLevel<=M.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ut.error(`Auth (${He}): ${e}`,...n)}}function dt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw gt(e,...n)}function ht(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return gt(e,...n)}function ft(e,t,n){const r=Object.assign(Object.assign({},at()),{[t]:n});return new S("auth","Firebase",r).create(t,{appName:e.name})}function pt(e){return ft(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return lt.create(e,...n)}function mt(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw gt(t,...r)}}function vt(e){const t="INTERNAL ASSERTION FAILED: "+e;throw ct(t),new Error(t)}function yt(e,t){e||vt(t)}function bt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function wt(){return"http:"===St()||"https:"===St()}function St(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Et(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(wt()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class kt{constructor(e,t){this.shortDelay=e,this.longDelay=t,yt(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(v())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Et()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function _t(e,t){yt(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Tt{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void vt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void vt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void vt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ct={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},It=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],xt=new kt(3e4,6e4);function At(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Nt(e,t,n,r){return Dt(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=T(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:a},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),Tt.fetch()(await Pt(e,e.config.apiHost,n,o),l)}))}async function Dt(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Ct),t);try{const t=new Lt(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Mt(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Mt(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Mt(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Mt(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw ft(e,a,o);dt(e,a)}}catch(i){if(i instanceof w)throw i;dt(e,"network-request-failed",{message:String(i)})}}async function Rt(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Nt(e,t,n,r,i);return"mfaPendingCredential"in s&&dt(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function Pt(e,t,n,r){const i=`${t}${n}?${r}`,s=e,o=s.config.emulator?_t(e.config,i):`${e.config.apiScheme}://${i}`;if(It.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(o).toString()}return o}function Ot(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Lt{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(ht(this.auth,"network-request-failed"))),xt.get())}))}}function Mt(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ht(e,t,r);return i.customData._tokenResponse=n,i}function Ft(e){return void 0!==e&&void 0!==e.enterprise}class jt{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Ot(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Ut(e,t){return Nt(e,"GET","/v2/recaptchaConfig",At(e,t))}async function Vt(e,t){return Nt(e,"POST","/v1/accounts:lookup",t)}function zt(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function Bt(e){return 1e3*Number(e)}function $t(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return ct("JWT malformed, contained fewer than 3 sections"),null;try{const e=c(n);return e?JSON.parse(e):(ct("Failed to decode base64 JWT payload"),null)}catch(i){return ct("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function qt(e){const t=$t(e);return mt(t,"internal-error"),mt("undefined"!==typeof t.exp,"internal-error"),mt("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Ht(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof w&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class Wt{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null===e||void 0===e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}class Kt{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=zt(this.lastLoginAt),this.creationTime=zt(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Gt(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Ht(e,Vt(n,{idToken:r}));mt(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?Qt(s.providerUserInfo):[],a=(l=e.providerData,u=o,[...l.filter((e=>!u.some((t=>t.providerId===e.providerId)))),...u]);var l,u;const c=e.isAnonymous,d=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),h=!!c&&d,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Kt(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function Qt(e){return e.map((e=>{var{providerId:t}=e,n=st(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class Yt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){mt(e.idToken,"internal-error"),mt("undefined"!==typeof e.idToken,"internal-error"),mt("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):qt(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){mt(0!==e.length,"internal-error");const t=qt(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(mt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Dt(e,{},(async()=>{const n=T({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=await Pt(e,r,"/v1/token",`key=${i}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Tt.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Yt;return n&&(mt("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(mt("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(mt("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Yt,this.toJSON())}_performRefresh(){return vt("not implemented")}}function Xt(e,t){mt("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Jt{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=st(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Wt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Kt(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Ht(this,this.stsTokenManager.getToken(this.auth,e));return mt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=N(e),r=await n.getIdToken(t),i=$t(r);mt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:zt(Bt(i.auth_time)),issuedAtTime:zt(Bt(i.iat)),expirationTime:zt(Bt(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=N(e);await Gt(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(mt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Jt(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){mt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Gt(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Be(this.auth.app))return Promise.reject(pt(this.auth));const e=await this.getIdToken();return await Ht(this,async function(e,t){return Nt(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,u;const c=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:y,emailVerified:b,isAnonymous:w,providerData:S,stsTokenManager:E}=t;mt(y&&E,e,"internal-error");const k=Yt.fromJSON(this.name,E);mt("string"===typeof y,e,"internal-error"),Xt(c,e.name),Xt(d,e.name),mt("boolean"===typeof b,e,"internal-error"),mt("boolean"===typeof w,e,"internal-error"),Xt(h,e.name),Xt(f,e.name),Xt(p,e.name),Xt(g,e.name),Xt(m,e.name),Xt(v,e.name);const _=new Jt({uid:y,auth:e,email:d,emailVerified:b,displayName:c,isAnonymous:w,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:k,createdAt:m,lastLoginAt:v});return S&&Array.isArray(S)&&(_.providerData=S.map((e=>Object.assign({},e)))),g&&(_._redirectEventId=g),_}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Yt;r.updateFromServerResponse(t);const i=new Jt({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Gt(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];mt(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?Qt(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),o=new Yt;o.updateFromIdToken(n);const a=new Jt({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Kt(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,l),a}}const Zt=new Map;function en(e){yt(e instanceof Function,"Expected a class definition");let t=Zt.get(e);return t?(yt(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Zt.set(e,t),t)}class tn{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}tn.type="NONE";const nn=tn;function rn(e,t,n){return`firebase:${e}:${t}:${n}`}class sn{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=rn(this.userKey,r.apiKey,i),this.fullPersistenceKey=rn("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await Vt(this.auth,{idToken:e}).catch((()=>{}));return t?Jt._fromGetAccountInfoResponse(this.auth,t,e):null}return Jt._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new sn(en(nn),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||en(nn);const s=rn(n,e.config.apiKey,e.name);let o=null;for(const u of t)try{const t=await u._get(s);if(t){let n;if("string"===typeof t){const r=await Vt(e,{idToken:t}).catch((()=>{}));if(!r)break;n=await Jt._fromGetAccountInfoResponse(e,r,t)}else n=Jt._fromJSON(e,t);u!==i&&(o=n),i=u;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new sn(i,e,n)):new sn(i,e,n)}}function on(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(cn(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(an(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(hn(t))return"Blackberry";if(fn(t))return"Webos";if(ln(t))return"Safari";if((t.includes("chrome/")||un(t))&&!t.includes("edge/"))return"Chrome";if(dn(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function an(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v();return/firefox\//i.test(e)}function ln(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:v()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function un(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v();return/crios\//i.test(e)}function cn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v();return/iemobile/i.test(e)}function dn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v();return/android/i.test(e)}function hn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v();return/blackberry/i.test(e)}function fn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v();return/webos/i.test(e)}function pn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function gn(){return function(){const e=v();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function mn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v();return pn(e)||dn(e)||fn(e)||hn(e)||/windows phone/i.test(e)||cn(e)}function vn(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=on(v());break;case"Worker":t=`${on(v())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${He}/${r}`}class yn{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(i){r(i)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class bn{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class wn{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new En(this),this.idTokenSubscription=new En(this),this.beforeStateQueue=new yn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise((e=>this._resolvePersistenceManagerAvailable=e))}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=en(t)),this._initializationPromise=this.queue((async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await sn.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(s){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Vt(this,{idToken:e}),n=await Jt._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Be(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(s)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return mt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Gt(e)}catch(t){if("auth/network-request-failed"!==(null===t||void 0===t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Be(this.app))return Promise.reject(pt(this));const t=e?N(e):null;return t&&mt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&mt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return Be(this.app)?Promise.reject(pt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Be(this.app)?Promise.reject(pt(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(en(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Nt(e,"GET","/v2/passwordPolicy",At(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new bn(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new S("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Nt(e,"POST","/v2/accounts:revokeToken",At(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&en(e)||this._popupRedirectResolver;mt(t,this,"argument-error"),this.redirectPersistenceManager=await sn.create(this,[en(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(mt(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return mt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(Be(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(ut.logLevel<=M.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ut.warn(`Auth (${He}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function Sn(e){return N(e)}class En{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new x(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return mt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let kn={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _n(e){return kn.loadJS(e)}function Tn(e){return`__${e}${Math.floor(1e6*Math.random())}`}class Cn{constructor(){this.enterprise=new In}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class In{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const xn="NO_RECAPTCHA";class An{constructor(e){this.type="recaptcha-enterprise",this.auth=Sn(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Ft(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n(xn)}))})):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Cn).execute("siteKey",{action:"verify"})}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Ut(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new jt(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&Ft(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=kn.recaptchaEnterpriseScript;0!==t.length&&(t+=i),_n(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function Nn(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new An(e);let o;if(i)o=xn;else try{o=await s.verify(n)}catch(l){o=await s.verify(n,!0)}const a=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Dn(e,t,n,r,i){var s,o;if("EMAIL_PASSWORD_PROVIDER"===i){if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Nn(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await Nn(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}if("PHONE_PROVIDER"===i){if(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.isProviderEnabled("PHONE_PROVIDER")){const i=await Nn(e,t,n);return r(e,i).catch((async i=>{var s;if("AUDIT"===(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&("auth/missing-recaptcha-token"===i.code||"auth/invalid-app-credential"===i.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const i=await Nn(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)}))}{const i=await Nn(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function Rn(e){const t=Sn(e),n=await Ut(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new jt(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new An(t).verify()}}function Pn(e,t,n){const r=Sn(e);mt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=On(t),{host:o,port:a}=function(e){const t=On(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Ln(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Ln(t)}}}(t),l={url:`${s}//${o}${null===a?"":`:${a}`}/`},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return mt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void mt(k(l,r.config.emulator)&&k(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function On(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ln(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Mn{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return vt("not implemented")}_getIdTokenResponse(e){return vt("not implemented")}_linkToIdToken(e,t){return vt("not implemented")}_getReauthenticationResolver(e){return vt("not implemented")}}async function Fn(e,t){return Nt(e,"POST","/v1/accounts:signUp",t)}async function jn(e,t){return Rt(e,"POST","/v1/accounts:signInWithPassword",At(e,t))}class Un extends Mn{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Un(e,t,"password")}static _fromEmailAndCode(e,t){return new Un(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Dn(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",jn,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Rt(e,"POST","/v1/accounts:signInWithEmailLink",At(e,t))}(e,{email:this._email,oobCode:this._password});default:dt(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Dn(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Fn,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Rt(e,"POST","/v1/accounts:signInWithEmailLink",At(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:dt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Vn(e,t){return Rt(e,"POST","/v1/accounts:signInWithIdp",At(e,t))}class zn extends Mn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new zn(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):dt("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=st(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new zn(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Vn(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Vn(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Vn(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=T(t)}return e}}async function Bn(e,t){return Nt(e,"POST","/v1/accounts:sendVerificationCode",At(e,t))}const $n={USER_NOT_FOUND:"user-not-found"};class qn extends Mn{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new qn({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new qn({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Rt(e,"POST","/v1/accounts:signInWithPhoneNumber",At(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Rt(e,"POST","/v1/accounts:signInWithPhoneNumber",At(e,t));if(n.temporaryProof)throw Mt(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Rt(e,"POST","/v1/accounts:signInWithPhoneNumber",At(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),$n)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new qn({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Hn{constructor(e){var t,n,r,i,s,o;const a=C(I(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,u=null!==(n=a.oobCode)&&void 0!==n?n:null,c=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);mt(l&&u&&c,"argument-error"),this.apiKey=l,this.operation=c,this.code=u,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=C(I(e)).link,n=t?C(I(t)).deep_link_id:null,r=C(I(e)).deep_link_id;return(r?C(I(r)).link:null)||r||n||t||e}(e);try{return new Hn(t)}catch(n){return null}}}class Wn{constructor(){this.providerId=Wn.PROVIDER_ID}static credential(e,t){return Un._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Hn.parseLink(t);return mt(n,"argument-error"),Un._fromEmailAndCode(e,n.code,n.tenantId)}}Wn.PROVIDER_ID="password",Wn.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Wn.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Kn{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Gn extends Kn{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Qn extends Gn{constructor(){super("facebook.com")}static credential(e){return zn._fromParams({providerId:Qn.PROVIDER_ID,signInMethod:Qn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qn.credentialFromTaggedObject(e)}static credentialFromError(e){return Qn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Qn.credential(t.oauthAccessToken)}catch(n){return null}}}Qn.FACEBOOK_SIGN_IN_METHOD="facebook.com",Qn.PROVIDER_ID="facebook.com";class Yn extends Gn{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return zn._fromParams({providerId:Yn.PROVIDER_ID,signInMethod:Yn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Yn.credentialFromTaggedObject(e)}static credentialFromError(e){return Yn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Yn.credential(n,r)}catch(i){return null}}}Yn.GOOGLE_SIGN_IN_METHOD="google.com",Yn.PROVIDER_ID="google.com";class Xn extends Gn{constructor(){super("github.com")}static credential(e){return zn._fromParams({providerId:Xn.PROVIDER_ID,signInMethod:Xn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xn.credentialFromTaggedObject(e)}static credentialFromError(e){return Xn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Xn.credential(t.oauthAccessToken)}catch(n){return null}}}Xn.GITHUB_SIGN_IN_METHOD="github.com",Xn.PROVIDER_ID="github.com";class Jn extends Gn{constructor(){super("twitter.com")}static credential(e,t){return zn._fromParams({providerId:Jn.PROVIDER_ID,signInMethod:Jn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Jn.credentialFromTaggedObject(e)}static credentialFromError(e){return Jn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Jn.credential(n,r)}catch(i){return null}}}Jn.TWITTER_SIGN_IN_METHOD="twitter.com",Jn.PROVIDER_ID="twitter.com";class Zn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Jt._fromIdTokenResponse(e,n,r),s=er(n);return new Zn({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=er(n);return new Zn({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function er(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class tr extends w{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,tr.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new tr(e,t,n,r)}}function nr(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw tr._fromErrorAndOperation(e,n,t,r);throw n}))}async function rr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Ht(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Zn._forOperation(e,"link",r)}async function ir(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Be(r.app))return Promise.reject(pt(r));const i="reauthenticate";try{const s=await Ht(e,nr(r,i,t,e),n);mt(s.idToken,r,"internal-error");const o=$t(s.idToken);mt(o,r,"internal-error");const{sub:a}=o;return mt(e.uid===a,r,"user-mismatch"),Zn._forOperation(e,i,s)}catch(s){throw"auth/user-not-found"===(null===s||void 0===s?void 0:s.code)&&dt(r,"user-mismatch"),s}}async function sr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Be(e.app))return Promise.reject(pt(e));const r="signIn",i=await nr(e,r,t),s=await Zn._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function or(e,t){return Nt(e,"POST","/v2/accounts/mfaEnrollment:start",At(e,t))}new WeakMap;const ar="__sak";class lr{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ar,"1"),this.storage.removeItem(ar),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class ur extends lr{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=mn(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);gn()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ur.type="LOCAL";const cr=ur;function dr(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp(`${r}=([^;]+)`);return null!==(n=null===(t=document.cookie.match(i))||void 0===t?void 0:t[1])&&void 0!==n?n:null}function hr(e){return`${"http:"===window.location.protocol?"__dev_":"__HOST-"}FIREBASE_${e.split(":")[3]}`}class fr{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=hr(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return dr(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=hr(e);document.cookie=`${t}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch((()=>{}))}_addListener(e,t){if(!this._isAvailable())return;const n=hr(e);if(window.cookieStore){const e=e=>{const r=e.changed.find((e=>e.name===n));r&&t(r.value);e.deleted.find((e=>e.name===n))&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=dr(n);const i=setInterval((()=>{const e=dr(n);e!==r&&(t(e),r=e)}),1e3);this.listenerUnsubscribes.set(t,(()=>clearInterval(i)))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}fr.type="COOKIE";class pr extends lr{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}pr.type="SESSION";const gr=pr;class mr{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new mr(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function vr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}mr.receivers=[];class yr{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=vr("",20);r.port1.start();const u=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(u),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(u),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function br(){return window}function wr(){return"undefined"!==typeof br().WorkerGlobalScope&&"function"===typeof br().importScripts}const Sr="firebaseLocalStorageDb",Er="firebaseLocalStorage",kr="fbase_key";class _r{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Tr(e,t){return e.transaction([Er],t?"readwrite":"readonly").objectStore(Er)}function Cr(){const e=indexedDB.open(Sr,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Er,{keyPath:kr})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Er)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Sr);return new _r(e).toPromise()}(),t(await Cr()))}))}))}async function Ir(e,t,n){const r=Tr(e,!0).put({[kr]:t,value:n});return new _r(r).toPromise()}function xr(e,t){const n=Tr(e,!0).delete(t);return new _r(n).toPromise()}class Ar{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Cr()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return wr()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=mr._getInstance(wr()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new yr(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Cr();return await Ir(e,ar,"1"),await xr(e,ar),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Ir(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Tr(e,!1).get(t),r=await new _r(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>xr(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Tr(e,!1).getAll();return new _r(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Ar.type="LOCAL";const Nr=Ar;function Dr(e,t){return Nt(e,"POST","/v2/accounts/mfaSignIn:start",At(e,t))}Tn("rcb"),new kt(3e4,6e4);const Rr="recaptcha";async function Pr(e,t,n){var r;if(!e._getRecaptchaConfig())try{await Rn(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){mt("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=Dn(e,r,"mfaSmsEnrollment",(async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===xn){mt((null===n||void 0===n?void 0:n.type)===Rr,e,"argument-error");return or(e,await Or(e,t,n))}return or(e,t)}),"PHONE_PROVIDER");return(await s.catch((e=>Promise.reject(e)))).phoneSessionInfo.sessionInfo}{mt("signin"===t.type,e,"internal-error");const s=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;mt(s,e,"missing-multi-factor-info");const o={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=Dn(e,o,"mfaSmsSignIn",(async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===xn){mt((null===n||void 0===n?void 0:n.type)===Rr,e,"argument-error");return Dr(e,await Or(e,t,n))}return Dr(e,t)}),"PHONE_PROVIDER");return(await a.catch((e=>Promise.reject(e)))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=Dn(e,t,"sendVerificationCode",(async(e,t)=>{if(t.captchaResponse===xn){mt((null===n||void 0===n?void 0:n.type)===Rr,e,"argument-error");return Bn(e,await Or(e,t,n))}return Bn(e,t)}),"PHONE_PROVIDER");return(await r.catch((e=>Promise.reject(e)))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function Or(e,t,n){mt(n.type===Rr,e,"argument-error");const r=await n.verify();mt("string"===typeof r,e,"argument-error");const i=Object.assign({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,s=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:s}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class Lr{constructor(e){this.providerId=Lr.PROVIDER_ID,this.auth=Sn(e)}verifyPhoneNumber(e,t){return Pr(this.auth,e,N(t))}static credential(e,t){return qn._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Lr.credentialFromTaggedObject(t)}static credentialFromError(e){return Lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?qn._fromTokenResponse(n,r):null}}function Mr(e,t){return t?en(t):(mt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Lr.PROVIDER_ID="phone",Lr.PHONE_SIGN_IN_METHOD="phone";class Fr extends Mn{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Vn(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Vn(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Vn(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function jr(e){return sr(e.auth,new Fr(e),e.bypassAuthState)}function Ur(e){const{auth:t,user:n}=e;return mt(n,t,"internal-error"),ir(n,new Fr(e),e.bypassAuthState)}async function Vr(e){const{auth:t,user:n}=e;return mt(n,t,"internal-error"),rr(n,new Fr(e),e.bypassAuthState)}class zr{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jr;case"linkViaPopup":case"linkViaRedirect":return Vr;case"reauthViaPopup":case"reauthViaRedirect":return Ur;default:dt(this.auth,"internal-error")}}resolve(e){yt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){yt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Br=new kt(2e3,1e4);class $r extends zr{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,$r.currentPopupAction&&$r.currentPopupAction.cancel(),$r.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return mt(e,this.auth,"internal-error"),e}async onExecution(){yt(1===this.filter.length,"Popup operations only handle one event");const e=vr();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(ht(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(ht(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$r.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(ht(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Br.get())};e()}}$r.currentPopupAction=null;const qr=new Map;class Hr extends zr{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=qr.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Gr(t),r=Kr(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}qr.set(this.auth._key(),e)}return this.bypassAuthState||qr.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Wr(e,t){qr.set(e._key(),t)}function Kr(e){return en(e._redirectPersistence)}function Gr(e){return rn("pendingRedirect",e.config.apiKey,e.name)}async function Qr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Be(e.app))return Promise.reject(pt(e));const r=Sn(e),i=Mr(r,t),s=new Hr(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class Yr{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Jr(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Jr(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(ht(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xr(e))}saveEventToCache(e){this.cachedEventUids.add(Xr(e)),this.lastProcessedEventTime=Date.now()}}function Xr(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Jr(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const Zr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ei=/^https?/;async function ti(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Nt(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(ni(r))return}catch(n){}dt(e,"unauthorized-domain")}function ni(e){const t=bt(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!ei.test(n))return!1;if(Zr.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const ri=new kt(3e4,6e4);function ii(){const e=br().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function si(e){return new Promise(((t,n)=>{var r,i,s;function o(){ii(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ii(),n(ht(e,"network-request-failed"))},timeout:ri.get()})}if(null===(i=null===(r=br().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=br().gapi)||void 0===s?void 0:s.load)){const t=Tn("iframefcb");return br()[t]=()=>{gapi.load?o():n(ht(e,"network-request-failed"))},_n(`${kn.gapiScript}?onload=${t}`).catch((e=>n(e)))}o()}})).catch((e=>{throw oi=null,e}))}let oi=null;const ai=new kt(5e3,15e3),li={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ui=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ci(e){const t=e.config;mt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?_t(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:He},i=ui.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${T(r).slice(1)}`}async function di(e){const t=await function(e){return oi=oi||si(e),oi}(e),n=br().gapi;return mt(n,e,"internal-error"),t.open({where:document.body,url:ci(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:li,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=ht(e,"network-request-failed"),s=br().setTimeout((()=>{r(i)}),ai.get());function o(){br().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}const hi={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class fi{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function pi(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},hi),{width:r.toString(),height:i.toString(),top:s,left:o}),u=v().toLowerCase();n&&(a=un(u)?"_blank":n),an(u)&&(t=t||"http://localhost",l.scrollbars="yes");const c=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`}),"");if(function(){var e;return pn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:v())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(u)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new fi(null);const d=window.open(t||"",a,c);mt(d,e,"popup-blocked");try{d.focus()}catch(h){}return new fi(d)}const gi="__/auth/handler",mi="emulator/auth/handler",vi=encodeURIComponent("fac");async function yi(e,t,n,r,i,s){mt(e.config.authDomain,e,"auth-domain-config-required"),mt(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:He,eventId:i};if(t instanceof Kn){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof Gn){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))void 0===a[c]&&delete a[c];const l=await e._getAppCheckToken(),u=l?`#${vi}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${gi}`;return _t(t,mi)}(e)}?${T(a).slice(1)}${u}`}const bi="webStorageSupport";const wi=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gr,this._completeRedirectFn=Qr,this._overrideRedirectResult=Wr}async _openPopup(e,t,n,r){var i;yt(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return pi(e,await yi(e,t,n,bt(),r),vr())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){br().location.href=e}(await yi(e,t,n,bt(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(yt(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await di(e),n=new Yr(e);return t.register("authEvent",(t=>{mt(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(bi,{type:bi},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[bi];void 0!==i&&t(!!i),dt(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ti(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return mn()||ln()||pn()}};var Si="@firebase/auth",Ei="1.10.0";class ki{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){mt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const _i=g("authIdTokenMaxAge")||300;let Ti=null;var Ci;kn={loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=ht("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Ci="Browser",Ve(new D("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;mt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:Ci,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vn(Ci)},u=new wn(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(en);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(u,n),u}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Ve(new D("auth-internal",(e=>(e=>new ki(e))(Sn(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Ge(Si,Ei,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Ci)),Ge(Si,Ei,"esm2017");var Ii,xi,Ai="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Ni={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return h(o(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),l=s(1),u=s(16777216);function c(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function g(e,t){this.g=e,this.h=t}function m(e,t){if(c(t))throw Error("division by zero");if(c(e))return new g(a,a);if(d(e))return t=m(h(e),t),new g(h(t.g),h(t.h));if(d(t))return t=m(e,h(t)),new g(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=v(n),r=v(r);var i=y(n,1),s=y(r,1);for(r=y(r,2),n=y(n,2);!c(r);){var u=s.add(r);0>=u.l(e)&&(i=i.add(n),s=u),r=y(r,1),n=y(n,1)}return t=f(e,i.j(t)),new g(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),u=(s=o(n)).j(t);d(u)||0<u.l(e);)u=(s=o(n-=r)).j(t);c(s)&&(s=l),i=i.add(s),e=f(e,u)}return new g(i,e)}function v(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function y(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],o=0;o<i;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(c(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var i=m(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(c(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:c(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var o=i+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(c(this)||c(e))return a;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(u)&&0>e.l(u))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,f=65535&this.i(i),g=e.i(s)>>>16,m=65535&e.i(s);n[2*i+2*s]+=f*m,p(n,2*i+2*s),n[2*i+2*s+1]+=l*m,p(n,2*i+2*s+1),n[2*i+2*s+1]+=f*g,p(n,2*i+2*s+1),n[2*i+2*s+2]+=l*g,p(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return m(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,xi=Ni.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=a,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),u=parseInt(t.substring(s,s+l),n);8>l?(l=o(Math.pow(n,l)),i=i.j(l).add(o(u))):i=(i=i.j(r)).add(o(u))}return i},Ii=Ni.Integer=r}).apply("undefined"!==typeof Ai?Ai:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Di,Ri,Pi,Oi,Li,Mi,Fi,ji,Ui="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Vi={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Ui&&Ui];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function u(e,t,n){return(u=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function g(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function m(e){return m[" "](e),e}m[" "]=function(){};var v=-1!=g().indexOf("Gecko")&&!(-1!=g().toLowerCase().indexOf("webkit")&&-1==g().indexOf("Edge"))&&!(-1!=g().indexOf("Trident")||-1!=g().indexOf("MSIE"))&&-1==g().indexOf("Edge");function y(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function E(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function k(e){i.setTimeout((()=>{throw e}),0)}function _(){var e=A;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var T=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new C),(e=>e.reset()));class C{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let I,x=!1,A=new class{constructor(){this.h=this.g=null}add(e,t){const n=T.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},N=()=>{const e=i.Promise.resolve(void 0);I=()=>{e.then(D)}};var D=()=>{for(var e;e=_();){try{e.h.call(e.g)}catch(n){k(n)}var t=T;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}x=!1};function R(){this.s=this.s,this.C=this.C}function P(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}R.prototype.s=!1,R.prototype.ma=function(){this.s||(this.s=!0,this.N())},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},P.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function L(e,t){if(P.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{m(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:M[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&L.aa.h.call(this)}}d(L,P);var M={2:"touch",3:"pen",4:"mouse"};L.prototype.h=function(){L.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),j=0;function U(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++j,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function $(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}z.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=$(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new U(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var q="closure_lm_"+(1e6*Math.random()|0),H={};function W(e,t,n,r,i){if(r&&r.once)return G(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)W(e,t[s],n,r,i);return null}return n=te(n),e&&e[F]?e.K(t,n,o(r)?!!r.capture:!!r,i):K(e,t,n,!1,r,i)}function K(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,l=Z(e);if(l||(e[q]=l=new z(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=J;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)O||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(X(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function G(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)G(e,t[s],n,r,i);return null}return n=te(n),e&&e[F]?e.L(t,n,o(r)?!!r.capture:!!r,i):K(e,t,n,!0,r,i)}function Q(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Q(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=te(n),e&&e[F]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=$(s=e.g[t],n,r,i))&&(V(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=$(t,n,r,i)),(n=-1<e?t[e]:null)&&Y(n))}function Y(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[F])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(X(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(B(n,e),0==n.h&&(n.src=null,t[q]=null)):V(e)}}}function X(e){return e in H?H[e]:H[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new L(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Y(e),e=n.call(r,t)}return e}function Z(e){return(e=e[q])instanceof z?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){R.call(this),this.i=new z(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new P(t,e);else if(t instanceof P)t.target=t.target||e;else{var i=t;S(t=new P(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ie(o,r,!0,t)&&i}if(i=ie(o=t.g=e,r,!0,t)&&i,i=ie(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(o=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&B(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=u(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=u(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function oe(e){e.g=se((()=>{e.g=null,e.i&&(e.i=!1,oe(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,R),ne.prototype[F]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Q(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)V(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends R{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){R.call(this),this.h=e,this.g={}}d(le,R);var ue=[];function ce(e){y(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Y(e)}),e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ce(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=i.JSON.stringify,he=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function pe(){}function ge(e){return e.h||(e.h=e.i())}function me(){}pe.prototype.h=null;var ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ye(){P.call(this,"d")}function be(){P.call(this,"c")}d(ye,P),d(be,P);var we={},Se=null;function Ee(){return Se=Se||new ne}function ke(e){P.call(this,we.La,e)}function _e(e){const t=Ee();re(t,new ke(t))}function Te(e,t){P.call(this,we.STAT_EVENT,e),this.stat=t}function Ce(e){const t=Ee();re(t,new Te(t,e))}function Ie(e,t){P.call(this,we.Ma,e),this.size=t}function xe(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function Ae(){this.g=!0}function Ne(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return de(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}we.La="serverreachability",d(ke,P),we.STAT_EVENT="statevent",d(Te,P),we.Ma="timingevent",d(Ie,P),Ae.prototype.xa=function(){this.g=!1},Ae.prototype.info=function(){};var De,Re={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Oe(){}function Le(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Me}function Me(){this.i=null,this.g="",this.h=!1}d(Oe,pe),Oe.prototype.g=function(){return new XMLHttpRequest},Oe.prototype.i=function(){return{}},De=new Oe;var Fe={},je={};function Ue(e,t,n){e.L=1,e.v=dt(ot(t)),e.m=n,e.P=!0,Ve(e,null)}function Ve(e,t){e.F=Date.now(),$e(e),e.A=ot(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Tt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Me,e.g=fn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(u(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ue[0]=i.toString()),i=ue);for(var s=0;s<i.length;s++){var o=W(n,i[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),_e(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var d=c.split("_");o=2<=d.length&&"type"==d[1]?o+(c+"=")+u+"&":o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Be(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?je:(n=Number(t.substring(n,r)),isNaN(n)?Fe:(r+=1)+n>t.length?je:(t=t.slice(r,r+n),e.C=r+n,t))}function $e(e){e.S=Date.now()+e.I,qe(e,e.I)}function qe(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=xe(u(e.ba,e),t)}function He(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function We(e){0==e.j.G||e.J||ln(e.j,e)}function Ke(e){He(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ce(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ge(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;an(n),Yt(n)}rn(n),Ce(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=xe(u(n.Za,n),6e3));if(1>=Je(n.h)&&n.ca){try{n.ca()}catch(c){}n.ca=void 0}}else cn(n,11)}else if((e.K||n.g==e)&&an(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.T=u[0],u=u[1],2==n.G)if("c"==u[0]){n.K=u[1],n.ia=u[2];const t=u[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=u[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const c=u[5];null!=c&&"number"===typeof c&&0<c&&(r=1.5*c,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ct(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=hn(r,r.J?r.ia:null,r.W),o.K){tt(r.h,o);var a=o,l=r.L;l&&(a.I=l),a.B&&(He(a),$e(a)),r.g=o}else nn(r);0<n.i.length&&Jt(n)}else"stop"!=u[0]&&"close"!=u[0]||cn(n,7);else 3==n.G&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?cn(n,7):Qt(n):"noop"!=u[0]&&n.l&&n.l.ta(u),n.v=0)}_e()}catch(c){}}Le.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Ht(e)?t.j():this.Y(e)},Le.prototype.Y=function(e){try{if(e==this.g)e:{const h=Ht(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||Wt(this.g)))){this.J||4!=h||7==t||_e(),He(this);var n=this.g.Z();this.X=n;t:if(ze(this)){var r=Wt(this.g);e="";var s=r.length,o=4==Ht(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ke(this),We(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,u=this.g;if((l=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var c=l;break t}}c=null}if(!(n=c)){this.o=!1,this.s=3,Ce(12),Ke(this),We(this);break e}Ne(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ge(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=Be(this,a),e==je){4==h&&(this.s=4,Ce(14),n=!1),Ne(this.i,this.l,null,"[Incomplete Response]");break}if(e==Fe){this.s=4,Ce(15),Ne(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Ne(this.i,this.l,e,null),Ge(this,e)}if(ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=a.length||this.h.h||(this.s=1,Ce(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),sn(d),d.M=!0,Ce(11))}}else Ne(this.i,this.l,a,"[Invalid Chunked Response]"),Ke(this),We(this)}else Ne(this.i,this.l,a,null),Ge(this,a);4==h&&Ke(this),this.o&&!this.J&&(4==h?ln(this.j,this):(this.o=!1,$e(this)))}else(function(e){const t={};e=(e.g&&2<=Ht(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=E(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Ce(12)):(this.s=0,Ce(13)),Ke(this),We(this)}}}catch(h){}},Le.prototype.cancel=function(){this.J=!0,Ke(this)},Le.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(_e(),Ce(17)),Ke(this),this.s=2,We(this)):qe(this,this.S-e)};var Qe=class{constructor(e,t){this.g=e,this.map=t}};function Ye(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Je(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}Ye.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new St;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ut(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,at(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),lt(this,t[4]),this.l=ht(t[5]||"",!0),ut(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new St(null,this.h))}function ot(e){return new st(e)}function at(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ut(e,t,n){t instanceof St?(e.i=t,function(e,t){t&&!e.j&&(Et(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(kt(this,t),Tt(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,bt)),e.i=new St(t,e.h))}function ct(e,t,n){e.i.set(t,n)}function dt(e){return ct(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,mt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,mt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?yt:vt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,wt)),e.join("")};var gt,mt=/[#\/\?@]/g,vt=/[#\?:]/g,yt=/[#\?]/g,bt=/[#\?@]/g,wt=/#/g;function St(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Et(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function kt(e,t){Et(e),t=Ct(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function _t(e,t){return Et(e),t=Ct(e,t),e.g.has(t)}function Tt(e,t,n){kt(e,t),0<n.length&&(e.i=null,e.g.set(Ct(e,t),h(n)),e.h+=n.length)}function Ct(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function It(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function xt(){this.g=new fe}function At(e,t,n){const r=n||"";try{rt(e,(function(e,n){let i=e;o(e)&&(i=de(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Nt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Dt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Rt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Pt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Ot(e)}function Ot(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Lt(e){let t="";return y(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Mt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Lt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ct(e,t,n))}function Ft(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=St.prototype).add=function(e,t){Et(this),this.i=null,e=Ct(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Et(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){Et(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){Et(this);let t=[];if("string"===typeof e)_t(this,e)&&(t=t.concat(this.g.get(Ct(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Et(this),this.i=null,_t(this,e=Ct(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},d(Nt,pe),Nt.prototype.g=function(){return new Dt(this.l,this.j)},Nt.prototype.i=(gt={},function(){return gt}),d(Dt,ne),(e=Dt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Ot(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Pt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ot(this)),this.g&&(this.readyState=3,Ot(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Rt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Pt(this):Ot(this),3==this.readyState&&Rt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Pt(this))},e.Qa=function(e){this.g&&(this.response=e,Pt(this))},e.ga=function(){this.g&&Pt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Dt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Ft,ne);var jt=/^https?$/i,Ut=["POST","PUT"];function Vt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,zt(e),$t(e)}function zt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Bt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Ht(e)||2!=e.Z()))if(e.u&&4==Ht(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==Ht(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(it)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!jt.test(o?o.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var a=2<Ht(e)?e.g.statusText:""}catch(l){a=""}e.l=a+" ["+e.Z()+"]",zt(e)}}finally{$t(e)}}}function $t(e,t){if(e.g){qt(e);const r=e.g,i=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function qt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Ht(e){return e.g?e.g.readyState:0}function Wt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Bi){return null}}function Kt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Gt(e){this.Aa=0,this.i=[],this.j=new Ae,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Kt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Kt("baseRetryDelayMs",5e3,e),this.cb=Kt("retryDelaySeedMs",1e4,e),this.Wa=Kt("forwardChannelMaxRetries",2,e),this.wa=Kt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ye(e&&e.concurrentRequestLimit),this.Da=new xt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Qt(e){if(Xt(e),3==e.G){var t=e.U++,n=ot(e.I);if(ct(n,"SID",e.K),ct(n,"RID",t),ct(n,"TYPE","terminate"),en(e,n),(t=new Le(e,e.j,t)).L=2,t.v=dt(ot(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=fn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),$e(t)}dn(e)}function Yt(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function Xt(e){Yt(e),e.u&&(i.clearTimeout(e.u),e.u=null),an(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Jt(e){if(!Xe(e.h)&&!e.s){e.s=!0;var t=e.Ga;I||N(),x||(I(),x=!0),A.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=ot(e.I);ct(r,"SID",e.K),ct(r,"RID",n),ct(r,"AID",e.T),en(e,r),e.m&&e.o&&Mt(r,e.m,e.o),n=new Le(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ue(n,r,t)}function en(e,t){e.H&&y(e.H,(function(e,n){ct(t,n,e)})),e.l&&rt({},(function(e,n){ct(t,n,e)}))}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?u(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=i[a].g;const l=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),o=!1;else try{At(l,e,"req"+n+"_")}catch(s){r&&r(l)}}if(o){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;I||N(),x||(I(),x=!0),A.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=xe(u(e.Fa,e),un(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function on(e){e.g=new Le(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ot(e.qa);ct(t,"RID","rpc"),ct(t,"SID",e.K),ct(t,"AID",e.T),ct(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ct(t,"TO",e.ja),ct(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Mt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=dt(ot(t)),n.m=null,n.P=!0,Ve(n,e)}function an(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){an(e),sn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=Ee(),new Ie(r,n)),Jt(e)}else nn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Je(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=xe(u(e.Ga,e,t),un(e,e.B)),e.B++,!0))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:cn(e,5);break;case 4:cn(e,10);break;case 3:cn(e,6);break;default:cn(e,2)}}function un(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function cn(e,t){if(e.j.info("Error code "+t),2==t){var n=u(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||at(r,"https"),dt(r),t?function(e,t){const n=new Ae;if(i.Image){const r=new Image;r.onload=c(It,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(It,n,"TestLoadImage: error",!1,t,r),r.onabort=c(It,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(It,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ae;const n=new AbortController,r=setTimeout((()=>{n.abort(),It(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?It(0,0,!0,t):It(0,0,!1,t)})).catch((()=>{clearTimeout(r),It(0,0,!1,t)}))}(r.toString(),n)}else Ce(2);e.G=0,e.l&&e.l.sa(t),dn(e),Xt(e)}function dn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function hn(e,t,n){var r=n instanceof st?ot(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new st(null);r&&at(o,r),t&&(o.g=t),s&&lt(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&ct(r,n,t),ct(r,"VER",e.la),en(e,r),r}function fn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Ft(new Nt({eb:n})):new Ft(e.pa)).Ha(e.J),t}function pn(){}function gn(){}function mn(e,t){ne.call(this),this.g=new Gt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new bn(this)}function vn(e){ye.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function yn(){be.call(this),this.status=1}function bn(e){this.g=e}(e=Ft.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():De.g(),this.v=this.o?ge(this.o):ge(De),this.g.onreadystatechange=u(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Vt(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Ut,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qt(this),this.u=!0,this.g.send(e),this.u=!1}catch(o){Vt(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),$t(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$t(this,!0)),Ft.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Bt(this):this.bb())},e.bb=function(){Bt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Ht(this)?this.g.status:-1}catch(gt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(gt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Gt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Ce(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=hn(this,null,this.W),Jt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Le(this,this.j,e);let s=this.o;if(this.S&&(s?(s=b(s),S(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,i,t),ct(n=ot(this.I),"RID",e),ct(n,"CVER",22),this.D&&ct(n,"X-HTTP-Session-Id",this.D),en(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Lt(s)))+"&"+t:this.m&&Mt(n,this.m,s)),et(this.h,i),this.Ua&&ct(n,"TYPE","init"),this.P?(ct(n,"$req",t),ct(n,"SID","null"),i.T=!0,Ue(i,n,null)):Ue(i,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Xe(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,on(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=xe(u(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ce(10),Yt(this),on(this))},e.Za=function(){null!=this.C&&(this.C=null,Yt(this),rn(this),Ce(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ce(2)):(this.j.info("Failed to ping google.com"),Ce(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=pn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},gn.prototype.g=function(e,t){return new mn(e,t)},d(mn,ne),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Qt(this.g)},mn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Qe(t.Ya++,e)),3==t.G&&Jt(t)},mn.prototype.N=function(){this.g.l=null,delete this.j,Qt(this.g),delete this.g,mn.aa.N.call(this)},d(vn,ye),d(yn,be),d(bn,pn),bn.prototype.ua=function(){re(this.g,"a")},bn.prototype.ta=function(e){re(this.g,new vn(e))},bn.prototype.sa=function(e){re(this.g,new yn)},bn.prototype.ra=function(){re(this.g,"b")},gn.prototype.createWebChannel=gn.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,ji=Vi.createWebChannelTransport=function(){return new gn},Fi=Vi.getStatEventTarget=function(){return Ee()},Mi=Vi.Event=we,Li=Vi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Re.NO_ERROR=0,Re.TIMEOUT=8,Re.HTTP_ERROR=6,Oi=Vi.ErrorCode=Re,Pe.COMPLETE="complete",Pi=Vi.EventType=Pe,me.EventType=ve,ve.OPEN="a",ve.CLOSE="b",ve.ERROR="c",ve.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Ri=Vi.WebChannel=me,Vi.FetchXmlHttpFactory=Nt,Ft.prototype.listenOnce=Ft.prototype.L,Ft.prototype.getLastError=Ft.prototype.Ka,Ft.prototype.getLastErrorCode=Ft.prototype.Ba,Ft.prototype.getStatus=Ft.prototype.Z,Ft.prototype.getResponseJson=Ft.prototype.Oa,Ft.prototype.getResponseText=Ft.prototype.oa,Ft.prototype.send=Ft.prototype.ea,Ft.prototype.setWithCredentials=Ft.prototype.Ha,Di=Vi.XhrIo=Ft}).apply("undefined"!==typeof Ui?Ui:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const zi="@firebase/firestore",Bi="4.7.10";class $i{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$i.UNAUTHENTICATED=new $i(null),$i.GOOGLE_CREDENTIALS=new $i("google-credentials-uid"),$i.FIRST_PARTY=new $i("first-party-uid"),$i.MOCK_USER=new $i("mock-user");let qi="11.5.0";const Hi=new z("@firebase/firestore");function Wi(){return Hi.logLevel}function Ki(e){if(Hi.logLevel<=M.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Yi);Hi.debug(`Firestore (${qi}): ${e}`,...i)}}function Gi(e){if(Hi.logLevel<=M.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Yi);Hi.error(`Firestore (${qi}): ${e}`,...i)}}function Qi(e){if(Hi.logLevel<=M.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Yi);Hi.warn(`Firestore (${qi}): ${e}`,...i)}}function Yi(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Xi(){const e=`FIRESTORE (${qi}) INTERNAL ASSERTION FAILED: `+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state");throw Gi(e),new Error(e)}function Ji(e,t){e||Xi()}function Zi(e,t){return e}const es={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ts extends w{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ns{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class rs{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class is{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t($i.UNAUTHENTICATED)))}shutdown(){}}class ss{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class os{constructor(e){this.t=e,this.currentUser=$i.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ji(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new ns;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ns,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{Ki("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Ki("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ns)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Ki("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Ji("string"==typeof t.accessToken),new rs(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ji(null===e||"string"==typeof e),new $i(e)}}class as{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=$i.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class ls{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new as(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t($i.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class us{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cs{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Be(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){Ji(void 0===this.o);const n=e=>{null!=e.error&&Ki("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,Ki("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Ki("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Ki("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.V)return Promise.resolve(new us(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Ji("string"==typeof e.token),this.R=e.token,new us(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function ds(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}function hs(){return new TextEncoder}class fs{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=ds(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function ps(e,t){return e<t?-1:e>t?1:0}function gs(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),i=t.codePointAt(n);if(r!==i){if(r<128&&i<128)return ps(r,i);{const s=hs(),o=vs(s.encode(ms(e,n)),s.encode(ms(t,n)));return 0!==o?o:ps(r,i)}}n+=r>65535?2:1}return ps(e.length,t.length)}function ms(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function vs(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return ps(e[n],t[n]);return ps(e.length,t.length)}function ys(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}const bs=-62135596800,ws=1e6;class Ss{static now(){return Ss.fromMillis(Date.now())}static fromDate(e){return Ss.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*ws);return new Ss(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ts(es.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ts(es.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<bs)throw new ts(es.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ts(es.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ws}_compareTo(e){return this.seconds===e.seconds?ps(this.nanoseconds,e.nanoseconds):ps(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-bs;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Es{static fromTimestamp(e){return new Es(e)}static min(){return new Es(new Ss(0,0))}static max(){return new Es(new Ss(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ks="__name__";class _s{constructor(e,t,n){void 0===t?t=0:t>e.length&&Xi(),void 0===n?n=e.length-t:n>e.length-t&&Xi(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===_s.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof _s?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=_s.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return ps(e.length,t.length)}static compareSegments(e,t){const n=_s.isNumericId(e),r=_s.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?_s.extractNumericId(e).compare(_s.extractNumericId(t)):gs(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ii.fromString(e.substring(4,e.length-2))}}class Ts extends _s{construct(e,t,n){return new Ts(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new ts(es.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((e=>e.length>0)))}return new Ts(e)}static emptyPath(){return new Ts([])}}const Cs=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Is extends _s{construct(e,t,n){return new Is(e,t,n)}static isValidIdentifier(e){return Cs.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Is.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===ks}static keyField(){return new Is([ks])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new ts(es.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new ts(es.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new ts(es.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new ts(es.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Is(t)}static emptyPath(){return new Is([])}}class xs{constructor(e){this.path=e}static fromPath(e){return new xs(Ts.fromString(e))}static fromName(e){return new xs(Ts.fromString(e).popFirst(5))}static empty(){return new xs(Ts.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ts.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ts.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xs(new Ts(e.slice()))}}const As=-1;class Ns{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Ns.UNKNOWN_ID=-1;function Ds(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Es.fromTimestamp(1e9===r?new Ss(n+1,0):new Ss(n,r));return new Ps(i,xs.empty(),t)}function Rs(e){return new Ps(e.readTime,e.key,As)}class Ps{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Ps(Es.min(),xs.empty(),As)}static max(){return new Ps(Es.max(),xs.empty(),As)}}function Os(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=xs.comparator(e.documentKey,t.documentKey),0!==n?n:ps(e.largestBatchId,t.largestBatchId))}const Ls="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ms{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Fs(e){if(e.code!==es.FAILED_PRECONDITION||e.message!==Ls)throw e;Ki("LocalStore","Unexpectedly lost primary lease")}class js{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Xi(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new js(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof js?t:js.resolve(t)}catch(e){return js.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):js.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):js.reject(t)}static resolve(e){return new js(((t,n)=>{t(e)}))}static reject(e){return new js(((t,n)=>{n(e)}))}static waitFor(e){return new js(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=js.resolve(!1);for(const n of e)t=t.next((e=>e?js.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new js(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new js(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}function Us(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Vs(e){return"IndexedDbTransactionError"===e.name}class zs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.oe(e),this._e=e=>t.writeSequenceNumber(e))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}zs.ae=-1;const Bs=-1;function $s(e){return null==e}function qs(e){return 0===e&&1/e==-1/0}function Hs(e){return"number"==typeof e&&Number.isInteger(e)&&!qs(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Ws="\x01";function Ks(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Qs(t)),t=Gs(e.get(n),t);return Qs(t)}function Gs(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case Ws:n+="\x01\x11";break;default:n+=t}}return n}function Qs(e){return e+Ws+"\x01"}const Ys="remoteDocuments",Xs="owner",Js="mutationQueues",Zs="mutations";const eo="documentMutations",to="remoteDocumentsV14",no="remoteDocumentGlobal",ro="targets",io="targetDocuments",so="targetGlobal",oo="collectionParents",ao="clientMetadata",lo="bundles",uo="namedQueries",co="indexConfiguration",ho="indexState",fo="indexEntries",po="documentOverlays",go="globals",mo=[Js,Zs,eo,Ys,ro,Xs,so,io,ao,no,oo,lo,uo],vo=[Js,Zs,eo,to,ro,Xs,so,io,ao,no,oo,lo,uo,po],yo=vo,bo=[...yo,co,ho,fo];function wo(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function So(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Eo(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class ko{constructor(e,t){this.comparator=e,this.root=t||To.EMPTY}insert(e,t){return new ko(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,To.BLACK,null,null))}remove(e){return new ko(this.comparator,this.root.remove(e,this.comparator).copy(null,null,To.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _o(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _o(this.root,e,this.comparator,!1)}getReverseIterator(){return new _o(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _o(this.root,e,this.comparator,!0)}}class _o{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class To{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:To.RED,this.left=null!=r?r:To.EMPTY,this.right=null!=i?i:To.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new To(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return To.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return To.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,To.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,To.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Xi();if(this.right.isRed())throw Xi();const e=this.left.check();if(e!==this.right.check())throw Xi();return e+(this.isRed()?0:1)}}To.EMPTY=null,To.RED=!0,To.BLACK=!1,To.EMPTY=new class{constructor(){this.size=0}get key(){throw Xi()}get value(){throw Xi()}get color(){throw Xi()}get left(){throw Xi()}get right(){throw Xi()}copy(e,t,n,r,i){return this}insert(e,t,n){return new To(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Co{constructor(e){this.comparator=e,this.data=new ko(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Io(this.data.getIterator())}getIteratorFrom(e){return new Io(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Co))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Co(this.comparator);return t.data=e,t}}class Io{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class xo{constructor(e){this.fields=e,e.sort(Is.comparator)}static empty(){return new xo([])}unionWith(e){let t=new Co(Is.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new xo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ys(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Ao extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class No{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Ao("Invalid base64 string: "+e):e}}(e);return new No(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new No(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ps(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}No.EMPTY_BYTE_STRING=new No("");const Do=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ro(e){if(Ji(!!e),"string"==typeof e){let t=0;const n=Do.exec(e);if(Ji(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Po(e.seconds),nanos:Po(e.nanos)}}function Po(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Oo(e){return"string"==typeof e?No.fromBase64String(e):No.fromUint8Array(e)}const Lo="server_timestamp",Mo="__type__",Fo="__previous_value__",jo="__local_write_time__";function Uo(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Mo])||void 0===n?void 0:n.stringValue)===Lo}function Vo(e){const t=e.mapValue.fields[Fo];return Uo(t)?Vo(t):t}function zo(e){const t=Ro(e.mapValue.fields[jo].timestampValue);return new Ss(t.seconds,t.nanos)}class Bo{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}const $o="(default)";class qo{constructor(e,t){this.projectId=e,this.database=t||$o}static empty(){return new qo("","")}get isDefaultDatabase(){return this.database===$o}isEqual(e){return e instanceof qo&&e.projectId===this.projectId&&e.database===this.database}}const Ho="__type__",Wo="__max__",Ko={mapValue:{fields:{__type__:{stringValue:Wo}}}},Go="__vector__",Qo="value";function Yo(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Uo(e)?4:fa(e)?9007199254740991:da(e)?10:11:Xi()}function Xo(e,t){if(e===t)return!0;const n=Yo(e);if(n!==Yo(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return zo(e).isEqual(zo(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Ro(e.timestampValue),r=Ro(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Oo(e.bytesValue).isEqual(Oo(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Po(e.geoPointValue.latitude)===Po(t.geoPointValue.latitude)&&Po(e.geoPointValue.longitude)===Po(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Po(e.integerValue)===Po(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Po(e.doubleValue),r=Po(t.doubleValue);return n===r?qs(n)===qs(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ys(e.arrayValue.values||[],t.arrayValue.values||[],Xo);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(wo(n)!==wo(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Xo(n[i],r[i])))return!1;return!0}(e,t);default:return Xi()}}function Jo(e,t){return void 0!==(e.values||[]).find((e=>Xo(e,t)))}function Zo(e,t){if(e===t)return 0;const n=Yo(e),r=Yo(t);if(n!==r)return ps(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ps(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Po(e.integerValue||e.doubleValue),r=Po(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ea(e.timestampValue,t.timestampValue);case 4:return ea(zo(e),zo(t));case 5:return gs(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Oo(e),r=Oo(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=ps(n[i],r[i]);if(0!==e)return e}return ps(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=ps(Po(e.latitude),Po(t.latitude));return 0!==n?n:ps(Po(e.longitude),Po(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return ta(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const o=e.fields||{},a=t.fields||{},l=null===(n=o[Qo])||void 0===n?void 0:n.arrayValue,u=null===(r=a[Qo])||void 0===r?void 0:r.arrayValue,c=ps((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==u?void 0:u.values)||void 0===s?void 0:s.length)||0);return 0!==c?c:ta(l,u)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Ko.mapValue&&t===Ko.mapValue)return 0;if(e===Ko.mapValue)return 1;if(t===Ko.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=gs(r[o],s[o]);if(0!==e)return e;const t=Zo(n[r[o]],i[s[o]]);if(0!==t)return t}return ps(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Xi()}}function ea(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return ps(e,t);const n=Ro(e),r=Ro(t),i=ps(n.seconds,r.seconds);return 0!==i?i:ps(n.nanos,r.nanos)}function ta(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Zo(n[i],r[i]);if(e)return e}return ps(n.length,r.length)}function na(e){return ra(e)}function ra(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Ro(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Oo(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return xs.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=ra(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${ra(e.fields[i])}`;return n+"}"}(e.mapValue):Xi()}function ia(e){switch(Yo(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Vo(e);return t?16+ia(t):16;case 5:return 2*e.stringValue.length;case 6:return Oo(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+ia(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return So(e.fields,((e,n)=>{t+=e.length+ia(n)})),t}(e.mapValue);default:throw Xi()}}function sa(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function oa(e){return!!e&&"integerValue"in e}function aa(e){return!!e&&"arrayValue"in e}function la(e){return!!e&&"nullValue"in e}function ua(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ca(e){return!!e&&"mapValue"in e}function da(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Ho])||void 0===n?void 0:n.stringValue)===Go}function ha(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return So(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=ha(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ha(e.arrayValue.values[n]);return t}return Object.assign({},e)}function fa(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Wo}class pa{constructor(e){this.value=e}static empty(){return new pa({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!ca(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ha(t)}setAll(e){let t=Is.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=ha(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());ca(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Xo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];ca(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){So(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new pa(ha(this.value))}}function ga(e){const t=[];return So(e.fields,((e,n)=>{const r=new Is([e]);if(ca(n)){const e=ga(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new xo(t)}class ma{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new ma(e,0,Es.min(),Es.min(),Es.min(),pa.empty(),0)}static newFoundDocument(e,t,n,r){return new ma(e,1,t,Es.min(),n,r,0)}static newNoDocument(e,t){return new ma(e,2,t,Es.min(),Es.min(),pa.empty(),0)}static newUnknownDocument(e,t){return new ma(e,3,t,Es.min(),Es.min(),pa.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Es.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pa.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pa.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Es.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ma&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ma(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class va{constructor(e,t){this.position=e,this.inclusive=t}}function ya(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?xs.comparator(xs.fromName(o.referenceValue),n.key):Zo(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function ba(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Xo(e.position[n],t.position[n]))return!1;return!0}class wa{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Sa(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Ea{}class ka extends Ea{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Da(e,t,n):"array-contains"===t?new La(e,n):"in"===t?new Ma(e,n):"not-in"===t?new Fa(e,n):"array-contains-any"===t?new ja(e,n):new ka(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Ra(e,n):new Pa(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Zo(t,this.value)):null!==t&&Yo(this.value)===Yo(t)&&this.matchesComparison(Zo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Xi()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _a extends Ea{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new _a(e,t)}matches(e){return Ta(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ce||(this.ce=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Ta(e){return"and"===e.op}function Ca(e){return Ia(e)&&Ta(e)}function Ia(e){for(const t of e.filters)if(t instanceof _a)return!1;return!0}function xa(e){if(e instanceof ka)return e.field.canonicalString()+e.op.toString()+na(e.value);if(Ca(e))return e.filters.map((e=>xa(e))).join(",");{const t=e.filters.map((e=>xa(e))).join(",");return`${e.op}(${t})`}}function Aa(e,t){return e instanceof ka?function(e,t){return t instanceof ka&&e.op===t.op&&e.field.isEqual(t.field)&&Xo(e.value,t.value)}(e,t):e instanceof _a?function(e,t){return t instanceof _a&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Aa(n,t.filters[r])),!0)}(e,t):void Xi()}function Na(e){return e instanceof ka?function(e){return`${e.field.canonicalString()} ${e.op} ${na(e.value)}`}(e):e instanceof _a?function(e){return e.op.toString()+" {"+e.getFilters().map(Na).join(" ,")+"}"}(e):"Filter"}class Da extends ka{constructor(e,t,n){super(e,t,n),this.key=xs.fromName(n.referenceValue)}matches(e){const t=xs.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ra extends ka{constructor(e,t){super(e,"in",t),this.keys=Oa("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Pa extends ka{constructor(e,t){super(e,"not-in",t),this.keys=Oa("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Oa(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>xs.fromName(e.referenceValue)))}class La extends ka{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return aa(t)&&Jo(t.arrayValue,this.value)}}class Ma extends ka{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Jo(this.value.arrayValue,t)}}class Fa extends ka{constructor(e,t){super(e,"not-in",t)}matches(e){if(Jo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Jo(this.value.arrayValue,t)}}class ja extends ka{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!aa(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Jo(this.value.arrayValue,e)))}}class Ua{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.le=null}}function Va(e){return new Ua(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function za(e){const t=Zi(e);if(null===t.le){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>xa(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),$s(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>na(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>na(e))).join(",")),t.le=e}return t.le}function Ba(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Sa(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Aa(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ba(e.startAt,t.startAt)&&ba(e.endAt,t.endAt)}function $a(e){return xs.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class qa{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function Ha(e,t,n,r,i,s,o,a){return new qa(e,t,n,r,i,s,o,a)}function Wa(e){return new qa(e)}function Ka(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Ga(e){return null!==e.collectionGroup}function Qa(e){const t=Zi(e);if(null===t.he){t.he=[];const e=new Set;for(const i of t.explicitOrderBy)t.he.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Co(Is.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.he.push(new wa(r,n))})),e.has(Is.keyField().canonicalString())||t.he.push(new wa(Is.keyField(),n))}return t.he}function Ya(e){const t=Zi(e);return t.Pe||(t.Pe=Xa(t,Qa(e))),t.Pe}function Xa(e,t){if("F"===e.limitType)return Va(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new wa(e.field,t)}));const n=e.endAt?new va(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new va(e.startAt.position,e.startAt.inclusive):null;return Va(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Ja(e,t){const n=e.filters.concat([t]);return new qa(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Za(e,t,n){return new qa(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function el(e,t){return Ba(Ya(e),Ya(t))&&e.limitType===t.limitType}function tl(e){return`${za(Ya(e))}|lt:${e.limitType}`}function nl(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>Na(e))).join(", ")}]`),$s(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>na(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>na(e))).join(",")),`Target(${t})`}(Ya(e))}; limitType=${e.limitType})`}function rl(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):xs.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Qa(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=ya(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Qa(e),t))&&!(e.endAt&&!function(e,t,n){const r=ya(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Qa(e),t))}(e,t)}function il(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function sl(e){return(t,n)=>{let r=!1;for(const i of Qa(e)){const e=ol(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function ol(e,t,n){const r=e.field.isKeyField()?xs.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Zo(r,i):Xi()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Xi()}}class al{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){So(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return Eo(this.inner)}size(){return this.innerSize}}const ll=new ko(xs.comparator);function ul(){return ll}const cl=new ko(xs.comparator);function dl(){let e=cl;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function hl(e){let t=cl;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function fl(){return gl()}function pl(){return gl()}function gl(){return new al((e=>e.toString()),((e,t)=>e.isEqual(t)))}const ml=new ko(xs.comparator),vl=new Co(xs.comparator);function yl(){let e=vl;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const bl=new Co(ps);function wl(){return bl}function Sl(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qs(t)?"-0":t}}function El(e){return{integerValue:""+e}}function kl(e,t){return Hs(t)?El(t):Sl(e,t)}class _l{constructor(){this._=void 0}}function Tl(e,t,n){return e instanceof xl?function(e,t){const n={fields:{[Mo]:{stringValue:Lo},[jo]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Uo(t)&&(t=Vo(t)),t&&(n.fields[Fo]=t),{mapValue:n}}(n,t):e instanceof Al?Nl(e,t):e instanceof Dl?Rl(e,t):function(e,t){const n=Il(e,t),r=Ol(n)+Ol(e.Ie);return oa(n)&&oa(e.Ie)?El(r):Sl(e.serializer,r)}(e,t)}function Cl(e,t,n){return e instanceof Al?Nl(e,t):e instanceof Dl?Rl(e,t):n}function Il(e,t){return e instanceof Pl?function(e){return oa(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class xl extends _l{}class Al extends _l{constructor(e){super(),this.elements=e}}function Nl(e,t){const n=Ll(t);for(const r of e.elements)n.some((e=>Xo(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Dl extends _l{constructor(e){super(),this.elements=e}}function Rl(e,t){let n=Ll(t);for(const r of e.elements)n=n.filter((e=>!Xo(e,r)));return{arrayValue:{values:n}}}class Pl extends _l{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Ol(e){return Po(e.integerValue||e.doubleValue)}function Ll(e){return aa(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Ml{constructor(e,t){this.field=e,this.transform=t}}class Fl{constructor(e,t){this.version=e,this.transformResults=t}}class jl{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new jl}static exists(e){return new jl(void 0,e)}static updateTime(e){return new jl(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ul(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Vl{}function zl(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Xl(e.key,jl.none()):new Wl(e.key,e.data,jl.none());{const n=e.data,r=pa.empty();let i=new Co(Is.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Kl(e.key,r,new xo(i.toArray()),jl.none())}}function Bl(e,t,n){e instanceof Wl?function(e,t,n){const r=e.value.clone(),i=Ql(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Kl?function(e,t,n){if(!Ul(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Ql(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Gl(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function $l(e,t,n,r){return e instanceof Wl?function(e,t,n,r){if(!Ul(e.precondition,t))return n;const i=e.value.clone(),s=Yl(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Kl?function(e,t,n,r){if(!Ul(e.precondition,t))return n;const i=Yl(e.fieldTransforms,r,t),s=t.data;return s.setAll(Gl(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Ul(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function ql(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Il(r.transform,e||null);null!=i&&(null===n&&(n=pa.empty()),n.set(r.field,i))}return n||null}function Hl(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ys(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Al&&t instanceof Al||e instanceof Dl&&t instanceof Dl?ys(e.elements,t.elements,Xo):e instanceof Pl&&t instanceof Pl?Xo(e.Ie,t.Ie):e instanceof xl&&t instanceof xl}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Wl extends Vl{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Kl extends Vl{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Gl(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Ql(e,t,n){const r=new Map;Ji(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Cl(o,a,n[i]))}return r}function Yl(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Tl(e,s,t))}return r}class Xl extends Vl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Jl extends Vl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Zl{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Bl(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=$l(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=$l(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=pl();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=zl(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Es.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),yl())}isEqual(e){return this.batchId===e.batchId&&ys(this.mutations,e.mutations,((e,t)=>Hl(e,t)))&&ys(this.baseMutations,e.baseMutations,((e,t)=>Hl(e,t)))}}class eu{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Ji(e.mutations.length===n.length);let r=ml;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new eu(e,t,n,r)}}class tu{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class nu{constructor(e,t){this.count=e,this.unchangedNames=t}}var ru,iu;function su(e){switch(e){case es.OK:return Xi();case es.CANCELLED:case es.UNKNOWN:case es.DEADLINE_EXCEEDED:case es.RESOURCE_EXHAUSTED:case es.INTERNAL:case es.UNAVAILABLE:case es.UNAUTHENTICATED:return!1;case es.INVALID_ARGUMENT:case es.NOT_FOUND:case es.ALREADY_EXISTS:case es.PERMISSION_DENIED:case es.FAILED_PRECONDITION:case es.ABORTED:case es.OUT_OF_RANGE:case es.UNIMPLEMENTED:case es.DATA_LOSS:return!0;default:return Xi()}}function ou(e){if(void 0===e)return Gi("GRPC error has no .code"),es.UNKNOWN;switch(e){case ru.OK:return es.OK;case ru.CANCELLED:return es.CANCELLED;case ru.UNKNOWN:return es.UNKNOWN;case ru.DEADLINE_EXCEEDED:return es.DEADLINE_EXCEEDED;case ru.RESOURCE_EXHAUSTED:return es.RESOURCE_EXHAUSTED;case ru.INTERNAL:return es.INTERNAL;case ru.UNAVAILABLE:return es.UNAVAILABLE;case ru.UNAUTHENTICATED:return es.UNAUTHENTICATED;case ru.INVALID_ARGUMENT:return es.INVALID_ARGUMENT;case ru.NOT_FOUND:return es.NOT_FOUND;case ru.ALREADY_EXISTS:return es.ALREADY_EXISTS;case ru.PERMISSION_DENIED:return es.PERMISSION_DENIED;case ru.FAILED_PRECONDITION:return es.FAILED_PRECONDITION;case ru.ABORTED:return es.ABORTED;case ru.OUT_OF_RANGE:return es.OUT_OF_RANGE;case ru.UNIMPLEMENTED:return es.UNIMPLEMENTED;case ru.DATA_LOSS:return es.DATA_LOSS;default:return Xi()}}(iu=ru||(ru={}))[iu.OK=0]="OK",iu[iu.CANCELLED=1]="CANCELLED",iu[iu.UNKNOWN=2]="UNKNOWN",iu[iu.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",iu[iu.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",iu[iu.NOT_FOUND=5]="NOT_FOUND",iu[iu.ALREADY_EXISTS=6]="ALREADY_EXISTS",iu[iu.PERMISSION_DENIED=7]="PERMISSION_DENIED",iu[iu.UNAUTHENTICATED=16]="UNAUTHENTICATED",iu[iu.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",iu[iu.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",iu[iu.ABORTED=10]="ABORTED",iu[iu.OUT_OF_RANGE=11]="OUT_OF_RANGE",iu[iu.UNIMPLEMENTED=12]="UNIMPLEMENTED",iu[iu.INTERNAL=13]="INTERNAL",iu[iu.UNAVAILABLE=14]="UNAVAILABLE",iu[iu.DATA_LOSS=15]="DATA_LOSS";let au=null;const lu=new Ii([4294967295,4294967295],0);function uu(e){const t=hs().encode(e),n=new xi;return n.update(t),new Uint8Array(n.digest())}function cu(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Ii([n,r],0),new Ii([i,s],0)]}class du{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new hu(`Invalid padding: ${t}`);if(n<0)throw new hu(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new hu(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new hu(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=Ii.fromNumber(this.Ee)}Ae(e,t,n){let r=e.add(t.multiply(Ii.fromNumber(n)));return 1===r.compare(lu)&&(r=new Ii([r.getBits(0),r.getBits(1)],0)),r.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ee)return!1;const t=uu(e),[n,r]=cu(t);for(let i=0;i<this.hashCount;i++){const e=this.Ae(n,r,i);if(!this.Re(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new du(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Ee)return;const t=uu(e),[n,r]=cu(t);for(let i=0;i<this.hashCount;i++){const e=this.Ae(n,r,i);this.Ve(e)}}Ve(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class hu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class fu{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,pu.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new fu(Es.min(),r,new ko(ps),ul(),yl())}}class pu{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new pu(n,t,yl(),yl(),yl())}}class gu{constructor(e,t,n,r){this.me=e,this.removedTargetIds=t,this.key=n,this.fe=r}}class mu{constructor(e,t){this.targetId=e,this.ge=t}}class vu{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:No.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class yu{constructor(){this.pe=0,this.ye=Su(),this.we=No.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return 0!==this.pe}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=yl(),t=yl(),n=yl();return this.ye.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Xi()}})),new pu(this.we,this.Se,e,t,n)}Me(){this.be=!1,this.ye=Su()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Ji(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class bu{constructor(e){this.ke=e,this.qe=new Map,this.Qe=ul(),this.$e=wu(),this.Ue=wu(),this.Ke=new ko(ps)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,(t=>{const n=this.He(t);switch(e.state){case 0:this.Je(t)&&n.Ce(e.resumeToken);break;case 1:n.Be(),n.De||n.Me(),n.Ce(e.resumeToken);break;case 2:n.Be(),n.De||this.removeTarget(t);break;case 3:this.Je(t)&&(n.Le(),n.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),n.Ce(e.resumeToken));break;default:Xi()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach(((e,n)=>{this.Je(n)&&t(n)}))}Ze(e){const t=e.targetId,n=e.ge.count,r=this.Xe(t);if(r){const i=r.target;if($a(i))if(0===n){const e=new xs(i.path);this.ze(t,e,ma.newNoDocument(e,Es.min()))}else Ji(1===n);else{const r=this.et(t);if(r!==n){const n=this.tt(e),i=n?this.nt(n,e,r):1;if(0!==i){this.Ye(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==au||au.rt(function(e,t,n,r,i){var s,o,a,l,u,c;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===i,hashCount:null!==(s=null==h?void 0:h.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==h?void 0:h.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(c=null===(u=null==h?void 0:h.bits)||void 0===u?void 0:u.padding)&&void 0!==c?c:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.ge,this.ke.it(),n,i))}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=Oo(n).toUint8Array()}catch(e){if(e instanceof Ao)return Qi("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new du(s,r,i)}catch(e){return Qi(e instanceof hu?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Ee?null:o}nt(e,t,n){return t.ge.count===n-this.st(e,t.targetId)?0:2}st(e,t){const n=this.ke.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.ke.it(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.ze(t,n,null),r++)})),r}ot(e){const t=new Map;this.qe.forEach(((n,r)=>{const i=this.Xe(r);if(i){if(n.current&&$a(i.target)){const t=new xs(i.target.path);this._t(t).has(r)||this.ut(r,t)||this.ze(r,t,ma.newNoDocument(t,e))}n.ve&&(t.set(r,n.Fe()),n.Me())}}));let n=yl();this.Ue.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Xe(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.Qe.forEach(((t,n)=>n.setReadTime(e)));const r=new fu(e,t,this.Ke,this.Qe,n);return this.Qe=ul(),this.$e=wu(),this.Ue=wu(),this.Ke=new ko(ps),r}Ge(e,t){if(!this.Je(e))return;const n=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,n),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,n){if(!this.Je(e))return;const r=this.He(e);this.ut(e,t)?r.xe(t,1):r.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),n&&(this.Qe=this.Qe.insert(t,n))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new yu,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new Co(ps),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Co(ps),this.$e=this.$e.insert(e,t)),t}Je(e){const t=null!==this.Xe(e);return t||Ki("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new yu),this.ke.getRemoteKeysForTarget(e).forEach((t=>{this.ze(e,t,null)}))}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function wu(){return new ko(xs.comparator)}function Su(){return new ko(xs.comparator)}const Eu={asc:"ASCENDING",desc:"DESCENDING"},ku={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_u={and:"AND",or:"OR"};class Tu{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Cu(e,t){return e.useProto3Json||$s(t)?t:{value:t}}function Iu(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function xu(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Au(e,t){return Iu(e,t.toTimestamp())}function Nu(e){return Ji(!!e),Es.fromTimestamp(function(e){const t=Ro(e);return new Ss(t.seconds,t.nanos)}(e))}function Du(e,t){return Ru(e,t).canonicalString()}function Ru(e,t){const n=function(e){return new Ts(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Pu(e){const t=Ts.fromString(e);return Ji(Zu(t)),t}function Ou(e,t){return Du(e.databaseId,t.path)}function Lu(e,t){const n=Pu(t);if(n.get(1)!==e.databaseId.projectId)throw new ts(es.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ts(es.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new xs(Uu(n))}function Mu(e,t){return Du(e.databaseId,t)}function Fu(e){const t=Pu(e);return 4===t.length?Ts.emptyPath():Uu(t)}function ju(e){return new Ts(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Uu(e){return Ji(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Vu(e,t,n){return{name:Ou(e,t),fields:n.value.mapValue.fields}}function zu(e,t){let n;if(t instanceof Wl)n={update:Vu(e,t.key,t.value)};else if(t instanceof Xl)n={delete:Ou(e,t.key)};else if(t instanceof Kl)n={update:Vu(e,t.key,t.data),updateMask:Ju(t.fieldMask)};else{if(!(t instanceof Jl))return Xi();n={verify:Ou(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof xl)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Al)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Dl)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Pl)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw Xi()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Au(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Xi()}(e,t.precondition)),n}function Bu(e,t){return{documents:[Mu(e,t.path)]}}function $u(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Mu(e,i);const s=function(e){if(0!==e.length)return Xu(_a.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Qu(e.field),direction:Wu(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Cu(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ht:n,parent:i}}function qu(e){let t=Fu(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ji(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Hu(e);return t instanceof _a&&Ca(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new wa(Yu(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,$s(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new va(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new va(n,t)}(n.endAt)),Ha(t,i,o,s,a,"F",l,u)}function Hu(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Yu(e.unaryFilter.field);return ka.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Yu(e.unaryFilter.field);return ka.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Yu(e.unaryFilter.field);return ka.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Yu(e.unaryFilter.field);return ka.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Xi()}}(e):void 0!==e.fieldFilter?function(e){return ka.create(Yu(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Xi()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return _a.create(e.compositeFilter.filters.map((e=>Hu(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Xi()}}(e.compositeFilter.op))}(e):Xi()}function Wu(e){return Eu[e]}function Ku(e){return ku[e]}function Gu(e){return _u[e]}function Qu(e){return{fieldPath:e.canonicalString()}}function Yu(e){return Is.fromServerFormat(e.fieldPath)}function Xu(e){return e instanceof ka?function(e){if("=="===e.op){if(ua(e.value))return{unaryFilter:{field:Qu(e.field),op:"IS_NAN"}};if(la(e.value))return{unaryFilter:{field:Qu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ua(e.value))return{unaryFilter:{field:Qu(e.field),op:"IS_NOT_NAN"}};if(la(e.value))return{unaryFilter:{field:Qu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qu(e.field),op:Ku(e.op),value:e.value}}}(e):e instanceof _a?function(e){const t=e.getFilters().map((e=>Xu(e)));return 1===t.length?t[0]:{compositeFilter:{op:Gu(e.op),filters:t}}}(e):Xi()}function Ju(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Zu(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class ec{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Es.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Es.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:No.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new ec(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ec(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ec(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ec(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class tc{constructor(e){this.Tt=e}}function nc(e){const t=qu({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Za(t,t.limit,"L"):t}class rc{constructor(){}At(e,t){this.Rt(e,t),t.Vt()}Rt(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(Po(e.integerValue));else if("doubleValue"in e){const n=Po(e.doubleValue);isNaN(n)?this.ft(t,13):(this.ft(t,15),qs(n)?t.gt(0):t.gt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.ft(t,20),"string"==typeof n&&(n=Ro(n)),t.yt(`${n.seconds||""}`),t.gt(n.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.St(t);else if("bytesValue"in e)this.ft(t,30),t.bt(Oo(e.bytesValue)),this.St(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ft(t,45),t.gt(n.latitude||0),t.gt(n.longitude||0)}else"mapValue"in e?fa(e)?this.ft(t,Number.MAX_SAFE_INTEGER):da(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.St(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.St(t)):Xi()}wt(e,t){this.ft(t,25),this.Mt(e,t)}Mt(e,t){t.yt(e)}Ct(e,t){const n=e.fields||{};this.ft(t,55);for(const r of Object.keys(n))this.wt(r,t),this.Rt(n[r],t)}vt(e,t){var n,r;const i=e.fields||{};this.ft(t,53);const s=Qo,o=(null===(r=null===(n=i[s].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.ft(t,15),t.gt(Po(o)),this.wt(s,t),this.Rt(i[s],t)}Ft(e,t){const n=e.values||[];this.ft(t,50);for(const r of n)this.Rt(r,t)}Dt(e,t){this.ft(t,37),xs.fromName(e).path.forEach((e=>{this.ft(t,60),this.Mt(e,t)}))}ft(e,t){e.gt(t)}St(e){e.gt(2)}}rc.xt=new rc;class ic{constructor(){this.Tn=new sc}addToCollectionParentIndex(e,t){return this.Tn.add(t),js.resolve()}getCollectionParents(e,t){return js.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return js.resolve()}deleteFieldIndex(e,t){return js.resolve()}deleteAllFieldIndexes(e){return js.resolve()}createTargetIndexes(e,t){return js.resolve()}getDocumentsMatchingTarget(e,t){return js.resolve(null)}getIndexType(e,t){return js.resolve(0)}getFieldIndexes(e,t){return js.resolve([])}getNextCollectionGroupToUpdate(e){return js.resolve(null)}getMinOffset(e,t){return js.resolve(Ps.min())}getMinOffsetFromCollectionGroup(e,t){return js.resolve(Ps.min())}updateCollectionGroup(e,t,n){return js.resolve()}updateIndexEntries(e,t){return js.resolve()}}class sc{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Co(Ts.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Co(Ts.comparator)).toArray()}}new Uint8Array(0);const oc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ac=41943040;class lc{static withCacheSize(e){return new lc(e,lc.DEFAULT_COLLECTION_PERCENTILE,lc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}lc.DEFAULT_COLLECTION_PERCENTILE=10,lc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,lc.DEFAULT=new lc(ac,lc.DEFAULT_COLLECTION_PERCENTILE,lc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),lc.DISABLED=new lc(-1,0,0);class uc{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new uc(0)}static Kn(){return new uc(-1)}}const cc="LruGarbageCollector",dc=1048576;function hc(e,t){let[n,r]=e,[i,s]=t;const o=ps(n,i);return 0===o?ps(r,s):o}class fc{constructor(e){this.Hn=e,this.buffer=new Co(hc),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();hc(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class pc{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Xn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return null!==this.Xn}er(e){Ki(cc,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Vs(e)?Ki(cc,"Ignoring IndexedDB error during garbage collection: ",e):await Fs(e)}await this.er(3e5)}))}}class gc{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return js.resolve(zs.ae);const n=new fc(t);return this.tr.forEachTarget(e,(e=>n.Zn(e.sequenceNumber))).next((()=>this.tr.rr(e,(e=>n.Zn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.tr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ki("LruGarbageCollector","Garbage collection skipped; disabled"),js.resolve(oc)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Ki("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),oc):this.ir(e,t)))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let n,r,i,s,o,a,l;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Ki("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),Wi()<=M.DEBUG&&Ki("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-u}ms\n\tDetermined least recently used ${r} in `+(o-s)+"ms\n"+`\tRemoved ${i} targets in `+(a-o)+"ms\n"+`\tRemoved ${e} documents in `+(l-a)+"ms\n"+`Total Duration: ${l-u}ms`),js.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function mc(e,t){return new gc(e,t)}class vc{constructor(){this.changes=new al((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ma.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?js.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class yc{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class bc{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&$l(n.mutation,e,xo.empty(),Ss.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,yl()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:yl();const r=fl();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=dl();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=fl();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,yl())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=ul();const s=gl(),o=gl();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Kl)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),$l(o.mutation,t,o.mutation.getFieldMask(),Ss.now())):s.set(t.key,xo.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new yc(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=gl();let r=new ko(((e,t)=>e-t)),i=yl();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||xo.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||yl()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,u=pl();l.forEach((e=>{if(!i.has(e)){const r=zl(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,u))}return js.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return xs.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ga(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):js.resolve(fl());let o=As,a=i;return s.next((t=>js.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?js.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,yl()))).next((e=>({batchId:o,changes:hl(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new xs(t)).next((e=>{let t=dl();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=dl();return this.indexManager.getCollectionParents(e,i).next((o=>js.forEach(o,(o=>{const a=function(e,t){return new qa(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,ma.newInvalidDocument(r)))}));let n=dl();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&$l(s.mutation,r,xo.empty(),Ss.now()),rl(t,r)&&(n=n.insert(e,r))})),n}))}}class wc{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return js.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Nu(e.createTime)}}(t)),js.resolve()}getNamedQuery(e,t){return js.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(e){return{name:e.name,query:nc(e.bundledQuery),readTime:Nu(e.readTime)}}(t)),js.resolve()}}class Sc{constructor(){this.overlays=new ko(xs.comparator),this.Rr=new Map}getOverlay(e,t){return js.resolve(this.overlays.get(t))}getOverlays(e,t){const n=fl();return js.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.Et(e,t,r)})),js.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Rr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Rr.delete(n)),js.resolve()}getOverlaysForCollection(e,t,n){const r=fl(),i=t.length+1,s=new xs(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return js.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new ko(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=fl(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=fl(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return js.resolve(o)}Et(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Rr.get(r.largestBatchId).delete(n.key);this.Rr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new tu(t,n));let i=this.Rr.get(t);void 0===i&&(i=yl(),this.Rr.set(t,i)),this.Rr.set(t,i.add(n.key))}}class Ec{constructor(){this.sessionToken=No.EMPTY_BYTE_STRING}getSessionToken(e){return js.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,js.resolve()}}class kc{constructor(){this.Vr=new Co(_c.mr),this.gr=new Co(_c.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const n=new _c(e,t);this.Vr=this.Vr.add(n),this.gr=this.gr.add(n)}yr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.wr(new _c(e,t))}Sr(e,t){e.forEach((e=>this.removeReference(e,t)))}br(e){const t=new xs(new Ts([])),n=new _c(t,e),r=new _c(t,e+1),i=[];return this.gr.forEachInRange([n,r],(e=>{this.wr(e),i.push(e.key)})),i}Dr(){this.Vr.forEach((e=>this.wr(e)))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new xs(new Ts([])),n=new _c(t,e),r=new _c(t,e+1);let i=yl();return this.gr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new _c(e,0),n=this.Vr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class _c{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return xs.comparator(e.key,t.key)||ps(e.Cr,t.Cr)}static pr(e,t){return ps(e.Cr,t.Cr)||xs.comparator(e.key,t.key)}}class Tc{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Co(_c.mr)}checkEmpty(e){return js.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Zl(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Mr=this.Mr.add(new _c(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return js.resolve(s)}lookupMutationBatch(e,t){return js.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Nr(n),i=r<0?0:r;return js.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return js.resolve(0===this.mutationQueue.length?Bs:this.Fr-1)}getAllMutationBatches(e){return js.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new _c(t,0),r=new _c(t,Number.POSITIVE_INFINITY),i=[];return this.Mr.forEachInRange([n,r],(e=>{const t=this.Or(e.Cr);i.push(t)})),js.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Co(ps);return t.forEach((e=>{const t=new _c(e,0),r=new _c(e,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([t,r],(e=>{n=n.add(e.Cr)}))})),js.resolve(this.Br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;xs.isDocumentKey(i)||(i=i.child(""));const s=new _c(new xs(i),0);let o=new Co(ps);return this.Mr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Cr)),!0)}),s),js.resolve(this.Br(o))}Br(e){const t=[];return e.forEach((e=>{const n=this.Or(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Ji(0===this.Lr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Mr;return js.forEach(t.mutations,(r=>{const i=new _c(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Mr=n}))}qn(e){}containsKey(e,t){const n=new _c(t,0),r=this.Mr.firstAfterOrEqual(n);return js.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,js.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Cc{constructor(e){this.kr=e,this.docs=new ko(xs.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.kr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return js.resolve(n?n.document.mutableCopy():ma.newInvalidDocument(t))}getEntries(e,t){let n=ul();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():ma.newInvalidDocument(e))})),js.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=ul();const s=t.path,o=new xs(s.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Os(Rs(o),n)<=0||(r.has(o.key)||rl(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return js.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Xi()}qr(e,t){return js.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Ic(this)}getSize(e){return js.resolve(this.size)}}class Ic extends vc{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Ir.addEntry(e,r)):this.Ir.removeEntry(n)})),js.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}class xc{constructor(e){this.persistence=e,this.Qr=new al((e=>za(e)),Ba),this.lastRemoteSnapshotVersion=Es.min(),this.highestTargetId=0,this.$r=0,this.Ur=new kc,this.targetCount=0,this.Kr=uc.Un()}forEachTarget(e,t){return this.Qr.forEach(((e,n)=>t(n))),js.resolve()}getLastRemoteSnapshotVersion(e){return js.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return js.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),js.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.$r&&(this.$r=t),js.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Kr=new uc(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,js.resolve()}updateTargetData(e,t){return this.zn(t),js.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,js.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Qr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Qr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),js.waitFor(i).next((()=>r))}getTargetCount(e){return js.resolve(this.targetCount)}getTargetData(e,t){const n=this.Qr.get(t)||null;return js.resolve(n)}addMatchingKeys(e,t,n){return this.Ur.yr(t,n),js.resolve()}removeMatchingKeys(e,t,n){this.Ur.Sr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),js.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),js.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Ur.vr(t);return js.resolve(n)}containsKey(e,t){return js.resolve(this.Ur.containsKey(t))}}class Ac{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new zs(0),this.zr=!1,this.zr=!0,this.jr=new Ec,this.referenceDelegate=e(this),this.Hr=new xc(this),this.indexManager=new ic,this.remoteDocumentCache=function(e){return new Cc(e)}((e=>this.referenceDelegate.Jr(e))),this.serializer=new tc(t),this.Yr=new wc(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Sc,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Wr[e.toKey()];return n||(n=new Tc(t,this.referenceDelegate),this.Wr[e.toKey()]=n),n}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,n){Ki("MemoryPersistence","Starting transaction:",e);const r=new Nc(this.Gr.next());return this.referenceDelegate.Zr(),n(r).next((e=>this.referenceDelegate.Xr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}ei(e,t){return js.or(Object.values(this.Wr).map((n=>()=>n.containsKey(e,t))))}}class Nc extends Ms{constructor(e){super(),this.currentSequenceNumber=e}}class Dc{constructor(e){this.persistence=e,this.ti=new kc,this.ni=null}static ri(e){return new Dc(e)}get ii(){if(this.ni)return this.ni;throw Xi()}addReference(e,t,n){return this.ti.addReference(n,t),this.ii.delete(n.toString()),js.resolve()}removeReference(e,t,n){return this.ti.removeReference(n,t),this.ii.add(n.toString()),js.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),js.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach((e=>this.ii.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.ii.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return js.forEach(this.ii,(n=>{const r=xs.fromPath(n);return this.si(e,r).next((e=>{e||t.removeEntry(r,Es.min())}))})).next((()=>(this.ni=null,t.apply(e))))}updateLimboDocument(e,t){return this.si(e,t).next((e=>{e?this.ii.delete(t.toString()):this.ii.add(t.toString())}))}Jr(e){return 0}si(e,t){return js.or([()=>js.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class Rc{constructor(e,t){this.persistence=e,this.oi=new al((e=>Ks(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=mc(this,t)}static ri(e,t){return new Rc(e,t)}Zr(){}Xr(e){return js.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}sr(e){let t=0;return this.rr(e,(e=>{t++})).next((()=>t))}rr(e,t){return js.forEach(this.oi,((n,r)=>this.ar(e,n,r).next((e=>e?js.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.qr(e,(r=>this.ar(e,r,t).next((e=>{e||(n++,i.removeEntry(r,Es.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),js.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),js.resolve()}removeReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),js.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),js.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ia(e.data.value)),t}ar(e,t,n){return js.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.oi.get(t);return js.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Pc{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Hi=n,this.Ji=r}static Yi(e,t){let n=yl(),r=yl();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Pc(e,t.fromCache,n,r)}}class Oc{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Lc{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=y()?8:Us(v())>0?6:4}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.rs(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ss(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Oc;return this._s(e,t,n).next((r=>{if(i.result=r,this.Xi)return this.us(e,t,n,r.size)}))})).next((()=>i.result))}us(e,t,n,r){return n.documentReadCount<this.es?(Wi()<=M.DEBUG&&Ki("QueryEngine","SDK will not create cache indexes for query:",nl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),js.resolve()):(Wi()<=M.DEBUG&&Ki("QueryEngine","Query:",nl(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ts*r?(Wi()<=M.DEBUG&&Ki("QueryEngine","The SDK decides to create cache indexes for query:",nl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ya(t))):js.resolve())}rs(e,t){if(Ka(t))return js.resolve(null);let n=Ya(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Za(t,null,"F"),n=Ya(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=yl(...r);return this.ns.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.cs(t,r);return this.ls(t,s,i,n.readTime)?this.rs(e,Za(t,null,"F")):this.hs(e,s,t,n)}))))})))))}ss(e,t,n,r){return Ka(t)||r.isEqual(Es.min())?js.resolve(null):this.ns.getDocuments(e,n).next((i=>{const s=this.cs(t,i);return this.ls(t,s,n,r)?js.resolve(null):(Wi()<=M.DEBUG&&Ki("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),nl(t)),this.hs(e,s,t,Ds(r,As)).next((e=>e)))}))}cs(e,t){let n=new Co(sl(e));return t.forEach(((t,r)=>{rl(e,r)&&(n=n.add(r))})),n}ls(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}_s(e,t,n){return Wi()<=M.DEBUG&&Ki("QueryEngine","Using full collection scan to execute query:",nl(t)),this.ns.getDocumentsMatchingQuery(e,t,Ps.min(),n)}hs(e,t,n,r){return this.ns.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}const Mc="LocalStore";class Fc{constructor(e,t,n,r){this.persistence=e,this.Ps=t,this.serializer=r,this.Ts=new ko(ps),this.Is=new al((e=>za(e)),Ba),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(n)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new bc(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ts)))}}function jc(e,t,n,r){return new Fc(e,t,n,r)}async function Uc(e,t){const n=Zi(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.As(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=yl();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({Rs:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function Vc(e){const t=Zi(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Hr.getLastRemoteSnapshotVersion(e)))}function zc(e,t,n){let r=yl(),i=yl();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=ul();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Es.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Ki(Mc,"Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{Vs:r,fs:i}}))}function Bc(e,t){const n=Zi(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=Bs),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function $c(e,t){const n=Zi(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Hr.getTargetData(e,t).next((i=>i?(r=i,js.resolve(r)):n.Hr.allocateTargetId(e).next((i=>(r=new ec(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Hr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.Ts.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(e.targetId,e),n.Is.set(t,e.targetId)),e}))}async function qc(e,t,n){const r=Zi(e),i=r.Ts.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Vs(e))throw e;Ki(Mc,`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ts=r.Ts.remove(t),r.Is.delete(i.target)}function Hc(e,t,n){const r=Zi(e);let i=Es.min(),s=yl();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Zi(e),i=r.Is.get(n);return void 0!==i?js.resolve(r.Ts.get(i)):r.Hr.getTargetData(t,n)}(r,e,Ya(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.Ps.getDocumentsMatchingQuery(e,t,n?i:Es.min(),n?s:yl()))).next((e=>(Wc(r,il(t),e),{documents:e,gs:s})))))}function Wc(e,t,n){let r=e.Es.get(t)||Es.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Es.set(t,r)}class Kc{constructor(){this.activeTargetIds=wl()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Gc{constructor(){this.ho=new Kc,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,n){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Kc,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Qc{To(e){}shutdown(){}}const Yc="ConnectivityMonitor";class Xc{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Ki(Yc,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){Ki(Yc,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Jc=null;function Zc(){return null===Jc?Jc=268435456+Math.round(2147483648*Math.random()):Jc++,"0x"+Jc.toString(16)}const ed="RestConnection",td={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class nd{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${n}/databases/${r}`,this.wo=this.databaseId.database===$o?`project_id=${n}`:`project_id=${n}&database_id=${r}`}So(e,t,n,r,i){const s=Zc(),o=this.bo(e,t.toUriEncodedString());Ki(ed,`Sending RPC '${e}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(a,r,i),this.vo(e,o,a,n).then((t=>(Ki(ed,`Received RPC '${e}' ${s}: `,t),t)),(t=>{throw Qi(ed,`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t}))}Co(e,t,n,r,i,s){return this.So(e,t,n,r,i)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+qi,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}bo(e,t){const n=td[e];return`${this.po}/v1/${t}:${n}`}terminate(){}}class rd{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}const id="WebChannelConnection";class sd extends nd{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,n,r){const i=Zc();return new Promise(((s,o)=>{const a=new Di;a.setWithCredentials(!0),a.listenOnce(Pi.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Oi.NO_ERROR:const t=a.getResponseJson();Ki(id,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case Oi.TIMEOUT:Ki(id,`RPC '${e}' ${i} timed out`),o(new ts(es.DEADLINE_EXCEEDED,"Request time out"));break;case Oi.HTTP_ERROR:const n=a.getStatus();if(Ki(id,`RPC '${e}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(es).indexOf(t)>=0?t:es.UNKNOWN}(t.status);o(new ts(e,t.message))}else o(new ts(es.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new ts(es.UNAVAILABLE,"Connection failed."));break;default:Xi()}}finally{Ki(id,`RPC '${e}' ${i} completed.`)}}));const l=JSON.stringify(r);Ki(id,`RPC '${e}' ${i} sending request:`,r),a.send(t,"POST",l,n,15)}))}Wo(e,t,n){const r=Zc(),i=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=ji(),o=Fi(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const u=i.join("");Ki(id,`Creating RPC '${e}' stream ${r}: ${u}`,a);const c=s.createWebChannel(u,a);let d=!1,h=!1;const f=new rd({Fo:t=>{h?Ki(id,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(Ki(id,`Opening RPC '${e}' stream ${r} transport.`),c.open(),d=!0),Ki(id,`RPC '${e}' stream ${r} sending:`,t),c.send(t))},Mo:()=>c.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(c,Ri.EventType.OPEN,(()=>{h||(Ki(id,`RPC '${e}' stream ${r} transport opened.`),f.Qo())})),p(c,Ri.EventType.CLOSE,(()=>{h||(h=!0,Ki(id,`RPC '${e}' stream ${r} transport closed`),f.Uo())})),p(c,Ri.EventType.ERROR,(t=>{h||(h=!0,Qi(id,`RPC '${e}' stream ${r} transport errored:`,t),f.Uo(new ts(es.UNAVAILABLE,"The operation could not be completed")))})),p(c,Ri.EventType.MESSAGE,(t=>{var n;if(!h){const i=t.data[0];Ji(!!i);const s=i,o=(null==s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Ki(id,`RPC '${e}' stream ${r} received error:`,o);const t=o.status;let n=function(e){const t=ru[e];if(void 0!==t)return ou(t)}(t),i=o.message;void 0===n&&(n=es.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),h=!0,f.Uo(new ts(n,i)),c.close()}else Ki(id,`RPC '${e}' stream ${r} received:`,i),f.Ko(i)}})),p(o,Mi.STAT_EVENT,(t=>{t.stat===Li.PROXY?Ki(id,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===Li.NOPROXY&&Ki(id,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{f.$o()}),0),f}}function od(){return"undefined"!=typeof document?document:null}function ad(e){return new Tu(e,!0)}class ld{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Ti=e,this.timerId=t,this.Go=n,this.zo=r,this.jo=i,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),n=Math.max(0,Date.now()-this.Yo),r=Math.max(0,t-n);r>0&&Ki("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,r,(()=>(this.Yo=Date.now(),e()))),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){null!==this.Jo&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){null!==this.Jo&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}const ud="PersistentStream";class cd{constructor(e,t,n,r,i,s,o,a){this.Ti=e,this.n_=n,this.r_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new ld(e,t)}u_(){return 1===this.state||5===this.state||this.c_()}c_(){return 2===this.state||3===this.state}start(){this.__=0,4!==this.state?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&null===this.s_&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,(()=>this.T_())))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,4!==e?this.a_.reset():t&&t.code===es.RESOURCE_EXHAUSTED?(Gi(t.toString()),Gi("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===es.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.i_===t&&this.V_(n,r)}),(t=>{e((()=>{const e=new ts(es.UNKNOWN,"Fetching auth token failed: "+t.message);return this.m_(e)}))}))}V_(e,t){const n=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo((()=>{n((()=>this.listener.xo()))})),this.stream.No((()=>{n((()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,(()=>(this.c_()&&(this.state=3),Promise.resolve()))),this.listener.No())))})),this.stream.Lo((e=>{n((()=>this.m_(e)))})),this.stream.onMessage((e=>{n((()=>1==++this.__?this.g_(e):this.onNext(e)))}))}l_(){this.state=5,this.a_.Xo((async()=>{this.state=0,this.start()}))}m_(e){return Ki(ud,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget((()=>this.i_===e?t():(Ki(ud,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class dd extends cd{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Xi()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Ji(void 0===t||"string"==typeof t),No.fromBase64String(t||"")):(Ji(void 0===t||t instanceof Buffer||t instanceof Uint8Array),No.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?es.UNKNOWN:ou(e.code);return new ts(t,e.message||"")}(o);n=new vu(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Lu(e,r.document.name),s=Nu(r.document.updateTime),o=r.document.createTime?Nu(r.document.createTime):Es.min(),a=new pa({mapValue:{fields:r.document.fields}}),l=ma.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new gu(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Lu(e,r.document),s=r.readTime?Nu(r.readTime):Es.min(),o=ma.newNoDocument(i,s),a=r.removedTargetIds||[];n=new gu([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Lu(e,r.document),s=r.removedTargetIds||[];n=new gu([],s,i,null)}else{if(!("filter"in t))return Xi();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new nu(r,i),o=e.targetId;n=new mu(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Es.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Es.min():t.readTime?Nu(t.readTime):Es.min()}(e);return this.listener.p_(t,n)}y_(e){const t={};t.database=ju(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=$a(r)?{documents:Bu(e,r)}:{query:$u(e,r).ht},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=xu(e,t.resumeToken);const r=Cu(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Es.min())>0){n.readTime=Iu(e,t.snapshotVersion.toTimestamp());const r=Cu(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Xi()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.I_(t)}w_(e){const t={};t.database=ju(this.serializer),t.removeTarget=e,this.I_(t)}}class hd extends cd{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return Ji(!!e.streamToken),this.lastStreamToken=e.streamToken,Ji(!e.writeResults||0===e.writeResults.length),this.listener.D_()}onNext(e){Ji(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=function(e,t){return e&&e.length>0?(Ji(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Nu(e.updateTime):Nu(t);return n.isEqual(Es.min())&&(n=Nu(t)),new Fl(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Nu(e.commitTime);return this.listener.v_(n,t)}C_(){const e={};e.database=ju(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>zu(this.serializer,e)))};this.I_(t)}}class fd{}class pd extends fd{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.F_=!1}M_(){if(this.F_)throw new ts(es.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.So(e,Ru(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===es.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ts(es.UNKNOWN,e.toString())}))}Co(e,t,n,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.Co(e,Ru(t,n),r,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===es.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ts(es.UNKNOWN,e.toString())}))}terminate(){this.F_=!0,this.connection.terminate()}}class gd{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){0===this.x_&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve()))))}q_(e){"Online"===this.state?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,"Online"===e&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Gi(t),this.N_=!1):Ki("OnlineStateTracker",t)}Q_(){null!==this.O_&&(this.O_.cancel(),this.O_=null)}}const md="RemoteStore";class vd{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=i,this.z_.To((e=>{n.enqueueAndForget((async()=>{Cd(this)&&(Ki(md,"Restarting streams for network reachability change."),await async function(e){const t=Zi(e);t.W_.add(4),await bd(t),t.j_.set("Unknown"),t.W_.delete(4),await yd(t)}(this))}))})),this.j_=new gd(n,r)}}async function yd(e){if(Cd(e))for(const t of e.G_)await t(!0)}async function bd(e){for(const t of e.G_)await t(!1)}function wd(e,t){const n=Zi(e);n.K_.has(t.targetId)||(n.K_.set(t.targetId,t),Td(n)?_d(n):Hd(n).c_()&&Ed(n,t))}function Sd(e,t){const n=Zi(e),r=Hd(n);n.K_.delete(t),r.c_()&&kd(n,t),0===n.K_.size&&(r.c_()?r.P_():Cd(n)&&n.j_.set("Unknown"))}function Ed(e,t){if(e.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Es.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Hd(e).y_(t)}function kd(e,t){e.H_.Ne(t),Hd(e).w_(t)}function _d(e){e.H_=new bu({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>e.K_.get(t)||null,it:()=>e.datastore.serializer.databaseId}),Hd(e).start(),e.j_.B_()}function Td(e){return Cd(e)&&!Hd(e).u_()&&e.K_.size>0}function Cd(e){return 0===Zi(e).W_.size}function Id(e){e.H_=void 0}async function xd(e){e.j_.set("Online")}async function Ad(e){e.K_.forEach(((t,n)=>{Ed(e,t)}))}async function Nd(e,t){Id(e),Td(e)?(e.j_.q_(t),_d(e)):e.j_.set("Unknown")}async function Dd(e,t,n){if(e.j_.set("Online"),t instanceof vu&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.K_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.K_.delete(r),e.H_.removeTarget(r))}(e,t)}catch(n){Ki(md,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Rd(e,n)}else if(t instanceof gu?e.H_.We(t):t instanceof mu?e.H_.Ze(t):e.H_.je(t),!n.isEqual(Es.min()))try{const t=await Vc(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.H_.ot(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.K_.get(r);i&&e.K_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.K_.get(t);if(!r)return;e.K_.set(t,r.withResumeToken(No.EMPTY_BYTE_STRING,r.snapshotVersion)),kd(e,t);const i=new ec(r.target,t,n,r.sequenceNumber);Ed(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Ki(md,"Failed to raise snapshot:",t),await Rd(e,t)}}async function Rd(e,t,n){if(!Vs(t))throw t;e.W_.add(1),await bd(e),e.j_.set("Offline"),n||(n=()=>Vc(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Ki(md,"Retrying IndexedDB access"),await n(),e.W_.delete(1),await yd(e)}))}function Pd(e,t){return t().catch((n=>Rd(e,n,t)))}async function Od(e){const t=Zi(e),n=Wd(t);let r=t.U_.length>0?t.U_[t.U_.length-1].batchId:Bs;for(;Ld(t);)try{const e=await Bc(t.localStore,r);if(null===e){0===t.U_.length&&n.P_();break}r=e.batchId,Md(t,e)}catch(e){await Rd(t,e)}Fd(t)&&jd(t)}function Ld(e){return Cd(e)&&e.U_.length<10}function Md(e,t){e.U_.push(t);const n=Wd(e);n.c_()&&n.S_&&n.b_(t.mutations)}function Fd(e){return Cd(e)&&!Wd(e).u_()&&e.U_.length>0}function jd(e){Wd(e).start()}async function Ud(e){Wd(e).C_()}async function Vd(e){const t=Wd(e);for(const n of e.U_)t.b_(n.mutations)}async function zd(e,t,n){const r=e.U_.shift(),i=eu.from(r,t,n);await Pd(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Od(e)}async function Bd(e,t){t&&Wd(e).S_&&await async function(e,t){if(function(e){return su(e)&&e!==es.ABORTED}(t.code)){const n=e.U_.shift();Wd(e).h_(),await Pd(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Od(e)}}(e,t),Fd(e)&&jd(e)}async function $d(e,t){const n=Zi(e);n.asyncQueue.verifyOperationInProgress(),Ki(md,"RemoteStore received new credentials");const r=Cd(n);n.W_.add(3),await bd(n),r&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.W_.delete(3),await yd(n)}async function qd(e,t){const n=Zi(e);t?(n.W_.delete(2),await yd(n)):t||(n.W_.add(2),await bd(n),n.j_.set("Unknown"))}function Hd(e){return e.J_||(e.J_=function(e,t,n){const r=Zi(e);return r.M_(),new dd(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{xo:xd.bind(null,e),No:Ad.bind(null,e),Lo:Nd.bind(null,e),p_:Dd.bind(null,e)}),e.G_.push((async t=>{t?(e.J_.h_(),Td(e)?_d(e):e.j_.set("Unknown")):(await e.J_.stop(),Id(e))}))),e.J_}function Wd(e){return e.Y_||(e.Y_=function(e,t,n){const r=Zi(e);return r.M_(),new hd(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{xo:()=>Promise.resolve(),No:Ud.bind(null,e),Lo:Bd.bind(null,e),D_:Vd.bind(null,e),v_:zd.bind(null,e)}),e.G_.push((async t=>{t?(e.Y_.h_(),await Od(e)):(await e.Y_.stop(),e.U_.length>0&&(Ki(md,`Stopping write stream with ${e.U_.length} pending writes`),e.U_=[]))}))),e.Y_}class Kd{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new ns,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new Kd(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ts(es.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gd(e,t){if(Gi("AsyncQueue",`${t}: ${e}`),Vs(e))return new ts(es.UNAVAILABLE,`${t}: ${e}`);throw e}class Qd{static emptySet(e){return new Qd(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||xs.comparator(t.key,n.key):(e,t)=>xs.comparator(e.key,t.key),this.keyedMap=dl(),this.sortedSet=new ko(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Qd))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Qd;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Yd{constructor(){this.Z_=new ko(xs.comparator)}track(e){const t=e.doc.key,n=this.Z_.get(t);n?0!==e.type&&3===n.type?this.Z_=this.Z_.insert(t,e):3===e.type&&1!==n.type?this.Z_=this.Z_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Z_=this.Z_.remove(t):1===e.type&&2===n.type?this.Z_=this.Z_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Xi():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Xd{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new Xd(e,t,Qd.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&el(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Jd{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some((e=>e.ra()))}}class Zd{constructor(){this.queries=eh(),this.onlineState="Unknown",this.ia=new Set}terminate(){!function(e,t){const n=Zi(e),r=n.queries;n.queries=eh(),r.forEach(((e,n)=>{for(const r of n.ta)r.onError(t)}))}(this,new ts(es.ABORTED,"Firestore shutting down"))}}function eh(){return new al((e=>tl(e)),el)}async function th(e,t){const n=Zi(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.na()&&t.ra()&&(r=2):(s=new Jd,r=t.ra()?0:1);try{switch(r){case 0:s.ea=await n.onListen(i,!0);break;case 1:s.ea=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Gd(e,`Initialization of query '${nl(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,s),s.ta.push(t),t.sa(n.onlineState),s.ea&&t.oa(s.ea)&&sh(n)}async function nh(e,t){const n=Zi(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.ta.indexOf(t);e>=0&&(s.ta.splice(e,1),0===s.ta.length?i=t.ra()?0:1:!s.na()&&t.ra()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function rh(e,t){const n=Zi(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.ta)e.oa(i)&&(r=!0);t.ea=i}}r&&sh(n)}function ih(e,t,n){const r=Zi(e),i=r.queries.get(t);if(i)for(const s of i.ta)s.onError(n);r.queries.delete(t)}function sh(e){e.ia.forEach((e=>{e.next()}))}var oh,ah;(ah=oh||(oh={}))._a="default",ah.Cache="cache";class lh{constructor(e,t,n){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=n||{}}oa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Xd(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache)return!0;if(!this.ra())return!0;const n="Offline"!==t;return(!this.options.Ta||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Pa(e){e=Xd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==oh.Cache}}class uh{constructor(e){this.key=e}}class ch{constructor(e){this.key=e}}class dh{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=yl(),this.mutatedKeys=yl(),this.ya=sl(e),this.wa=new Qd(this.ya)}get Sa(){return this.fa}ba(e,t){const n=t?t.Da:new Yd,r=t?t.wa:this.wa;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const u=r.get(e),c=rl(this.query,t)?t:null,d=!!u&&this.mutatedKeys.has(u.key),h=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;u&&c?u.data.isEqual(c.data)?d!==h&&(n.track({type:3,doc:c}),f=!0):this.va(u,c)||(n.track({type:2,doc:c}),f=!0,(a&&this.ya(c,a)>0||l&&this.ya(c,l)<0)&&(o=!0)):!u&&c?(n.track({type:0,doc:c}),f=!0):u&&!c&&(n.track({type:1,doc:u}),f=!0,(a||l)&&(o=!0)),f&&(c?(s=s.add(c),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{wa:s,Da:n,ls:o,mutatedKeys:i}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const s=e.Da.X_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xi()}};return n(e)-n(t)}(e.type,t.type)||this.ya(e.doc,t.doc))),this.Ca(n),r=null!=r&&r;const o=t&&!r?this.Fa():[],a=0===this.pa.size&&this.current&&!r?1:0,l=a!==this.ga;return this.ga=a,0!==s.length||l?{snapshot:new Xd(this.query,e.wa,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ma:o}:{Ma:o}}sa(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Yd,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach((e=>this.fa=this.fa.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.fa=this.fa.delete(e))),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=yl(),this.wa.forEach((e=>{this.xa(e.key)&&(this.pa=this.pa.add(e.key))}));const t=[];return e.forEach((e=>{this.pa.has(e)||t.push(new ch(e))})),this.pa.forEach((n=>{e.has(n)||t.push(new uh(n))})),t}Oa(e){this.fa=e.gs,this.pa=yl();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return Xd.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,0===this.ga,this.hasCachedResults)}}const hh="SyncEngine";class fh{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class ph{constructor(e){this.key=e,this.Ba=!1}}class gh{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.La={},this.ka=new al((e=>tl(e)),el),this.qa=new Map,this.Qa=new Set,this.$a=new ko(xs.comparator),this.Ua=new Map,this.Ka=new kc,this.Wa={},this.Ga=new Map,this.za=uc.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return!0===this.ja}}async function mh(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Fh(e);let i;const s=r.ka.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Na()):i=await yh(r,t,n,!0),i}async function vh(e,t){const n=Fh(e);await yh(n,t,!0,!1)}async function yh(e,t,n,r){const i=await $c(e.localStore,Ya(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await bh(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&wd(e.remoteStore,i),a}async function bh(e,t,n,r,i){e.Ha=(t,n,r)=>async function(e,t,n,r){let i=t.view.ba(n);i.ls&&(i=await Hc(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ba(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return Dh(e,t.targetId,a.Ma),a.snapshot}(e,t,n,r);const s=await Hc(e.localStore,t,!0),o=new dh(t,s.gs),a=o.ba(s.documents),l=pu.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=o.applyChanges(a,e.isPrimaryClient,l);Dh(e,n,u.Ma);const c=new fh(t,n,o);return e.ka.set(t,c),e.qa.has(n)?e.qa.get(n).push(t):e.qa.set(n,[t]),u.snapshot}async function wh(e,t,n){const r=Zi(e),i=r.ka.get(t),s=r.qa.get(i.targetId);if(s.length>1)return r.qa.set(i.targetId,s.filter((e=>!el(e,t)))),void r.ka.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await qc(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Sd(r.remoteStore,i.targetId),Ah(r,i.targetId)})).catch(Fs)):(Ah(r,i.targetId),await qc(r.localStore,i.targetId,!0))}async function Sh(e,t){const n=Zi(e),r=n.ka.get(t),i=n.qa.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Sd(n.remoteStore,r.targetId))}async function Eh(e,t){const n=Zi(e);try{const e=await function(e,t){const n=Zi(e),r=t.snapshotVersion;let i=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.ds.newChangeBuffer({trackRemovals:!0});i=n.Ts;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Hr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Hr.addMatchingKeys(e,s.addedDocuments,a))));let u=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?u=u.withResumeToken(No.EMPTY_BYTE_STRING,Es.min()).withLastLimboFreeSnapshotVersion(Es.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,r)),i=i.insert(a,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,u,s)&&o.push(n.Hr.updateTargetData(e,u))}));let a=ul(),l=yl();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(zc(e,s,t.documentUpdates).next((e=>{a=e.Vs,l=e.fs}))),!r.isEqual(Es.min())){const t=n.Hr.getLastRemoteSnapshotVersion(e).next((t=>n.Hr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return js.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.Ts=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Ua.get(t);r&&(Ji(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Ba=!0:e.modifiedDocuments.size>0?Ji(r.Ba):e.removedDocuments.size>0&&(Ji(r.Ba),r.Ba=!1))})),await Oh(n,e,t)}catch(e){await Fs(e)}}function kh(e,t,n){const r=Zi(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ka.forEach(((n,r)=>{const i=r.view.sa(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Zi(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.ta)i.sa(t)&&(r=!0)})),r&&sh(n)}(r.eventManager,t),e.length&&r.La.p_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function _h(e,t,n){const r=Zi(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Ua.get(t),s=i&&i.key;if(s){let e=new ko(xs.comparator);e=e.insert(s,ma.newNoDocument(s,Es.min()));const n=yl().add(s),i=new fu(Es.min(),new Map,new ko(ps),e,n);await Eh(r,i),r.$a=r.$a.remove(s),r.Ua.delete(t),Ph(r)}else await qc(r.localStore,t,!1).then((()=>Ah(r,t,n))).catch(Fs)}async function Th(e,t){const n=Zi(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Zi(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.ds.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=js.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Ji(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=yl();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);xh(n,r,null),Ih(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Oh(n,e)}catch(e){await Fs(e)}}async function Ch(e,t,n){const r=Zi(e);try{const e=await function(e,t){const n=Zi(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Ji(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);xh(r,t,n),Ih(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Oh(r,e)}catch(n){await Fs(n)}}function Ih(e,t){(e.Ga.get(t)||[]).forEach((e=>{e.resolve()})),e.Ga.delete(t)}function xh(e,t,n){const r=Zi(e);let i=r.Wa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Wa[r.currentUser.toKey()]=i}}function Ah(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.qa.get(t))e.ka.delete(r),n&&e.La.Ja(r,n);e.qa.delete(t),e.isPrimaryClient&&e.Ka.br(t).forEach((t=>{e.Ka.containsKey(t)||Nh(e,t)}))}function Nh(e,t){e.Qa.delete(t.path.canonicalString());const n=e.$a.get(t);null!==n&&(Sd(e.remoteStore,n),e.$a=e.$a.remove(t),e.Ua.delete(n),Ph(e))}function Dh(e,t,n){for(const r of n)r instanceof uh?(e.Ka.addReference(r.key,t),Rh(e,r)):r instanceof ch?(Ki(hh,"Document no longer in limbo: "+r.key),e.Ka.removeReference(r.key,t),e.Ka.containsKey(r.key)||Nh(e,r.key)):Xi()}function Rh(e,t){const n=t.key,r=n.path.canonicalString();e.$a.get(n)||e.Qa.has(r)||(Ki(hh,"New document in limbo: "+n),e.Qa.add(r),Ph(e))}function Ph(e){for(;e.Qa.size>0&&e.$a.size<e.maxConcurrentLimboResolutions;){const t=e.Qa.values().next().value;e.Qa.delete(t);const n=new xs(Ts.fromString(t)),r=e.za.next();e.Ua.set(r,new ph(n)),e.$a=e.$a.insert(n,r),wd(e.remoteStore,new ec(Ya(Wa(n.path)),r,"TargetPurposeLimboResolution",zs.ae))}}async function Oh(e,t,n){const r=Zi(e),i=[],s=[],o=[];r.ka.isEmpty()||(r.ka.forEach(((e,a)=>{o.push(r.Ha(a,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Pc.Yi(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.La.p_(i),await async function(e,t){const n=Zi(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>js.forEach(t,(t=>js.forEach(t.Hi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>js.forEach(t.Ji,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Vs(e))throw e;Ki(Mc,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ts.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ts=n.Ts.insert(e,i)}}}(r.localStore,s))}async function Lh(e,t){const n=Zi(e);if(!n.currentUser.isEqual(t)){Ki(hh,"User change. New user:",t.toKey());const e=await Uc(n.localStore,t);n.currentUser=t,function(e,t){e.Ga.forEach((e=>{e.forEach((e=>{e.reject(new ts(es.CANCELLED,t))}))})),e.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Oh(n,e.Rs)}}function Mh(e,t){const n=Zi(e),r=n.Ua.get(t);if(r&&r.Ba)return yl().add(r.key);{let e=yl();const r=n.qa.get(t);if(!r)return e;for(const t of r){const r=n.ka.get(t);e=e.unionWith(r.view.Sa)}return e}}function Fh(e){const t=Zi(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Eh.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Mh.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=_h.bind(null,t),t.La.p_=rh.bind(null,t.eventManager),t.La.Ja=ih.bind(null,t.eventManager),t}function jh(e){const t=Zi(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Th.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Ch.bind(null,t),t}class Uh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ad(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return jc(this.persistence,new Lc,e.initialUser,this.serializer)}Xa(e){return new Ac(Dc.ri,this.serializer)}Za(e){return new Gc}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Uh.provider={build:()=>new Uh};class Vh extends Uh{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){Ji(this.persistence.referenceDelegate instanceof Rc);const n=this.persistence.referenceDelegate.garbageCollector;return new pc(n,e.asyncQueue,t)}Xa(e){const t=void 0!==this.cacheSizeBytes?lc.withCacheSize(this.cacheSizeBytes):lc.DEFAULT;return new Ac((e=>Rc.ri(e,t)),this.serializer)}}class zh{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>kh(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Lh.bind(null,this.syncEngine),await qd(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Zd}createDatastore(e){const t=ad(e.databaseInfo.databaseId),n=function(e){return new sd(e)}(e.databaseInfo);return function(e,t,n,r){return new pd(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new vd(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>kh(this.syncEngine,e,0)),Xc.D()?new Xc:new Qc)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new gh(e,t,n,r,i,s);return o&&(a.ja=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Zi(e);Ki(md,"RemoteStore shutting down."),t.W_.add(5),await bd(t),t.z_.shutdown(),t.j_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}zh.provider={build:()=>new zh};class Bh{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Gi("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const $h="FirestoreClient";class qh{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=$i.UNAUTHENTICATED,this.clientId=fs.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{Ki($h,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Ki($h,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ns;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Gd(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Hh(e,t){e.asyncQueue.verifyOperationInProgress(),Ki($h,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Uc(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Wh(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Kh(e);Ki($h,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>$d(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>$d(t.remoteStore,n))),e._onlineComponents=t}async function Kh(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Ki($h,"Using user provided OfflineComponentProvider");try{await Hh(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===es.FAILED_PRECONDITION||e.code===es.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Qi("Error using user provided cache. Falling back to memory cache: "+n),await Hh(e,new Uh)}}else Ki($h,"Using default OfflineComponentProvider"),await Hh(e,new Vh(void 0));return e._offlineComponents}async function Gh(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Ki($h,"Using user provided OnlineComponentProvider"),await Wh(e,e._uninitializedComponentsProvider._online)):(Ki($h,"Using default OnlineComponentProvider"),await Wh(e,new zh))),e._onlineComponents}function Qh(e){return Gh(e).then((e=>e.syncEngine))}async function Yh(e){const t=await Gh(e),n=t.eventManager;return n.onListen=mh.bind(null,t.syncEngine),n.onUnlisten=wh.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=vh.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Sh.bind(null,t.syncEngine),n}function Xh(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Jh=new Map;function Zh(e,t,n){if(!n)throw new ts(es.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function ef(e){if(!xs.isDocumentKey(e))throw new ts(es.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function tf(e){if(xs.isDocumentKey(e))throw new ts(es.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function nf(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Xi()}function rf(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ts(es.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=nf(e);throw new ts(es.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}const sf="firestore.googleapis.com",of=!0;class af{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new ts(es.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=sf,this.ssl=of}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:of;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=ac;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<dc)throw new ts(es.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new ts(es.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Xh(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new ts(es.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new ts(es.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new ts(es.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lf{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new af({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ts(es.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ts(es.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new af(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new is;switch(e.type){case"firstParty":return new ls(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new ts(es.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Jh.get(e);t&&(Ki("ComponentProvider","Removing Datastore"),Jh.delete(e),t.terminate())}(this),Promise.resolve()}}function uf(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=rf(e,lf))._getSettings(),o=Object.assign(Object.assign({},s),{emulatorOptions:e._getEmulatorOptions()}),a=`${t}:${n}`;s.host!==sf&&s.host!==a&&Qi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=Object.assign(Object.assign({},s),{host:a,ssl:!1,emulatorOptions:r});if(!k(l,o)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=$i.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[u(JSON.stringify({alg:"none",type:"JWT"})),u(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new ts(es.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new $i(s)}e._authCredentials=new ss(new rs(t,n))}}class cf{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new cf(this.firestore,e,this._query)}}class df{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new df(this.firestore,e,this._key)}}class hf extends cf{constructor(e,t,n){super(e,t,Wa(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new df(this.firestore,null,new xs(e))}withConverter(e){return new hf(this.firestore,e,this._path)}}function ff(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=N(e),Zh("collection","path",t),e instanceof lf){const n=Ts.fromString(t,...r);return tf(n),new hf(e,null,n)}{if(!(e instanceof df||e instanceof hf))throw new ts(es.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ts.fromString(t,...r));return tf(n),new hf(e.firestore,null,n)}}function pf(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=N(e),1===arguments.length&&(t=fs.newId()),Zh("doc","path",t),e instanceof lf){const n=Ts.fromString(t,...r);return ef(n),new df(e,null,new xs(n))}{if(!(e instanceof df||e instanceof hf))throw new ts(es.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ts.fromString(t,...r));return ef(n),new df(e.firestore,e instanceof hf?e.converter:null,new xs(n))}}const gf="AsyncQueue";class mf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new ld(this,"async_queue_retry"),this.Su=()=>{const e=od();e&&Ki(gf,"Visibility state changed to "+e.visibilityState),this.a_.t_()},this.bu=e;const t=od();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=od();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise((()=>{}));const t=new ns;return this.vu((()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Vu.push(e),this.Cu())))}async Cu(){if(0!==this.Vu.length){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Vs(e))throw e;Ki(gf,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo((()=>this.Cu()))}}vu(e){const t=this.bu.then((()=>(this.pu=!0,e().catch((e=>{this.gu=e,this.pu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Gi("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.pu=!1,e))))));return this.bu=t,t}enqueueAfterDelay(e,t,n){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const r=Kd.createAndSchedule(this,e,t,n,(e=>this.Fu(e)));return this.fu.push(r),r}Du(){this.gu&&Xi()}verifyOperationInProgress(){}async Mu(){let e;do{e=this.bu,await e}while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then((()=>{this.fu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.fu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Mu()}))}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function vf(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class yf extends lf{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new mf,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mf(e),this._firestoreClient=void 0,await e}}}function bf(e){if(e._terminated)throw new ts(es.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||wf(e),e._firestoreClient}function wf(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Bo(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Xh(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new qh(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class Sf{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Sf(No.fromBase64String(e))}catch(e){throw new ts(es.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Sf(No.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ef{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new ts(es.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Is(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class kf{constructor(e){this._methodName=e}}class _f{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ts(es.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ts(es.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ps(this._lat,e._lat)||ps(this._long,e._long)}}class Tf{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const Cf=/^__.*__$/;class If{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Kl(e,this.data,this.fieldMask,t,this.fieldTransforms):new Wl(e,this.data,t,this.fieldTransforms)}}class xf{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Kl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Af(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xi()}}class Nf{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Bu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Nf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ku({path:n,Qu:!1});return r.$u(e),r}Uu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ku({path:n,Qu:!1});return r.Bu(),r}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Wf(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(0===e.length)throw this.Wu("Document fields must not be empty");if(Af(this.Lu)&&Cf.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class Df{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||ad(e)}ju(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Nf({Lu:e,methodName:t,zu:n,path:Is.emptyPath(),Qu:!1,Gu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Rf(e){const t=e._freezeSettings(),n=ad(e._databaseId);return new Df(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Pf(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.ju(s.merge||s.mergeFields?2:0,t,n,i);Bf("Data must be an object, but it was:",o,r);const a=Vf(r,o);let l,u;if(s.merge)l=new xo(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=$f(t,r,n);if(!o.contains(i))throw new ts(es.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Kf(e,i)||e.push(i)}l=new xo(e),u=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,u=o.fieldTransforms;return new If(new pa(a),l,u)}class Of extends kf{_toFieldTransform(e){if(2!==e.Lu)throw 1===e.Lu?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Of}}class Lf extends kf{_toFieldTransform(e){return new Ml(e.path,new xl)}isEqual(e){return e instanceof Lf}}function Mf(e,t,n,r){const i=e.ju(1,t,n);Bf("Data must be an object, but it was:",i,r);const s=[],o=pa.empty();So(r,((e,r)=>{const a=Hf(t,e,n);r=N(r);const l=i.Uu(a);if(r instanceof Of)s.push(a);else{const e=Uf(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new xo(s);return new xf(o,a,i.fieldTransforms)}function Ff(e,t,n,r,i,s){const o=e.ju(1,t,n),a=[$f(t,r,n)],l=[i];if(s.length%2!=0)throw new ts(es.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push($f(t,s[h])),l.push(s[h+1]);const u=[],c=pa.empty();for(let h=a.length-1;h>=0;--h)if(!Kf(u,a[h])){const e=a[h];let t=l[h];t=N(t);const n=o.Uu(e);if(t instanceof Of)u.push(e);else{const r=Uf(t,n);null!=r&&(u.push(e),c.set(e,r))}}const d=new xo(u);return new xf(c,d,o.fieldTransforms)}function jf(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Uf(n,e.ju(r?4:3,t))}function Uf(e,t){if(zf(e=N(e)))return Bf("Unsupported field value:",t,e),Vf(e,t);if(e instanceof kf)return function(e,t){if(!Af(t.Lu))throw t.Wu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Wu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Qu&&4!==t.Lu)throw t.Wu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Uf(i,t.Ku(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=N(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return kl(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Ss.fromDate(e);return{timestampValue:Iu(t.serializer,n)}}if(e instanceof Ss){const n=new Ss(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Iu(t.serializer,n)}}if(e instanceof _f)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Sf)return{bytesValue:xu(t.serializer,e._byteString)};if(e instanceof df){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Wu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Du(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Tf)return function(e,t){return{mapValue:{fields:{[Ho]:{stringValue:Go},[Qo]:{arrayValue:{values:e.toArray().map((e=>{if("number"!=typeof e)throw t.Wu("VectorValues must only contain numeric values.");return Sl(t.serializer,e)}))}}}}}}(e,t);throw t.Wu(`Unsupported field value: ${nf(e)}`)}(e,t)}function Vf(e,t){const n={};return Eo(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):So(e,((e,r)=>{const i=Uf(r,t.qu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function zf(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ss||e instanceof _f||e instanceof Sf||e instanceof df||e instanceof kf||e instanceof Tf)}function Bf(e,t,n){if(!zf(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=nf(n);throw"an object"===r?t.Wu(e+" a custom object"):t.Wu(e+" "+r)}}function $f(e,t,n){if((t=N(t))instanceof Ef)return t._internalPath;if("string"==typeof t)return Hf(e,t);throw Wf("Field path arguments must be of type string or ",e,!1,void 0,n)}const qf=new RegExp("[~\\*/\\[\\]]");function Hf(e,t,n){if(t.search(qf)>=0)throw Wf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Ef(...t.split("."))._internalPath}catch(r){throw Wf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Wf(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new ts(es.INVALID_ARGUMENT,a+e+l)}function Kf(e,t){return e.some((e=>e.isEqual(t)))}class Gf{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new df(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Qf(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Yf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Qf extends Gf{data(){return super.data()}}function Yf(e,t){return"string"==typeof t?Hf(e,t):t instanceof Ef?t._internalPath:t._delegate._internalPath}function Xf(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new ts(es.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Jf{}class Zf extends Jf{}class ep extends Zf{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new ep(e,t,n)}_apply(e){const t=this._parse(e);return sp(e._query,t),new cf(e.firestore,e.converter,Ja(e._query,t))}_parse(e){const t=Rf(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new ts(es.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){ip(o,s);const t=[];for(const n of o)t.push(rp(r,e,n));a={arrayValue:{values:t}}}else a=rp(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||ip(o,s),a=jf(n,t,o,"in"===s||"not-in"===s);return ka.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class tp extends Jf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new tp(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:_a.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)sp(n,i),n=Ja(n,i)}(e._query,t),new cf(e.firestore,e.converter,Ja(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class np extends Zf{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new np(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new ts(es.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new ts(es.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new wa(t,n)}(e._query,this._field,this._direction);return new cf(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new qa(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function rp(e,t,n){if("string"==typeof(n=N(n))){if(""===n)throw new ts(es.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ga(t)&&-1!==n.indexOf("/"))throw new ts(es.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Ts.fromString(n));if(!xs.isDocumentKey(r))throw new ts(es.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return sa(e,new xs(r))}if(n instanceof df)return sa(e,n._key);throw new ts(es.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${nf(n)}.`)}function ip(e,t){if(!Array.isArray(e)||0===e.length)throw new ts(es.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function sp(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new ts(es.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ts(es.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class op{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Yo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Po(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Oo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Xi()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return So(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t[Qo].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map((e=>Po(e.doubleValue)));return new Tf(i)}convertGeoPoint(e){return new _f(Po(e.latitude),Po(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Vo(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(zo(e));default:return null}}convertTimestamp(e){const t=Ro(e);return new Ss(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Ts.fromString(e);Ji(Zu(n));const r=new qo(n.get(1),n.get(3)),i=new xs(n.popFirst(5));return r.isEqual(t)||Gi(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function ap(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class lp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class up extends Gf{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new cp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Yf("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class cp extends up{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class dp{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new lp(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new cp(this._firestore,this._userDataWriter,n.key,n,new lp(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ts(es.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new cp(e._firestore,e._userDataWriter,n.doc.key,n.doc,new lp(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new cp(e._firestore,e._userDataWriter,t.doc.key,t.doc,new lp(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:hp(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function hp(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xi()}}class fp extends op{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sf(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new df(this.firestore,null,t)}}function pp(e,t,n){e=rf(e,df);const r=rf(e.firestore,yf),i=Rf(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=N(t))||t instanceof Ef?Ff(i,"updateDoc",e._key,t,n,a):Mf(i,"updateDoc",e._key,t),gp(r,[s.toMutation(e._key,jl.exists(!0))])}function gp(e,t){return function(e,t){const n=new ns;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=jh(e);try{const e=await function(e,t){const n=Zi(e),r=Ss.now(),i=t.reduce(((e,t)=>e.add(t.key)),yl());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=ul(),l=yl();return n.ds.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=ql(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Kl(e.key,t,ga(t.value.mapValue),jl.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:hl(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Wa[e.currentUser.toKey()];r||(r=new ko(ps)),r=r.insert(t,n),e.Wa[e.currentUser.toKey()]=r}(r,e.batchId,n),await Oh(r,e.changes),await Od(r.remoteStore)}catch(e){const t=Gd(e,"Failed to persist write");n.reject(t)}}(await Qh(e),t,n))),n.promise}(bf(e),t)}function mp(e,t,n){const r=n.docs.get(t._key),i=new fp(e);return new up(e,i,t._key,r,new lp(n.hasPendingWrites,n.fromCache),t.converter)}function vp(){return new Lf("serverTimestamp")}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){qi=e}(He),Ve(new D("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new yf(new os(e.getProvider("auth-internal")),new cs(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ts(es.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qo(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Ge(zi,Bi,e),Ge(zi,Bi,"esm2017")}();var yp=n(6550),bp=n.n(yp),wp=n(2092);const Sp="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;function Ep(e){const t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function kp(e){return"nodeType"in e}function _p(e){var t,n;return e?Ep(e)?e:kp(e)&&null!=(t=null==(n=e.ownerDocument)?void 0:n.defaultView)?t:window:window}function Tp(e){const{Document:t}=_p(e);return e instanceof t}function Cp(e){return!Ep(e)&&e instanceof _p(e).HTMLElement}function Ip(e){return e instanceof _p(e).SVGElement}function xp(e){return e?Ep(e)?e.document:kp(e)?Tp(e)?e:Cp(e)||Ip(e)?e.ownerDocument:document:document:document}const Ap=Sp?yp.useLayoutEffect:yp.useEffect;function Np(e){const t=(0,yp.useRef)(e);return Ap((()=>{t.current=e})),(0,yp.useCallback)((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)}),[])}function Dp(e,t){void 0===t&&(t=[e]);const n=(0,yp.useRef)(e);return Ap((()=>{n.current!==e&&(n.current=e)}),t),n}function Rp(e,t){const n=(0,yp.useRef)();return(0,yp.useMemo)((()=>{const t=e(n.current);return n.current=t,t}),[...t])}function Pp(e){const t=Np(e),n=(0,yp.useRef)(null),r=(0,yp.useCallback)((e=>{e!==n.current&&(null==t||t(e,n.current)),n.current=e}),[]);return[n,r]}function Op(e){const t=(0,yp.useRef)();return(0,yp.useEffect)((()=>{t.current=e}),[e]),t.current}let Lp={};function Mp(e,t){return(0,yp.useMemo)((()=>{if(t)return t;const n=null==Lp[e]?0:Lp[e]+1;return Lp[e]=n,e+"-"+n}),[e,t])}function Fp(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce(((t,n)=>{const r=Object.entries(n);for(const[i,s]of r){const n=t[i];null!=n&&(t[i]=n+e*s)}return t}),{...t})}}const jp=Fp(1),Up=Fp(-1);function Vp(e){if(!e)return!1;const{KeyboardEvent:t}=_p(e.target);return t&&e instanceof t}function zp(e){if(function(e){if(!e)return!1;const{TouchEvent:t}=_p(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return function(e){return"clientX"in e&&"clientY"in e}(e)?{x:e.clientX,y:e.clientY}:null}const Bp=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Bp.Translate.toString(e),Bp.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),$p="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function qp(e){return e.matches($p)?e:e.querySelector($p)}const Hp={display:"none"};function Wp(e){let{id:t,value:n}=e;return bp().createElement("div",{id:t,style:Hp},n)}function Kp(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;return bp().createElement("div",{id:t,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":r,"aria-atomic":!0},n)}const Gp=(0,yp.createContext)(null);const Qp={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},Yp={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Xp(e){let{announcements:t=Yp,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=Qp}=e;const{announce:s,announcement:o}=function(){const[e,t]=(0,yp.useState)("");return{announce:(0,yp.useCallback)((e=>{null!=e&&t(e)}),[]),announcement:e}}(),a=Mp("DndLiveRegion"),[l,u]=(0,yp.useState)(!1);if((0,yp.useEffect)((()=>{u(!0)}),[]),function(e){const t=(0,yp.useContext)(Gp);(0,yp.useEffect)((()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)}),[e,t])}((0,yp.useMemo)((()=>({onDragStart(e){let{active:n}=e;s(t.onDragStart({active:n}))},onDragMove(e){let{active:n,over:r}=e;t.onDragMove&&s(t.onDragMove({active:n,over:r}))},onDragOver(e){let{active:n,over:r}=e;s(t.onDragOver({active:n,over:r}))},onDragEnd(e){let{active:n,over:r}=e;s(t.onDragEnd({active:n,over:r}))},onDragCancel(e){let{active:n,over:r}=e;s(t.onDragCancel({active:n,over:r}))}})),[s,t])),!l)return null;const c=bp().createElement(bp().Fragment,null,bp().createElement(Wp,{id:r,value:i.draggable}),bp().createElement(Kp,{id:a,announcement:o}));return n?(0,wp.createPortal)(c,n):c}var Jp;function Zp(){}function eg(e,t){return(0,yp.useMemo)((()=>({sensor:e,options:null!=t?t:{}})),[e,t])}!function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"}(Jp||(Jp={}));const tg=Object.freeze({x:0,y:0});function ng(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function rg(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function ig(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function sg(e){let{left:t,top:n,height:r,width:i}=e;return[{x:t,y:n},{x:t+i,y:n},{x:t,y:n+r},{x:t+i,y:n+r}]}function og(e,t){if(!e||0===e.length)return null;const[n]=e;return t?n[t]:n}function ag(e,t,n){return void 0===t&&(t=e.left),void 0===n&&(n=e.top),{x:t+.5*e.width,y:n+.5*e.height}}const lg=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=ag(t,t.left,t.top),s=[];for(const o of r){const{id:e}=o,t=n.get(e);if(t){const n=ng(ag(t),i);s.push({id:e,data:{droppableContainer:o,value:n}})}}return s.sort(rg)};function ug(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height),o=i-r,a=s-n;if(r<i&&n<s){const n=t.width*t.height,r=e.width*e.height,i=o*a;return Number((i/(n+r-i)).toFixed(4))}return 0}const cg=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=[];for(const s of r){const{id:e}=s,r=n.get(e);if(r){const n=ug(r,t);n>0&&i.push({id:e,data:{droppableContainer:s,value:n}})}}return i.sort(ig)};function dg(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:tg}function hg(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce(((t,n)=>({...t,top:t.top+e*n.y,bottom:t.bottom+e*n.y,left:t.left+e*n.x,right:t.right+e*n.x})),{...t})}}const fg=hg(1);function pg(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}const gg={ignoreTransform:!1};function mg(e,t){void 0===t&&(t=gg);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:t,transformOrigin:r}=_p(e).getComputedStyle(e);t&&(n=function(e,t,n){const r=pg(t);if(!r)return e;const{scaleX:i,scaleY:s,x:o,y:a}=r,l=e.left-o-(1-i)*parseFloat(n),u=e.top-a-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),c=i?e.width/i:e.width,d=s?e.height/s:e.height;return{width:c,height:d,top:u,right:l+c,bottom:u+d,left:l}}(n,t,r))}const{top:r,left:i,width:s,height:o,bottom:a,right:l}=n;return{top:r,left:i,width:s,height:o,bottom:a,right:l}}function vg(e){return mg(e,{ignoreTransform:!0})}function yg(e,t){const n=[];return e?function r(i){if(null!=t&&n.length>=t)return n;if(!i)return n;if(Tp(i)&&null!=i.scrollingElement&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!Cp(i)||Ip(i))return n;if(n.includes(i))return n;const s=_p(e).getComputedStyle(i);return i!==e&&function(e,t){void 0===t&&(t=_p(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some((e=>{const r=t[e];return"string"===typeof r&&n.test(r)}))}(i,s)&&n.push(i),function(e,t){return void 0===t&&(t=_p(e).getComputedStyle(e)),"fixed"===t.position}(i,s)?n:r(i.parentNode)}(e):n}function bg(e){const[t]=yg(e,1);return null!=t?t:null}function wg(e){return Sp&&e?Ep(e)?e:kp(e)?Tp(e)||e===xp(e).scrollingElement?window:Cp(e)?e:null:null:null}function Sg(e){return Ep(e)?e.scrollX:e.scrollLeft}function Eg(e){return Ep(e)?e.scrollY:e.scrollTop}function kg(e){return{x:Sg(e),y:Eg(e)}}var _g;function Tg(e){return!(!Sp||!e)&&e===document.scrollingElement}function Cg(e){const t={x:0,y:0},n=Tg(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height};return{isTop:e.scrollTop<=t.y,isLeft:e.scrollLeft<=t.x,isBottom:e.scrollTop>=r.y,isRight:e.scrollLeft>=r.x,maxScroll:r,minScroll:t}}!function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"}(_g||(_g={}));const Ig={x:.2,y:.2};function xg(e,t,n,r,i){let{top:s,left:o,right:a,bottom:l}=n;void 0===r&&(r=10),void 0===i&&(i=Ig);const{isTop:u,isBottom:c,isLeft:d,isRight:h}=Cg(e),f={x:0,y:0},p={x:0,y:0},g=t.height*i.y,m=t.width*i.x;return!u&&s<=t.top+g?(f.y=_g.Backward,p.y=r*Math.abs((t.top+g-s)/g)):!c&&l>=t.bottom-g&&(f.y=_g.Forward,p.y=r*Math.abs((t.bottom-g-l)/g)),!h&&a>=t.right-m?(f.x=_g.Forward,p.x=r*Math.abs((t.right-m-a)/m)):!d&&o<=t.left+m&&(f.x=_g.Backward,p.x=r*Math.abs((t.left+m-o)/m)),{direction:f,speed:p}}function Ag(e){if(e===document.scrollingElement){const{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}const{top:t,left:n,right:r,bottom:i}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:i,width:e.clientWidth,height:e.clientHeight}}function Ng(e){return e.reduce(((e,t)=>jp(e,kg(t))),tg)}function Dg(e,t){if(void 0===t&&(t=mg),!e)return;const{top:n,left:r,bottom:i,right:s}=t(e);bg(e)&&(i<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Rg=[["x",["left","right"],function(e){return e.reduce(((e,t)=>e+Sg(t)),0)}],["y",["top","bottom"],function(e){return e.reduce(((e,t)=>e+Eg(t)),0)}]];class Pg{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=yg(t),r=Ng(n);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,s,o]of Rg)for(const e of s)Object.defineProperty(this,e,{get:()=>{const t=o(n),s=r[i]-t;return this.rect[e]+s},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Og{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach((e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)}))},this.target=e}add(e,t,n){var r;null==(r=this.target)||r.addEventListener(e,t,n),this.listeners.push([e,t,n])}}function Lg(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return"number"===typeof t?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t&&r>t.y}var Mg,Fg;function jg(e){e.preventDefault()}function Ug(e){e.stopPropagation()}!function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"}(Mg||(Mg={})),function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"}(Fg||(Fg={}));const Vg={start:[Fg.Space,Fg.Enter],cancel:[Fg.Esc],end:[Fg.Space,Fg.Enter,Fg.Tab]},zg=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case Fg.Right:return{...n,x:n.x+25};case Fg.Left:return{...n,x:n.x-25};case Fg.Down:return{...n,y:n.y+25};case Fg.Up:return{...n,y:n.y-25}}};class Bg{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new Og(xp(t)),this.windowListeners=new Og(_p(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Mg.Resize,this.handleCancel),this.windowListeners.add(Mg.VisibilityChange,this.handleCancel),setTimeout((()=>this.listeners.add(Mg.Keydown,this.handleKeyDown)))}handleStart(){const{activeNode:e,onStart:t}=this.props,n=e.node.current;n&&Dg(n),t(tg)}handleKeyDown(e){if(Vp(e)){const{active:t,context:n,options:r}=this.props,{keyboardCodes:i=Vg,coordinateGetter:s=zg,scrollBehavior:o="smooth"}=r,{code:a}=e;if(i.end.includes(a))return void this.handleEnd(e);if(i.cancel.includes(a))return void this.handleCancel(e);const{collisionRect:l}=n.current,u=l?{x:l.left,y:l.top}:tg;this.referenceCoordinates||(this.referenceCoordinates=u);const c=s(e,{active:t,context:n.current,currentCoordinates:u});if(c){const t=Up(c,u),r={x:0,y:0},{scrollableAncestors:i}=n.current;for(const n of i){const i=e.code,{isTop:s,isRight:a,isLeft:l,isBottom:u,maxScroll:d,minScroll:h}=Cg(n),f=Ag(n),p={x:Math.min(i===Fg.Right?f.right-f.width/2:f.right,Math.max(i===Fg.Right?f.left:f.left+f.width/2,c.x)),y:Math.min(i===Fg.Down?f.bottom-f.height/2:f.bottom,Math.max(i===Fg.Down?f.top:f.top+f.height/2,c.y))},g=i===Fg.Right&&!a||i===Fg.Left&&!l,m=i===Fg.Down&&!u||i===Fg.Up&&!s;if(g&&p.x!==c.x){const e=n.scrollLeft+t.x,s=i===Fg.Right&&e<=d.x||i===Fg.Left&&e>=h.x;if(s&&!t.y)return void n.scrollTo({left:e,behavior:o});r.x=s?n.scrollLeft-e:i===Fg.Right?n.scrollLeft-d.x:n.scrollLeft-h.x,r.x&&n.scrollBy({left:-r.x,behavior:o});break}if(m&&p.y!==c.y){const e=n.scrollTop+t.y,s=i===Fg.Down&&e<=d.y||i===Fg.Up&&e>=h.y;if(s&&!t.x)return void n.scrollTo({top:e,behavior:o});r.y=s?n.scrollTop-e:i===Fg.Down?n.scrollTop-d.y:n.scrollTop-h.y,r.y&&n.scrollBy({top:-r.y,behavior:o});break}}this.handleMove(e,jp(Up(c,this.referenceCoordinates),r))}}}handleMove(e,t){const{onMove:n}=this.props;e.preventDefault(),n(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function $g(e){return Boolean(e&&"distance"in e)}function qg(e){return Boolean(e&&"delay"in e)}Bg.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=Vg,onActivation:i}=t,{active:s}=n;const{code:o}=e.nativeEvent;if(r.start.includes(o)){const t=s.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==i||i({event:e.nativeEvent}),!0)}return!1}}];class Hg{constructor(e,t,n){var r;void 0===n&&(n=function(e){const{EventTarget:t}=_p(e);return e instanceof t?e:xp(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:i}=e,{target:s}=i;this.props=e,this.events=t,this.document=xp(s),this.documentListeners=new Og(this.document),this.listeners=new Og(n),this.windowListeners=new Og(_p(s)),this.initialCoordinates=null!=(r=zp(i))?r:tg,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Mg.Resize,this.handleCancel),this.windowListeners.add(Mg.DragStart,jg),this.windowListeners.add(Mg.VisibilityChange,this.handleCancel),this.windowListeners.add(Mg.ContextMenu,jg),this.documentListeners.add(Mg.Keydown,this.handleKeydown),t){if(null!=n&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(qg(t))return this.timeoutId=setTimeout(this.handleStart,t.delay),void this.handlePending(t);if($g(t))return void this.handlePending(t)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:n,onPending:r}=this.props;r(n,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(Mg.Click,Ug,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Mg.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:n,initialCoordinates:r,props:i}=this,{onMove:s,options:{activationConstraint:o}}=i;if(!r)return;const a=null!=(t=zp(e))?t:tg,l=Up(r,a);if(!n&&o){if($g(o)){if(null!=o.tolerance&&Lg(l,o.tolerance))return this.handleCancel();if(Lg(l,o.distance))return this.handleStart()}return qg(o)&&Lg(l,o.tolerance)?this.handleCancel():void this.handlePending(o,l)}e.cancelable&&e.preventDefault(),s(a)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===Fg.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}const Wg={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Kg extends Hg{constructor(e){const{event:t}=e,n=xp(t.target);super(e,Wg,n)}}Kg.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!(!n.isPrimary||0!==n.button)&&(null==r||r({event:n}),!0)}}];const Gg={move:{name:"mousemove"},end:{name:"mouseup"}};var Qg;!function(e){e[e.RightClick=2]="RightClick"}(Qg||(Qg={}));(class extends Hg{constructor(e){super(e,Gg,xp(e.event.target))}}).activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button!==Qg.RightClick&&(null==r||r({event:n}),!0)}}];const Yg={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};var Xg,Jg;function Zg(e){let{acceleration:t,activator:n=Xg.Pointer,canScroll:r,draggingRect:i,enabled:s,interval:o=5,order:a=Jg.TreeOrder,pointerCoordinates:l,scrollableAncestors:u,scrollableAncestorRects:c,delta:d,threshold:h}=e;const f=function(e){let{delta:t,disabled:n}=e;const r=Op(t);return Rp((e=>{if(n||!r||!e)return em;const i={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[_g.Backward]:e.x[_g.Backward]||-1===i.x,[_g.Forward]:e.x[_g.Forward]||1===i.x},y:{[_g.Backward]:e.y[_g.Backward]||-1===i.y,[_g.Forward]:e.y[_g.Forward]||1===i.y}}}),[n,t,r])}({delta:d,disabled:!s}),[p,g]=function(){const e=(0,yp.useRef)(null);return[(0,yp.useCallback)(((t,n)=>{e.current=setInterval(t,n)}),[]),(0,yp.useCallback)((()=>{null!==e.current&&(clearInterval(e.current),e.current=null)}),[])]}(),m=(0,yp.useRef)({x:0,y:0}),v=(0,yp.useRef)({x:0,y:0}),y=(0,yp.useMemo)((()=>{switch(n){case Xg.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case Xg.DraggableRect:return i}}),[n,i,l]),b=(0,yp.useRef)(null),w=(0,yp.useCallback)((()=>{const e=b.current;if(!e)return;const t=m.current.x*v.current.x,n=m.current.y*v.current.y;e.scrollBy(t,n)}),[]),S=(0,yp.useMemo)((()=>a===Jg.TreeOrder?[...u].reverse():u),[a,u]);(0,yp.useEffect)((()=>{if(s&&u.length&&y){for(const e of S){if(!1===(null==r?void 0:r(e)))continue;const n=u.indexOf(e),i=c[n];if(!i)continue;const{direction:s,speed:a}=xg(e,i,y,t,h);for(const e of["x","y"])f[e][s[e]]||(a[e]=0,s[e]=0);if(a.x>0||a.y>0)return g(),b.current=e,p(w,o),m.current=a,void(v.current=s)}m.current={x:0,y:0},v.current={x:0,y:0},g()}else g()}),[t,w,r,g,s,o,JSON.stringify(y),JSON.stringify(f),p,u,S,c,JSON.stringify(h)])}(class extends Hg{constructor(e){super(e,Yg)}static setup(){return window.addEventListener(Yg.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Yg.move.name,e)};function e(){}}}).activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:i}=n;return!(i.length>1)&&(null==r||r({event:n}),!0)}}],function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"}(Xg||(Xg={})),function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"}(Jg||(Jg={}));const em={x:{[_g.Backward]:!1,[_g.Forward]:!1},y:{[_g.Backward]:!1,[_g.Forward]:!1}};var tm,nm;!function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"}(tm||(tm={})),function(e){e.Optimized="optimized"}(nm||(nm={}));const rm=new Map;function im(e,t){return Rp((n=>e?n||("function"===typeof t?t(e):e):null),[t,e])}function sm(e){let{callback:t,disabled:n}=e;const r=Np(t),i=(0,yp.useMemo)((()=>{if(n||"undefined"===typeof window||"undefined"===typeof window.ResizeObserver)return;const{ResizeObserver:e}=window;return new e(r)}),[n]);return(0,yp.useEffect)((()=>()=>null==i?void 0:i.disconnect()),[i]),i}function om(e){return new Pg(mg(e),e)}function am(e,t,n){void 0===t&&(t=om);const[r,i]=(0,yp.useState)(null);function s(){i((r=>{if(!e)return null;var i;if(!1===e.isConnected)return null!=(i=null!=r?r:n)?i:null;const s=t(e);return JSON.stringify(r)===JSON.stringify(s)?r:s}))}const o=function(e){let{callback:t,disabled:n}=e;const r=Np(t),i=(0,yp.useMemo)((()=>{if(n||"undefined"===typeof window||"undefined"===typeof window.MutationObserver)return;const{MutationObserver:e}=window;return new e(r)}),[r,n]);return(0,yp.useEffect)((()=>()=>null==i?void 0:i.disconnect()),[i]),i}({callback(t){if(e)for(const n of t){const{type:t,target:r}=n;if("childList"===t&&r instanceof HTMLElement&&r.contains(e)){s();break}}}}),a=sm({callback:s});return Ap((()=>{s(),e?(null==a||a.observe(e),null==o||o.observe(document.body,{childList:!0,subtree:!0})):(null==a||a.disconnect(),null==o||o.disconnect())}),[e]),r}const lm=[];function um(e,t){void 0===t&&(t=[]);const n=(0,yp.useRef)(null);return(0,yp.useEffect)((()=>{n.current=null}),t),(0,yp.useEffect)((()=>{const t=e!==tg;t&&!n.current&&(n.current=e),!t&&n.current&&(n.current=null)}),[e]),n.current?Up(e,n.current):tg}function cm(e){return(0,yp.useMemo)((()=>e?function(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}(e):null),[e])}const dm=[];function hm(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Cp(t)?t:e}const fm=[{sensor:Kg,options:{}},{sensor:Bg,options:{}}],pm={current:{}},gm={draggable:{measure:vg},droppable:{measure:vg,strategy:tm.WhileDragging,frequency:nm.Optimized},dragOverlay:{measure:mg}};class mm extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter((e=>{let{disabled:t}=e;return!t}))}getNodeFor(e){var t,n;return null!=(t=null==(n=this.get(e))?void 0:n.node.current)?t:void 0}}const vm={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new mm,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Zp},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:gm,measureDroppableContainers:Zp,windowRect:null,measuringScheduled:!1},ym={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Zp,draggableNodes:new Map,over:null,measureDroppableContainers:Zp},bm=(0,yp.createContext)(ym),wm=(0,yp.createContext)(vm);function Sm(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new mm}}}function Em(e,t){switch(t.type){case Jp.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Jp.DragMove:return null==e.draggable.active?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Jp.DragEnd:case Jp.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Jp.RegisterDroppable:{const{element:n}=t,{id:r}=n,i=new mm(e.droppable.containers);return i.set(r,n),{...e,droppable:{...e.droppable,containers:i}}}case Jp.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const o=new mm(e.droppable.containers);return o.set(n,{...s,disabled:i}),{...e,droppable:{...e.droppable,containers:o}}}case Jp.UnregisterDroppable:{const{id:n,key:r}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const s=new mm(e.droppable.containers);return s.delete(n),{...e,droppable:{...e.droppable,containers:s}}}default:return e}}function km(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:i}=(0,yp.useContext)(bm),s=Op(r),o=Op(null==n?void 0:n.id);return(0,yp.useEffect)((()=>{if(!t&&!r&&s&&null!=o){if(!Vp(s))return;if(document.activeElement===s.target)return;const e=i.get(o);if(!e)return;const{activatorNode:t,node:n}=e;if(!t.current&&!n.current)return;requestAnimationFrame((()=>{for(const e of[t.current,n.current]){if(!e)continue;const t=qp(e);if(t){t.focus();break}}}))}}),[r,t,i,o,s]),null}function _m(e,t){let{transform:n,...r}=t;return null!=e&&e.length?e.reduce(((e,t)=>t({transform:e,...r})),n):n}const Tm=(0,yp.createContext)({...tg,scaleX:1,scaleY:1});var Cm;!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"}(Cm||(Cm={}));const Im=(0,yp.memo)((function(e){var t,n,r,i;let{id:s,accessibility:o,autoScroll:a=!0,children:l,sensors:u=fm,collisionDetection:c=cg,measuring:d,modifiers:h,...f}=e;const p=(0,yp.useReducer)(Em,void 0,Sm),[g,m]=p,[v,y]=function(){const[e]=(0,yp.useState)((()=>new Set)),t=(0,yp.useCallback)((t=>(e.add(t),()=>e.delete(t))),[e]);return[(0,yp.useCallback)((t=>{let{type:n,event:r}=t;e.forEach((e=>{var t;return null==(t=e[n])?void 0:t.call(e,r)}))}),[e]),t]}(),[b,w]=(0,yp.useState)(Cm.Uninitialized),S=b===Cm.Initialized,{draggable:{active:E,nodes:k,translate:_},droppable:{containers:T}}=g,C=null!=E?k.get(E):null,I=(0,yp.useRef)({initial:null,translated:null}),x=(0,yp.useMemo)((()=>{var e;return null!=E?{id:E,data:null!=(e=null==C?void 0:C.data)?e:pm,rect:I}:null}),[E,C]),A=(0,yp.useRef)(null),[N,D]=(0,yp.useState)(null),[R,P]=(0,yp.useState)(null),O=Dp(f,Object.values(f)),L=Mp("DndDescribedBy",s),M=(0,yp.useMemo)((()=>T.getEnabled()),[T]),F=(j=d,(0,yp.useMemo)((()=>({draggable:{...gm.draggable,...null==j?void 0:j.draggable},droppable:{...gm.droppable,...null==j?void 0:j.droppable},dragOverlay:{...gm.dragOverlay,...null==j?void 0:j.dragOverlay}})),[null==j?void 0:j.draggable,null==j?void 0:j.droppable,null==j?void 0:j.dragOverlay]));var j;const{droppableRects:U,measureDroppableContainers:V,measuringScheduled:z}=function(e,t){let{dragging:n,dependencies:r,config:i}=t;const[s,o]=(0,yp.useState)(null),{frequency:a,measure:l,strategy:u}=i,c=(0,yp.useRef)(e),d=function(){switch(u){case tm.Always:return!1;case tm.BeforeDragging:return n;default:return!n}}(),h=Dp(d),f=(0,yp.useCallback)((function(e){void 0===e&&(e=[]),h.current||o((t=>null===t?e:t.concat(e.filter((e=>!t.includes(e))))))}),[h]),p=(0,yp.useRef)(null),g=Rp((t=>{if(d&&!n)return rm;if(!t||t===rm||c.current!==e||null!=s){const t=new Map;for(let n of e){if(!n)continue;if(s&&s.length>0&&!s.includes(n.id)&&n.rect.current){t.set(n.id,n.rect.current);continue}const e=n.node.current,r=e?new Pg(l(e),e):null;n.rect.current=r,r&&t.set(n.id,r)}return t}return t}),[e,s,n,d,l]);return(0,yp.useEffect)((()=>{c.current=e}),[e]),(0,yp.useEffect)((()=>{d||f()}),[n,d]),(0,yp.useEffect)((()=>{s&&s.length>0&&o(null)}),[JSON.stringify(s)]),(0,yp.useEffect)((()=>{d||"number"!==typeof a||null!==p.current||(p.current=setTimeout((()=>{f(),p.current=null}),a))}),[a,d,f,...r]),{droppableRects:g,measureDroppableContainers:f,measuringScheduled:null!=s}}(M,{dragging:S,dependencies:[_.x,_.y],config:F.droppable}),B=function(e,t){const n=null!=t?e.get(t):void 0,r=n?n.node.current:null;return Rp((e=>{var n;return null==t?null:null!=(n=null!=r?r:e)?n:null}),[r,t])}(k,E),$=(0,yp.useMemo)((()=>R?zp(R):null),[R]),q=function(){const e=!1===(null==N?void 0:N.autoScrollEnabled),t="object"===typeof a?!1===a.enabled:!1===a,n=S&&!e&&!t;if("object"===typeof a)return{...a,enabled:n};return{enabled:n}}(),H=function(e,t){return im(e,t)}(B,F.draggable.measure);!function(e){let{activeNode:t,measure:n,initialRect:r,config:i=!0}=e;const s=(0,yp.useRef)(!1),{x:o,y:a}="boolean"===typeof i?{x:i,y:i}:i;Ap((()=>{if(!o&&!a||!t)return void(s.current=!1);if(s.current||!r)return;const e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;const i=dg(n(e),r);if(o||(i.x=0),a||(i.y=0),s.current=!0,Math.abs(i.x)>0||Math.abs(i.y)>0){const t=bg(e);t&&t.scrollBy({top:i.y,left:i.x})}}),[t,o,a,r,n])}({activeNode:null!=E?k.get(E):null,config:q.layoutShiftCompensation,initialRect:H,measure:F.draggable.measure});const W=am(B,F.draggable.measure,H),K=am(B?B.parentElement:null),G=(0,yp.useRef)({activatorEvent:null,active:null,activeNode:B,collisionRect:null,collisions:null,droppableRects:U,draggableNodes:k,draggingNode:null,draggingNodeRect:null,droppableContainers:T,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Q=T.getNodeFor(null==(t=G.current.over)?void 0:t.id),Y=function(e){let{measure:t}=e;const[n,r]=(0,yp.useState)(null),i=sm({callback:(0,yp.useCallback)((e=>{for(const{target:n}of e)if(Cp(n)){r((e=>{const r=t(n);return e?{...e,width:r.width,height:r.height}:r}));break}}),[t])}),s=(0,yp.useCallback)((e=>{const n=hm(e);null==i||i.disconnect(),n&&(null==i||i.observe(n)),r(n?t(n):null)}),[t,i]),[o,a]=Pp(s);return(0,yp.useMemo)((()=>({nodeRef:o,rect:n,setRef:a})),[n,o,a])}({measure:F.dragOverlay.measure}),X=null!=(n=Y.nodeRef.current)?n:B,J=S?null!=(r=Y.rect)?r:W:null,Z=Boolean(Y.nodeRef.current&&Y.rect),ee=dg(te=Z?null:W,im(te));var te;const ne=cm(X?_p(X):null),re=function(e){const t=(0,yp.useRef)(e),n=Rp((n=>e?n&&n!==lm&&e&&t.current&&e.parentNode===t.current.parentNode?n:yg(e):lm),[e]);return(0,yp.useEffect)((()=>{t.current=e}),[e]),n}(S?null!=Q?Q:B:null),ie=function(e,t){void 0===t&&(t=mg);const[n]=e,r=cm(n?_p(n):null),[i,s]=(0,yp.useState)(dm);function o(){s((()=>e.length?e.map((e=>Tg(e)?r:new Pg(t(e),e))):dm))}const a=sm({callback:o});return Ap((()=>{null==a||a.disconnect(),o(),e.forEach((e=>null==a?void 0:a.observe(e)))}),[e]),i}(re),se=_m(h,{transform:{x:_.x-ee.x,y:_.y-ee.y,scaleX:1,scaleY:1},activatorEvent:R,active:x,activeNodeRect:W,containerNodeRect:K,draggingNodeRect:J,over:G.current.over,overlayNodeRect:Y.rect,scrollableAncestors:re,scrollableAncestorRects:ie,windowRect:ne}),oe=$?jp($,_):null,ae=function(e){const[t,n]=(0,yp.useState)(null),r=(0,yp.useRef)(e),i=(0,yp.useCallback)((e=>{const t=wg(e.target);t&&n((e=>e?(e.set(t,kg(t)),new Map(e)):null))}),[]);return(0,yp.useEffect)((()=>{const t=r.current;if(e!==t){s(t);const o=e.map((e=>{const t=wg(e);return t?(t.addEventListener("scroll",i,{passive:!0}),[t,kg(t)]):null})).filter((e=>null!=e));n(o.length?new Map(o):null),r.current=e}return()=>{s(e),s(t)};function s(e){e.forEach((e=>{const t=wg(e);null==t||t.removeEventListener("scroll",i)}))}}),[i,e]),(0,yp.useMemo)((()=>e.length?t?Array.from(t.values()).reduce(((e,t)=>jp(e,t)),tg):Ng(e):tg),[e,t])}(re),le=um(ae),ue=um(ae,[W]),ce=jp(se,le),de=J?fg(J,se):null,he=x&&de?c({active:x,collisionRect:de,droppableRects:U,droppableContainers:M,pointerCoordinates:oe}):null,fe=og(he,"id"),[pe,ge]=(0,yp.useState)(null),me=function(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}(Z?se:jp(se,ue),null!=(i=null==pe?void 0:pe.rect)?i:null,W),ve=(0,yp.useRef)(null),ye=(0,yp.useCallback)(((e,t)=>{let{sensor:n,options:r}=t;if(null==A.current)return;const i=k.get(A.current);if(!i)return;const s=e.nativeEvent,o=new n({active:A.current,activeNode:i,event:s,options:r,context:G,onAbort(e){if(!k.get(e))return;const{onDragAbort:t}=O.current,n={id:e};null==t||t(n),v({type:"onDragAbort",event:n})},onPending(e,t,n,r){if(!k.get(e))return;const{onDragPending:i}=O.current,s={id:e,constraint:t,initialCoordinates:n,offset:r};null==i||i(s),v({type:"onDragPending",event:s})},onStart(e){const t=A.current;if(null==t)return;const n=k.get(t);if(!n)return;const{onDragStart:r}=O.current,i={activatorEvent:s,active:{id:t,data:n.data,rect:I}};(0,wp.unstable_batchedUpdates)((()=>{null==r||r(i),w(Cm.Initializing),m({type:Jp.DragStart,initialCoordinates:e,active:t}),v({type:"onDragStart",event:i}),D(ve.current),P(s)}))},onMove(e){m({type:Jp.DragMove,coordinates:e})},onEnd:a(Jp.DragEnd),onCancel:a(Jp.DragCancel)});function a(e){return async function(){const{active:t,collisions:n,over:r,scrollAdjustedTranslate:i}=G.current;let o=null;if(t&&i){const{cancelDrop:a}=O.current;if(o={activatorEvent:s,active:t,collisions:n,delta:i,over:r},e===Jp.DragEnd&&"function"===typeof a){await Promise.resolve(a(o))&&(e=Jp.DragCancel)}}A.current=null,(0,wp.unstable_batchedUpdates)((()=>{m({type:e}),w(Cm.Uninitialized),ge(null),D(null),P(null),ve.current=null;const t=e===Jp.DragEnd?"onDragEnd":"onDragCancel";if(o){const e=O.current[t];null==e||e(o),v({type:t,event:o})}}))}}ve.current=o}),[k]),be=(0,yp.useCallback)(((e,t)=>(n,r)=>{const i=n.nativeEvent,s=k.get(r);if(null!==A.current||!s||i.dndKit||i.defaultPrevented)return;const o={active:s};!0===e(n,t.options,o)&&(i.dndKit={capturedBy:t.sensor},A.current=r,ye(n,t))}),[k,ye]),we=function(e,t){return(0,yp.useMemo)((()=>e.reduce(((e,n)=>{const{sensor:r}=n;return[...e,...r.activators.map((e=>({eventName:e.eventName,handler:t(e.handler,n)})))]}),[])),[e,t])}(u,be);!function(e){(0,yp.useEffect)((()=>{if(!Sp)return;const t=e.map((e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()}));return()=>{for(const e of t)null==e||e()}}),e.map((e=>{let{sensor:t}=e;return t})))}(u),Ap((()=>{W&&b===Cm.Initializing&&w(Cm.Initialized)}),[W,b]),(0,yp.useEffect)((()=>{const{onDragMove:e}=O.current,{active:t,activatorEvent:n,collisions:r,over:i}=G.current;if(!t||!n)return;const s={active:t,activatorEvent:n,collisions:r,delta:{x:ce.x,y:ce.y},over:i};(0,wp.unstable_batchedUpdates)((()=>{null==e||e(s),v({type:"onDragMove",event:s})}))}),[ce.x,ce.y]),(0,yp.useEffect)((()=>{const{active:e,activatorEvent:t,collisions:n,droppableContainers:r,scrollAdjustedTranslate:i}=G.current;if(!e||null==A.current||!t||!i)return;const{onDragOver:s}=O.current,o=r.get(fe),a=o&&o.rect.current?{id:o.id,rect:o.rect.current,data:o.data,disabled:o.disabled}:null,l={active:e,activatorEvent:t,collisions:n,delta:{x:i.x,y:i.y},over:a};(0,wp.unstable_batchedUpdates)((()=>{ge(a),null==s||s(l),v({type:"onDragOver",event:l})}))}),[fe]),Ap((()=>{G.current={activatorEvent:R,active:x,activeNode:B,collisionRect:de,collisions:he,droppableRects:U,draggableNodes:k,draggingNode:X,draggingNodeRect:J,droppableContainers:T,over:pe,scrollableAncestors:re,scrollAdjustedTranslate:ce},I.current={initial:J,translated:de}}),[x,B,he,de,k,X,J,U,T,pe,re,ce]),Zg({...q,delta:_,draggingRect:de,pointerCoordinates:oe,scrollableAncestors:re,scrollableAncestorRects:ie});const Se=(0,yp.useMemo)((()=>({active:x,activeNode:B,activeNodeRect:W,activatorEvent:R,collisions:he,containerNodeRect:K,dragOverlay:Y,draggableNodes:k,droppableContainers:T,droppableRects:U,over:pe,measureDroppableContainers:V,scrollableAncestors:re,scrollableAncestorRects:ie,measuringConfiguration:F,measuringScheduled:z,windowRect:ne})),[x,B,W,R,he,K,Y,k,T,U,pe,V,re,ie,F,z,ne]),Ee=(0,yp.useMemo)((()=>({activatorEvent:R,activators:we,active:x,activeNodeRect:W,ariaDescribedById:{draggable:L},dispatch:m,draggableNodes:k,over:pe,measureDroppableContainers:V})),[R,we,x,W,m,L,k,pe,V]);return bp().createElement(Gp.Provider,{value:y},bp().createElement(bm.Provider,{value:Ee},bp().createElement(wm.Provider,{value:Se},bp().createElement(Tm.Provider,{value:me},l)),bp().createElement(km,{disabled:!1===(null==o?void 0:o.restoreFocus)})),bp().createElement(Xp,{...o,hiddenTextDescribedById:L}))})),xm=(0,yp.createContext)(null),Am="button";function Nm(e){let{id:t,data:n,disabled:r=!1,attributes:i}=e;const s=Mp("Draggable"),{activators:o,activatorEvent:a,active:l,activeNodeRect:u,ariaDescribedById:c,draggableNodes:d,over:h}=(0,yp.useContext)(bm),{role:f=Am,roleDescription:p="draggable",tabIndex:g=0}=null!=i?i:{},m=(null==l?void 0:l.id)===t,v=(0,yp.useContext)(m?Tm:xm),[y,b]=Pp(),[w,S]=Pp(),E=function(e,t){return(0,yp.useMemo)((()=>e.reduce(((e,n)=>{let{eventName:r,handler:i}=n;return e[r]=e=>{i(e,t)},e}),{})),[e,t])}(o,t),k=Dp(n);Ap((()=>(d.set(t,{id:t,key:s,node:y,activatorNode:w,data:k}),()=>{const e=d.get(t);e&&e.key===s&&d.delete(t)})),[d,t]);return{active:l,activatorEvent:a,activeNodeRect:u,attributes:(0,yp.useMemo)((()=>({role:f,tabIndex:g,"aria-disabled":r,"aria-pressed":!(!m||f!==Am)||void 0,"aria-roledescription":p,"aria-describedby":c.draggable})),[r,f,g,m,p,c.draggable]),isDragging:m,listeners:r?void 0:E,node:y,over:h,setNodeRef:b,setActivatorNodeRef:S,transform:v}}function Dm(){return(0,yp.useContext)(wm)}const Rm={timeout:25};function Pm(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function Om(e,t){return e.reduce(((e,n,r)=>{const i=t.get(n);return i&&(e[r]=i),e}),Array(e.length))}function Lm(e){return null!==e&&e>=0}const Mm={scaleX:1,scaleY:1},Fm=e=>{var t;let{rects:n,activeNodeRect:r,activeIndex:i,overIndex:s,index:o}=e;const a=null!=(t=n[i])?t:r;if(!a)return null;const l=function(e,t,n){const r=e[t],i=e[t-1],s=e[t+1];if(!r||!i&&!s)return 0;if(n<t)return i?r.left-(i.left+i.width):s.left-(r.left+r.width);return s?s.left-(r.left+r.width):r.left-(i.left+i.width)}(n,o,i);if(o===i){const e=n[s];return e?{x:i<s?e.left+e.width-(a.left+a.width):e.left-a.left,y:0,...Mm}:null}return o>i&&o<=s?{x:-a.width-l,y:0,...Mm}:o<i&&o>=s?{x:a.width+l,y:0,...Mm}:{x:0,y:0,...Mm}};const jm=e=>{let{rects:t,activeIndex:n,overIndex:r,index:i}=e;const s=Pm(t,r,n),o=t[i],a=s[i];return a&&o?{x:a.left-o.left,y:a.top-o.top,scaleX:a.width/o.width,scaleY:a.height/o.height}:null};const Um="Sortable",Vm=bp().createContext({activeIndex:-1,containerId:Um,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:jm,disabled:{draggable:!1,droppable:!1}});function zm(e){let{children:t,id:n,items:r,strategy:i=jm,disabled:s=!1}=e;const{active:o,dragOverlay:a,droppableRects:l,over:u,measureDroppableContainers:c}=Dm(),d=Mp(Um,n),h=Boolean(null!==a.rect),f=(0,yp.useMemo)((()=>r.map((e=>"object"===typeof e&&"id"in e?e.id:e))),[r]),p=null!=o,g=o?f.indexOf(o.id):-1,m=u?f.indexOf(u.id):-1,v=(0,yp.useRef)(f),y=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(f,v.current),b=-1!==m&&-1===g||y,w=function(e){return"boolean"===typeof e?{draggable:e,droppable:e}:e}(s);Ap((()=>{y&&p&&c(f)}),[y,f,p,c]),(0,yp.useEffect)((()=>{v.current=f}),[f]);const S=(0,yp.useMemo)((()=>({activeIndex:g,containerId:d,disabled:w,disableTransforms:b,items:f,overIndex:m,useDragOverlay:h,sortedRects:Om(f,l),strategy:i})),[g,d,w.draggable,w.droppable,b,f,m,l,h,i]);return bp().createElement(Vm.Provider,{value:S},t)}const Bm=e=>{let{id:t,items:n,activeIndex:r,overIndex:i}=e;return Pm(n,r,i).indexOf(t)},$m=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:i,items:s,newIndex:o,previousItems:a,previousContainerId:l,transition:u}=e;return!(!u||!r)&&((a===s||i!==o)&&(!!n||o!==i&&t===l))},qm={duration:200,easing:"ease"},Hm="transform",Wm=Bp.Transition.toString({property:Hm,duration:0,easing:"linear"}),Km={roleDescription:"sortable"};function Gm(e){let{animateLayoutChanges:t=$m,attributes:n,disabled:r,data:i,getNewIndex:s=Bm,id:o,strategy:a,resizeObserverConfig:l,transition:u=qm}=e;const{items:c,containerId:d,activeIndex:h,disabled:f,disableTransforms:p,sortedRects:g,overIndex:m,useDragOverlay:v,strategy:y}=(0,yp.useContext)(Vm),b=function(e,t){var n,r;if("boolean"===typeof e)return{draggable:e,droppable:!1};return{draggable:null!=(n=null==e?void 0:e.draggable)?n:t.draggable,droppable:null!=(r=null==e?void 0:e.droppable)?r:t.droppable}}(r,f),w=c.indexOf(o),S=(0,yp.useMemo)((()=>({sortable:{containerId:d,index:w,items:c},...i})),[d,i,w,c]),E=(0,yp.useMemo)((()=>c.slice(c.indexOf(o))),[c,o]),{rect:k,node:_,isOver:T,setNodeRef:C}=function(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:i}=e;const s=Mp("Droppable"),{active:o,dispatch:a,over:l,measureDroppableContainers:u}=(0,yp.useContext)(bm),c=(0,yp.useRef)({disabled:n}),d=(0,yp.useRef)(!1),h=(0,yp.useRef)(null),f=(0,yp.useRef)(null),{disabled:p,updateMeasurementsFor:g,timeout:m}={...Rm,...i},v=Dp(null!=g?g:r),y=sm({callback:(0,yp.useCallback)((()=>{d.current?(null!=f.current&&clearTimeout(f.current),f.current=setTimeout((()=>{u(Array.isArray(v.current)?v.current:[v.current]),f.current=null}),m)):d.current=!0}),[m]),disabled:p||!o}),b=(0,yp.useCallback)(((e,t)=>{y&&(t&&(y.unobserve(t),d.current=!1),e&&y.observe(e))}),[y]),[w,S]=Pp(b),E=Dp(t);return(0,yp.useEffect)((()=>{y&&w.current&&(y.disconnect(),d.current=!1,y.observe(w.current))}),[w,y]),(0,yp.useEffect)((()=>(a({type:Jp.RegisterDroppable,element:{id:r,key:s,disabled:n,node:w,rect:h,data:E}}),()=>a({type:Jp.UnregisterDroppable,key:s,id:r}))),[r]),(0,yp.useEffect)((()=>{n!==c.current.disabled&&(a({type:Jp.SetDroppableDisabled,id:r,key:s,disabled:n}),c.current.disabled=n)}),[r,s,n,a]),{active:o,rect:h,isOver:(null==l?void 0:l.id)===r,node:w,over:l,setNodeRef:S}}({id:o,data:S,disabled:b.droppable,resizeObserverConfig:{updateMeasurementsFor:E,...l}}),{active:I,activatorEvent:x,activeNodeRect:A,attributes:N,setNodeRef:D,listeners:R,isDragging:P,over:O,setActivatorNodeRef:L,transform:M}=Nm({id:o,data:S,attributes:{...Km,...n},disabled:b.draggable}),F=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,yp.useMemo)((()=>e=>{t.forEach((t=>t(e)))}),t)}(C,D),j=Boolean(I),U=j&&!p&&Lm(h)&&Lm(m),V=!v&&P,z=V&&U?M:null,B=U?null!=z?z:(null!=a?a:y)({rects:g,activeNodeRect:A,activeIndex:h,overIndex:m,index:w}):null,$=Lm(h)&&Lm(m)?s({id:o,items:c,activeIndex:h,overIndex:m}):w,q=null==I?void 0:I.id,H=(0,yp.useRef)({activeId:q,items:c,newIndex:$,containerId:d}),W=c!==H.current.items,K=t({active:I,containerId:d,isDragging:P,isSorting:j,id:o,index:w,items:c,newIndex:H.current.newIndex,previousItems:H.current.items,previousContainerId:H.current.containerId,transition:u,wasDragging:null!=H.current.activeId}),G=function(e){let{disabled:t,index:n,node:r,rect:i}=e;const[s,o]=(0,yp.useState)(null),a=(0,yp.useRef)(n);return Ap((()=>{if(!t&&n!==a.current&&r.current){const e=i.current;if(e){const t=mg(r.current,{ignoreTransform:!0}),n={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(n.x||n.y)&&o(n)}}n!==a.current&&(a.current=n)}),[t,n,r,i]),(0,yp.useEffect)((()=>{s&&o(null)}),[s]),s}({disabled:!K,index:w,node:_,rect:k});return(0,yp.useEffect)((()=>{j&&H.current.newIndex!==$&&(H.current.newIndex=$),d!==H.current.containerId&&(H.current.containerId=d),c!==H.current.items&&(H.current.items=c)}),[j,$,d,c]),(0,yp.useEffect)((()=>{if(q===H.current.activeId)return;if(null!=q&&null==H.current.activeId)return void(H.current.activeId=q);const e=setTimeout((()=>{H.current.activeId=q}),50);return()=>clearTimeout(e)}),[q]),{active:I,activeIndex:h,attributes:N,data:S,rect:k,index:w,newIndex:$,items:c,isOver:T,isSorting:j,isDragging:P,listeners:R,node:_,overIndex:m,over:O,setNodeRef:F,setActivatorNodeRef:L,setDroppableNodeRef:C,setDraggableNodeRef:D,transform:null!=G?G:B,transition:function(){if(G||W&&H.current.newIndex===w)return Wm;if(V&&!Vp(x)||!u)return;if(j||K)return Bp.Transition.toString({...u,property:Hm});return}()}}function Qm(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&"object"===typeof t.sortable&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const Ym=[Fg.Down,Fg.Right,Fg.Up,Fg.Left],Xm=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:i,droppableContainers:s,over:o,scrollableAncestors:a}}=t;if(Ym.includes(e.code)){if(e.preventDefault(),!n||!r)return;const t=[];s.getEnabled().forEach((n=>{if(!n||null!=n&&n.disabled)return;const s=i.get(n.id);if(s)switch(e.code){case Fg.Down:r.top<s.top&&t.push(n);break;case Fg.Up:r.top>s.top&&t.push(n);break;case Fg.Left:r.left>s.left&&t.push(n);break;case Fg.Right:r.left<s.left&&t.push(n)}}));const l=(e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=sg(t),s=[];for(const o of r){const{id:e}=o,t=n.get(e);if(t){const n=sg(t),r=i.reduce(((e,t,r)=>e+ng(n[r],t)),0),a=Number((r/4).toFixed(4));s.push({id:e,data:{droppableContainer:o,value:a}})}}return s.sort(rg)})({active:n,collisionRect:r,droppableRects:i,droppableContainers:t,pointerCoordinates:null});let u=og(l,"id");if(u===(null==o?void 0:o.id)&&l.length>1&&(u=l[1].id),null!=u){const e=s.get(n.id),t=s.get(u),o=t?i.get(t.id):null,l=null==t?void 0:t.node.current;if(l&&o&&e&&t){const n=yg(l).some(((e,t)=>a[t]!==e)),i=Jm(e,t),s=function(e,t){if(!Qm(e)||!Qm(t))return!1;if(!Jm(e,t))return!1;return e.data.current.sortable.index<t.data.current.sortable.index}(e,t),u=n||!i?{x:0,y:0}:{x:s?r.width-o.width:0,y:s?r.height-o.height:0},c={x:o.left,y:o.top};return u.x&&u.y?c:Up(c,u)}}}};function Jm(e,t){return!(!Qm(e)||!Qm(t))&&e.data.current.sortable.containerId===t.data.current.sortable.containerId}var Zm=n(579);const ev=e=>{let{text:t}=e;return(0,Zm.jsx)("span",{title:t,style:{cursor:"help",marginLeft:"4px",borderBottom:"1px dotted gray"},children:"?"})},tv=e=>{let{onSave:t,onClose:n,initialData:i,firstInputRef:s}=e;const o=!!i,[a,l]=(0,r.useState)((null===i||void 0===i?void 0:i.purchaseStatus)||"Purchased"),[u,c]=(0,r.useState)((null===i||void 0===i?void 0:i.deliveryName)||""),[d,h]=(0,r.useState)((null===i||void 0===i?void 0:i.productName)||""),[f,p]=(0,r.useState)((null===i||void 0===i?void 0:i.quantity)||""),[g,m]=(0,r.useState)((null===i||void 0===i?void 0:i.pricePerItem)||""),[v,y]=(0,r.useState)((null===i||void 0===i?void 0:i.orderNumber)||""),[b,w]=(0,r.useState)((()=>(null===i||void 0===i?void 0:i.orderDate)||(new Date).toISOString().split("T")[0])),[S,E]=(0,r.useState)((null===i||void 0===i?void 0:i.seller)||""),[k,_]=(0,r.useState)((null===i||void 0===i?void 0:i.isVatRegistered)||"Unknown"),[T,C]=(0,r.useState)((null===i||void 0===i?void 0:i.destination)||""),[I,x]=(0,r.useState)((null===i||void 0===i?void 0:i.asinSku)||""),[A,N]=(0,r.useState)((null===i||void 0===i?void 0:i.acquisitionNotes)||""),[D,R]=(0,r.useState)((null===i||void 0===i?void 0:i.isFlagged)||!1),[P,O]=(0,r.useState)({});(0,r.useEffect)((()=>{i&&(l(i.purchaseStatus||"Purchased"),c(i.deliveryName||""),h(i.productName||""),p(i.quantity||""),m(i.pricePerItem||""),y(i.orderNumber||""),w(i.orderDate||(new Date).toISOString().split("T")[0]),E(i.seller||""),_(i.isVatRegistered||"Unknown"),C(i.destination||""),x(i.asinSku||""),N(i.acquisitionNotes||""),R(i.isFlagged||!1),O({}))}),[i]);const L={marginBottom:"15px"},M={display:"block",marginBottom:"5px",fontWeight:"bold"},F={width:"calc(100% - 16px)",padding:"8px"},j={color:"red",fontSize:"0.8em",marginTop:"4px"};return(0,Zm.jsxs)("div",{style:{backgroundColor:"white",padding:"20px",border:"1px solid #ccc",borderRadius:"8px",maxWidth:"500px",margin:"20px auto"},children:[" ",(0,Zm.jsx)("h3",{children:o?"Edit Stock Item":"Add New Stock Item"}),(0,Zm.jsxs)("form",{onSubmit:e=>{e.preventDefault(),console.log("AddItemForm: handleSubmit",{deliveryName:u,productName:d,quantity:f,pricePerItem:g,orderDate:b,seller:S,destination:T,acquisitionNotes:A,isFlagged:D});const n=(()=>{const e={};return u.trim()||(e.deliveryName="Delivery Name is required."),d.trim()||(e.productName="Product Name is required."),(""===f||f<=0)&&(e.quantity="Quantity must be a positive number."),(""===g||g<0)&&(e.pricePerItem="Price must be zero or positive."),b||(e.orderDate="Order Date is required."),O(e),0===Object.keys(e).length})();console.log("AddItemForm: validation result",n,P),n?(console.log("AddItemForm: form valid, calling onSave"),t({purchaseStatus:a,deliveryName:u,productName:d,quantity:Number(f),pricePerItem:Number(g),orderNumber:v||void 0,orderDate:b,seller:S||void 0,isVatRegistered:"Unknown"===k?void 0:k,destination:T||void 0,asinSku:I||void 0,acquisitionNotes:A||void 0,isFlagged:D})):console.log("AddItemForm: form invalid, errors:",P)},children:[(0,Zm.jsxs)("div",{style:L,children:[(0,Zm.jsxs)("label",{style:M,htmlFor:"deliveryName",children:["Delivery Name",(0,Zm.jsx)(ev,{text:"Group items arriving together with a unique name. Helps find them later. Example: eBay Batch Apr 16"})]}),(0,Zm.jsx)("input",{ref:s,id:"deliveryName",type:"text",value:u,onChange:e=>c(e.target.value),style:F}),P.deliveryName&&(0,Zm.jsx)("div",{style:j,children:P.deliveryName})]}),(0,Zm.jsxs)("div",{style:L,children:[(0,Zm.jsxs)("label",{style:M,htmlFor:"productName",children:["Product Name",(0,Zm.jsx)(ev,{text:"The common name of the item. Example: Blue Widget Model X"})]}),(0,Zm.jsx)("input",{id:"productName",type:"text",value:d,onChange:e=>h(e.target.value),style:F}),P.productName&&(0,Zm.jsx)("div",{style:j,children:P.productName})]}),(0,Zm.jsxs)("div",{style:L,children:[(0,Zm.jsxs)("label",{style:M,htmlFor:"quantity",children:["Quantity",(0,Zm.jsx)(ev,{text:"How many units of this item are included? Example: 50"})]}),(0,Zm.jsx)("input",{id:"quantity",type:"number",value:f,onChange:e=>p(""===e.target.value?"":Number(e.target.value)),style:F,min:"1"}),P.quantity&&(0,Zm.jsx)("div",{style:j,children:P.quantity})]}),(0,Zm.jsxs)("div",{style:L,children:[(0,Zm.jsxs)("label",{style:M,htmlFor:"pricePerItem",children:["Price Per Item",(0,Zm.jsx)(ev,{text:"The cost for one single unit. Example: 12.50"})]}),(0,Zm.jsx)("input",{id:"pricePerItem",type:"number",value:g,onChange:e=>m(""===e.target.value?"":Number(e.target.value)),style:F,min:"0",step:"0.01"}),P.pricePerItem&&(0,Zm.jsx)("div",{style:j,children:P.pricePerItem})]}),(0,Zm.jsxs)("div",{style:L,children:[(0,Zm.jsxs)("label",{style:M,htmlFor:"orderDate",children:["Order Date",(0,Zm.jsx)(ev,{text:"The date the item was purchased or the return initiated."})]}),(0,Zm.jsx)("input",{id:"orderDate",type:"date",value:b,onChange:e=>w(e.target.value),style:F}),P.orderDate&&(0,Zm.jsx)("div",{style:j,children:P.orderDate})]}),(0,Zm.jsxs)("div",{style:L,children:[(0,Zm.jsxs)("label",{style:M,htmlFor:"purchaseStatus",children:["Purchase Status",(0,Zm.jsx)(ev,{text:"What is the origin of this item?"})]}),(0,Zm.jsxs)("select",{id:"purchaseStatus",value:a,onChange:e=>l(e.target.value),style:F,children:[(0,Zm.jsx)("option",{value:"Purchased",children:"Purchased"}),(0,Zm.jsx)("option",{value:"Ordered",children:"Ordered"}),(0,Zm.jsx)("option",{value:"Return Expected",children:"Return Expected"})]})]}),(0,Zm.jsxs)("div",{style:L,children:[(0,Zm.jsxs)("label",{style:M,htmlFor:"orderNumber",children:["Order Number",(0,Zm.jsx)(ev,{text:"Optional: External reference like eBay order ID or PO number. Example: 12-34567-89012"})]}),(0,Zm.jsx)("input",{id:"orderNumber",type:"text",value:v,onChange:e=>y(e.target.value),style:F})]}),(0,Zm.jsxs)("div",{style:L,children:[(0,Zm.jsxs)("label",{style:M,htmlFor:"seller",children:["Seller / Source",(0,Zm.jsx)(ev,{text:"Optional: Who did this item come from? Example: ebay_seller_123 or Customer Name (Return)"})]}),(0,Zm.jsx)("input",{id:"seller",type:"text",value:S,onChange:e=>E(e.target.value),style:F})]}),(0,Zm.jsxs)("div",{style:L,children:[(0,Zm.jsxs)("label",{style:M,htmlFor:"isVatRegistered",children:["Seller VAT Registered?",(0,Zm.jsx)(ev,{text:"Optional: Is the seller registered for VAT?"})]}),(0,Zm.jsxs)("select",{id:"isVatRegistered",value:k,onChange:e=>_(e.target.value),style:F,children:[(0,Zm.jsx)("option",{value:"Unknown",children:"Unknown"}),(0,Zm.jsx)("option",{value:"Yes",children:"Yes"}),(0,Zm.jsx)("option",{value:"No",children:"No"})]})]}),(0,Zm.jsxs)("div",{style:L,children:[(0,Zm.jsxs)("label",{style:M,htmlFor:"destination",children:["Planned Destination",(0,Zm.jsx)(ev,{text:"Optional: Where is this item intended to go after processing? Example: FBA Prep"})]}),(0,Zm.jsxs)("select",{value:["FBA Prep","Local Stock Shelf A","Refurbish Pile","Return to Supplier"].includes(T)?T:"Other",onChange:e=>{"Other"===e.target.value?C(""):C(e.target.value)},style:{...F,width:"auto",marginRight:"10px"},children:[(0,Zm.jsx)("option",{value:"FBA Prep",children:"FBA Prep"}),(0,Zm.jsx)("option",{value:"Local Stock Shelf A",children:"Local Stock Shelf A"}),(0,Zm.jsx)("option",{value:"Refurbish Pile",children:"Refurbish Pile"}),(0,Zm.jsx)("option",{value:"Return to Supplier",children:"Return to Supplier"}),(0,Zm.jsx)("option",{value:"Other",children:"Other (Specify Below)"})]}),(0,Zm.jsx)("input",{type:"text",placeholder:"Specify destination...",value:T,onChange:e=>C(e.target.value),style:{...F,width:"calc(50% - 26px)"}})]}),(0,Zm.jsxs)("div",{style:L,children:[(0,Zm.jsxs)("label",{style:M,htmlFor:"asinSku",children:["ASIN / SKU",(0,Zm.jsx)(ev,{text:"Optional: Amazon ASIN or internal SKU. Helps link inventory. Example: B0C1EXAMPLE / BLUE-WIDGET-XL"})]}),(0,Zm.jsx)("input",{id:"asinSku",type:"text",value:I,onChange:e=>x(e.target.value),style:F})]}),(0,Zm.jsxs)("div",{style:L,children:[(0,Zm.jsxs)("label",{style:M,htmlFor:"acquisitionNotes",children:["Acquisition Notes",(0,Zm.jsx)(ev,{text:"Optional: Any specific notes from the purchase, order, or return request. Example: Seller mentioned slight scratch."})]}),(0,Zm.jsx)("textarea",{id:"acquisitionNotes",value:A,onChange:e=>N(e.target.value),style:{...F,height:"60px"}})]}),(0,Zm.jsxs)("div",{style:{...L,display:"flex",alignItems:"center"},children:[(0,Zm.jsx)("input",{type:"checkbox",id:"isFlagged",checked:D,onChange:e=>R(e.target.checked),style:{marginRight:"10px"}}),(0,Zm.jsxs)("label",{htmlFor:"isFlagged",style:{fontWeight:"normal"},children:[" ","Flag this item for follow-up",(0,Zm.jsx)(ev,{text:"Check this box to mark the item with a flag for easy filtering later."})]})]}),(0,Zm.jsxs)("div",{style:{marginTop:"20px",textAlign:"right"},children:[(0,Zm.jsx)("button",{type:"button",onClick:n,style:{marginRight:"10px",padding:"8px 15px"},children:"Cancel"}),(0,Zm.jsx)("button",{type:"submit",style:{padding:"8px 15px",fontWeight:"bold"},children:o?"Update Item":"Save Item"})]})]})]})},nv=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return void 0===e||null===e||""===e?(0,Zm.jsx)("span",{style:{color:"#888"},children:"N/A"}):`${t}${e}${n}`},rv=e=>{var t;const n=new Date(e.timestamp).toLocaleString();switch(e.type){case"CREATED":return`${n}: Item Created`;case"EDITED":return`${n}: Item Edited (${(null===(t=e.details.changedFields)||void 0===t?void 0:t.join(", "))||"details"} changed)`;case"STATUS_CHANGED":return`${n}: Status changed from ${e.details.previousStatus||"?"} to ${e.details.newStatus||"?"}`;case"FLAG_TOGGLED":return`${n}: Item ${e.details.isFlagged?"Flagged":"Unflagged"}`;case"ISSUE_REPORTED":return`${n}: Issue Reported: ${e.details.issueDescription||""}`;case"ISSUE_UPDATE_ADDED":return`${n}: Issue Update Added: ${e.details.note||""}`;case"ISSUE_RESOLVED":return`${n}: Issue Resolved (Outcome: ${e.details.resolutionOutcome||"N/A"}${e.details.note?` - Note: ${e.details.note}`:""}`;case"NOTE_ADDED":return`${n}: Note Added: ${e.details.note||""}`;default:return`${n}: Unknown action`}},iv=e=>{let{item:t,onClose:n,closeButtonRef:r}=e;const i={marginBottom:"10px",paddingBottom:"10px",borderBottom:"1px solid #eee"},s={fontWeight:"bold",display:"inline-block",minWidth:"150px",marginRight:"10px"},o={marginBottom:"8px",paddingBottom:"8px",borderBottom:"1px dashed #eee",fontSize:"0.9em"};return(0,Zm.jsxs)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:30},onClick:n,children:[" ",(0,Zm.jsxs)("div",{style:{backgroundColor:"white",padding:"20px 30px",border:"1px solid #ccc",borderRadius:"8px",maxWidth:"600px",maxHeight:"80vh",overflowY:"auto",boxShadow:"0 4px 8px rgba(0,0,0,0.1)"},onClick:e=>e.stopPropagation(),children:[" ",(0,Zm.jsxs)("h3",{children:["Item Details: ",t.productName," - ",t.deliveryName]}),(0,Zm.jsxs)("div",{style:i,children:[(0,Zm.jsx)("span",{style:s,children:"ID:"})," ",t.id]}),(0,Zm.jsxs)("div",{style:i,children:[(0,Zm.jsx)("span",{style:s,children:"Status:"})," ",t.currentStatus]}),(0,Zm.jsxs)("div",{style:i,children:[(0,Zm.jsx)("span",{style:s,children:"Product Name:"})," ",t.productName]}),(0,Zm.jsxs)("div",{style:i,children:[(0,Zm.jsx)("span",{style:s,children:"Delivery Name:"})," ",t.deliveryName]}),(0,Zm.jsxs)("div",{style:i,children:[(0,Zm.jsx)("span",{style:s,children:"Quantity:"})," ",t.quantity]}),(0,Zm.jsxs)("div",{style:i,children:[(0,Zm.jsx)("span",{style:s,children:"Price Per Item:"})," ",nv(t.pricePerItem,"\xa3")]}),(0,Zm.jsxs)("div",{style:i,children:[(0,Zm.jsx)("span",{style:s,children:"Order Date:"})," ",t.orderDate]}),(0,Zm.jsxs)("div",{style:i,children:[(0,Zm.jsx)("span",{style:s,children:"Purchase Status:"})," ",nv(t.purchaseStatus)]}),(0,Zm.jsxs)("div",{style:i,children:[(0,Zm.jsx)("span",{style:s,children:"Order Number:"})," ",nv(t.orderNumber)]}),(0,Zm.jsxs)("div",{style:i,children:[(0,Zm.jsx)("span",{style:s,children:"Seller / Source:"})," ",nv(t.seller)]}),(0,Zm.jsxs)("div",{style:i,children:[(0,Zm.jsx)("span",{style:s,children:"Seller VAT Reg?:"})," ",nv(t.isVatRegistered)]}),(0,Zm.jsxs)("div",{style:i,children:[(0,Zm.jsx)("span",{style:s,children:"Planned Destination:"})," ",nv(t.destination)]}),(0,Zm.jsxs)("div",{style:i,children:[(0,Zm.jsx)("span",{style:s,children:"ASIN / SKU:"})," ",nv(t.asinSku)]}),(0,Zm.jsxs)("div",{style:i,children:[(0,Zm.jsx)("span",{style:s,children:"Acquisition Notes:"})," ",nv(t.acquisitionNotes)]}),(0,Zm.jsxs)("div",{style:i,children:[(0,Zm.jsx)("span",{style:s,children:"Date Delivered:"})," ",nv(t.dateDelivered?new Date(t.dateDelivered).toLocaleString():void 0)]}),(0,Zm.jsxs)("div",{style:i,children:[(0,Zm.jsx)("span",{style:s,children:"Processor Notes:"})," ",nv(t.processorNotes)]}),(0,Zm.jsxs)("div",{style:{...i,borderBottom:"none"},children:[" ",(0,Zm.jsx)("span",{style:s,children:"Issue Description:"})," ",nv(t.issueDescription)]}),t.activityLog&&t.activityLog.length>0&&(0,Zm.jsxs)("div",{style:{marginTop:"20px",paddingTop:"15px",borderTop:"1px solid #ccc"},children:[(0,Zm.jsx)("h4",{children:"History / Activity Log"}),[...t.activityLog].reverse().map(((e,t)=>(0,Zm.jsx)("div",{style:o,children:rv(e)},`${e.timestamp}-${t}`)))]}),(0,Zm.jsx)("div",{style:{marginTop:"20px",textAlign:"right"},children:(0,Zm.jsx)("button",{ref:r,onClick:n,style:{padding:"8px 15px",fontWeight:"bold"},children:"Close"})})]})]})},sv=e=>{let{item:t,onSubmit:n,onClose:i}=e;const[s,o]=(0,r.useState)(""),[a,l]=(0,r.useState)("");return(0,Zm.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},onClick:i,children:(0,Zm.jsxs)("div",{style:{backgroundColor:"white",padding:"20px 30px",borderRadius:"8px",border:"1px solid #ccc",maxWidth:"500px",width:"90%",boxShadow:"0 4px 8px rgba(0,0,0,0.1)"},onClick:e=>e.stopPropagation(),children:[(0,Zm.jsx)("h3",{children:"Report Issue for:"}),(0,Zm.jsxs)("p",{style:{margin:"5px 0 15px 0",fontStyle:"italic"},children:[t.productName," - ",t.deliveryName]}),(0,Zm.jsx)("label",{htmlFor:"issueDescription",style:{fontWeight:"bold"},children:"Describe the Issue:"}),(0,Zm.jsx)("textarea",{id:"issueDescription",value:s,onChange:e=>{o(e.target.value),a&&l("")},style:{width:"calc(100% - 16px)",padding:"8px",minHeight:"80px",marginTop:"5px"},rows:4}),a&&(0,Zm.jsx)("div",{style:{color:"red",fontSize:"0.8em",marginTop:"4px"},children:a}),(0,Zm.jsxs)("div",{style:{marginTop:"20px",textAlign:"right"},children:[(0,Zm.jsx)("button",{type:"button",onClick:i,style:{marginRight:"10px",padding:"8px 15px"},children:"Cancel"}),(0,Zm.jsx)("button",{type:"button",onClick:()=>{s.trim()?n(s):l("Please enter a description of the issue.")},style:{padding:"8px 15px",fontWeight:"bold"},children:"Save Issue Report"})]})]})})},ov=e=>{let{item:t,onSubmit:n,onClose:i}=e;const[s,o]=(0,r.useState)(""),[a,l]=(0,r.useState)("");return(0,Zm.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},onClick:i,children:(0,Zm.jsxs)("div",{style:{backgroundColor:"white",padding:"20px 30px",borderRadius:"8px",border:"1px solid #ccc",maxWidth:"500px",width:"90%",boxShadow:"0 4px 8px rgba(0,0,0,0.1)"},onClick:e=>e.stopPropagation(),children:[(0,Zm.jsx)("h3",{children:"Add Issue Update for:"}),(0,Zm.jsxs)("p",{style:{margin:"5px 0 15px 0",fontStyle:"italic"},children:[t.productName," - ",t.deliveryName]}),t.issueDescription&&(0,Zm.jsxs)("div",{style:{marginBottom:"15px",padding:"10px",background:"#f8f9fa",border:"1px solid #dee2e6",borderRadius:"4px"},children:[(0,Zm.jsx)("strong",{children:"Initial Issue:"})," ",t.issueDescription]}),(0,Zm.jsx)("label",{htmlFor:"updateNote",style:{fontWeight:"bold"},children:"Update Note:"}),(0,Zm.jsx)("textarea",{id:"updateNote",value:s,onChange:e=>{o(e.target.value),a&&l("")},style:{width:"calc(100% - 16px)",padding:"8px",minHeight:"80px",marginTop:"5px"},rows:4,placeholder:"e.g., Contacted seller, awaiting response..."}),a&&(0,Zm.jsx)("div",{style:{color:"red",fontSize:"0.8em",marginTop:"4px"},children:a}),(0,Zm.jsxs)("div",{style:{marginTop:"20px",textAlign:"right"},children:[(0,Zm.jsx)("button",{type:"button",onClick:i,style:{marginRight:"10px",padding:"8px 15px"},children:"Cancel"}),(0,Zm.jsx)("button",{type:"button",onClick:()=>{s.trim()?n(s):l("Please enter an update note.")},style:{padding:"8px 15px",fontWeight:"bold"},children:"Save Update Note"})]})]})})},av=["Item Accepted / Kept As Is","Item Repaired / Refurbished","Partial Refund Received","Returned to Supplier","Disposed Of","Other"],lv=e=>{let{item:t,onSubmit:n,onClose:i}=e;const[s,o]=(0,r.useState)(""),[a,l]=(0,r.useState)(""),[u,c]=(0,r.useState)(""),d={marginBottom:"15px"},h={display:"block",marginBottom:"5px",fontWeight:"bold"},f={width:"calc(100% - 16px)",padding:"8px"};return(0,Zm.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},onClick:i,children:(0,Zm.jsxs)("div",{style:{backgroundColor:"white",padding:"20px 30px",borderRadius:"8px",border:"1px solid #ccc",maxWidth:"500px",width:"90%",boxShadow:"0 4px 8px rgba(0,0,0,0.1)"},onClick:e=>e.stopPropagation(),children:[(0,Zm.jsx)("h3",{children:"Resolve Issue for:"}),(0,Zm.jsxs)("p",{style:{margin:"5px 0 15px 0",fontStyle:"italic"},children:[t.productName," - ",t.deliveryName]}),t.issueDescription&&(0,Zm.jsxs)("div",{style:{marginBottom:"15px",padding:"10px",background:"#f8f9fa",border:"1px solid #dee2e6",borderRadius:"4px"},children:[(0,Zm.jsx)("strong",{children:"Initial Issue:"})," ",t.issueDescription]}),(0,Zm.jsxs)("div",{style:d,children:[(0,Zm.jsx)("label",{htmlFor:"resolutionOutcome",style:h,children:"Resolution Outcome:"}),(0,Zm.jsxs)("select",{id:"resolutionOutcome",value:s,onChange:e=>{o(e.target.value),u&&c("")},style:f,children:[(0,Zm.jsx)("option",{value:"",disabled:!0,children:"-- Select an Outcome --"}),av.map((e=>(0,Zm.jsx)("option",{value:e,children:e},e)))]}),u&&(0,Zm.jsx)("div",{style:{color:"red",fontSize:"0.8em",marginTop:"4px"},children:u})]}),(0,Zm.jsxs)("div",{style:d,children:[(0,Zm.jsx)("label",{htmlFor:"resolutionNotes",style:h,children:"Resolution Notes (Optional):"}),(0,Zm.jsx)("textarea",{id:"resolutionNotes",value:a,onChange:e=>l(e.target.value),style:{...f,minHeight:"60px"},rows:3,placeholder:"e.g., Supplier issued refund, repaired screen..."})]}),(0,Zm.jsxs)("div",{style:{marginTop:"20px",textAlign:"right"},children:[(0,Zm.jsx)("button",{type:"button",onClick:i,style:{marginRight:"10px",padding:"8px 15px"},children:"Cancel"}),(0,Zm.jsx)("button",{type:"button",onClick:()=>{s?n(s,a.trim()||void 0):c("Please select a resolution outcome.")},style:{padding:"8px 15px",fontWeight:"bold"},children:"Save Resolution"})]})]})})},uv=e=>{let{isOpen:t,onClose:n,allColumns:i,initialVisibleColumns:s,onSave:o}=e;const[a,l]=(0,r.useState)((()=>Object.fromEntries(i.map((e=>[e.id,!1])))));(0,r.useEffect)((()=>{if(t){const e=new Set(s.map((e=>e.id))),t=Object.fromEntries(i.map((t=>[t.id,e.has(t.id)])));l(t)}}),[t,s,i]);if(!t)return null;const u={padding:"8px 12px",display:"flex",alignItems:"center"},c={marginLeft:"10px",cursor:"pointer"};return(0,Zm.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:60},onClick:n,children:(0,Zm.jsxs)("div",{style:{backgroundColor:"white",padding:"20px 30px",borderRadius:"8px",border:"1px solid #ccc",width:"400px",maxWidth:"90%",maxHeight:"80vh",display:"flex",flexDirection:"column",boxShadow:"0 4px 8px rgba(0,0,0,0.1)"},onClick:e=>e.stopPropagation(),children:[(0,Zm.jsx)("h3",{children:"Configure Table Columns"}),(0,Zm.jsx)("p",{children:"Select the columns you want to display:"}),(0,Zm.jsx)("div",{style:{flexGrow:1,overflowY:"auto",padding:"10px 0",border:"1px solid #eee",borderRadius:"4px",marginBottom:"15px"},children:i.map((e=>(0,Zm.jsxs)("div",{style:u,children:[(0,Zm.jsx)("input",{type:"checkbox",id:`col-checkbox-${e.id}`,checked:a[e.id]||!1,onChange:()=>{return t=e.id,void l((e=>({...e,[t]:!e[t]})));var t},disabled:"actions"===e.id}),(0,Zm.jsx)("label",{htmlFor:`col-checkbox-${e.id}`,style:c,children:e.label})]},e.id)))}),(0,Zm.jsxs)("div",{style:{marginTop:"auto",textAlign:"right",borderTop:"1px solid #eee",paddingTop:"15px"},children:[(0,Zm.jsx)("button",{type:"button",onClick:n,style:{marginRight:"10px",padding:"8px 15px"},children:"Cancel"}),(0,Zm.jsx)("button",{type:"button",onClick:()=>{const e=i.map((e=>e.id)).filter((e=>a[e]));o(e)},style:{padding:"8px 15px",fontWeight:"bold"},children:"Save Column Settings"})]})]})})};function cv(e){return Object.fromEntries(Object.entries(e).filter((e=>{let[t,n]=e;return void 0!==n})))}const dv=e=>{let{onSearch:t,inputRef:n}=e;return(0,Zm.jsx)("input",{ref:n,type:"text",placeholder:"Search by Delivery Name or Product Name...",onChange:e=>t(e.target.value),style:{marginBottom:"1rem",padding:"0.5rem",width:"100%"}})},hv=e=>{let{currentFilter:t,onFilterChange:n}=e;return(0,Zm.jsx)("div",{style:{marginBottom:"1rem"},children:["All","Pending Delivery","Delivered","Issue","Late","Archived"].map((e=>(0,Zm.jsx)("button",{onClick:()=>n(e),style:{fontWeight:t===e?"bold":"normal",marginRight:"0.5rem",padding:"0.5rem"},children:e},e)))})},fv=e=>{if("Pending Delivery"!==e.currentStatus)return!1;const t=new Date(e.orderDate),n=new Date;return n.setDate(n.getDate()-7),t<n},pv=(e,t,n)=>{const r=n?{borderLeft:"3px solid red"}:{};let i={};if("Pending Delivery"===e&&t)i={backgroundColor:"#cce5ff",color:"#004085"};else switch(e){case"Pending Delivery":i={backgroundColor:"#fff3cd",color:"#856404"};break;case"Delivered":i={backgroundColor:"#d4edda",color:"#155724"};break;case"Issue":i={backgroundColor:"#f8d7da",color:"#721c24"};break;case"Archived":i={backgroundColor:"#e2e3e5",color:"#383d41"};break;default:i={}}return{...i,...r}},gv=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{timestamp:(new Date).toISOString(),type:t,userId:e,details:n}},mv=(e,t)=>{let n=[];switch(e){case"Pending Delivery":case"Late":n=["Mark as Delivered","Report Issue","View Details","Edit Item"];break;case"Delivered":n=["Archive","Report Issue","View Details","Edit Item"];break;case"Issue":n=["Resolve Issue","Add Issue Update","Archive","View Details","Edit Item"];break;default:n=["View Details"]}return"Archived"!==e&&n.unshift(t?"Unflag Item":"Flag Item"),n},vv=e=>{let{itemId:t,actions:n,onActionSelected:i,onClose:s}=e;const o=(0,r.useRef)(null);return(0,r.useEffect)((()=>{const e=e=>{o.current&&!o.current.contains(e.target)&&s()};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[s]),(0,Zm.jsx)("div",{ref:o,style:{position:"absolute",backgroundColor:"white",border:"1px solid #ccc",borderRadius:"4px",boxShadow:"0 2px 5px rgba(0,0,0,0.15)",zIndex:10,minWidth:"150px",marginTop:"2px"},children:n.map((e=>(0,Zm.jsx)("button",{onClick:()=>i(t,e),style:{display:"block",width:"100%",padding:"8px 12px",border:"none",background:"none",textAlign:"left",cursor:"pointer"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="#f0f0f0",onMouseLeave:e=>e.currentTarget.style.backgroundColor="transparent",children:e},e)))})},yv=[{id:"orderDate",label:"Order Date"},{id:"quantity",label:"Qty"},{id:"productName",label:"Product Name"},{id:"deliveryName",label:"Delivery Name"},{id:"pricePerItem",label:"Price/Item"},{id:"seller",label:"Seller/Source"},{id:"destination",label:"Destination"},{id:"asinSku",label:"ASIN/SKU"},{id:"purchaseStatus",label:"Purchase Status"},{id:"orderNumber",label:"Order #"},{id:"currentStatus",label:"Status"},{id:"isFlagged",label:"Flagged"},{id:"acquisitionNotes",label:"Acquisition Notes"},{id:"issueDescription",label:"Issue Description"},{id:"dateDelivered",label:"Date Delivered"},{id:"actions",label:"Actions"}],bv=["orderDate","quantity","productName","deliveryName","currentStatus","actions"],wv="incomingTool_visibleColumns",Sv=e=>{let{col:t}=e;const{attributes:n,listeners:r,setNodeRef:i,transform:s,transition:o,isDragging:a}=Gm({id:t.id}),l={transform:Bp.Translate.toString(s),transition:o,opacity:a?.8:1,zIndex:a?10:1,cursor:"move",border:"1px solid #ccc",padding:"8px",textAlign:"actions"===t.id?"center":"left",backgroundColor:a?"#e0e0e0":"#f2f2f2"};return(0,Zm.jsx)("th",{ref:i,style:l,...n,...r,children:t.label})},Ev=e=>{let{items:t,visibleColumns:n,onActionSelected:i,onViewDetails:s,onColumnReorder:o,selectedRowIndex:a=-1}=e;const[l,u]=(0,r.useState)(null),c=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,yp.useMemo)((()=>[...t].filter((e=>null!=e))),[...t])}(eg(Kg),eg(Bg,{coordinateGetter:Xm})),d=()=>{u(null)},h=(e,t)=>{"View Details"===t?s(e):i(e,t),d()},f=(e,t)=>{const n=e=>"string"===typeof e||"number"===typeof e?e:"boolean"===typeof e?e?"Yes":"No":"-";switch(t){case"isFlagged":return(0,Zm.jsx)("td",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:e.isFlagged?"\ud83d\udea9":""},t);case"actions":return(0,Zm.jsxs)("td",{style:{border:"1px solid #ccc",padding:"0px",textAlign:"center",position:"relative"},onClick:e=>e.stopPropagation(),children:["Archived"!==e.currentStatus&&(0,Zm.jsx)("button",{style:{cursor:"pointer",border:"none",background:"none",fontSize:"1.2em",padding:"8px"},title:"Actions",onClick:t=>{var n;t.stopPropagation(),n=e.id,u((e=>e===n?null:n))},children:"\u22ee"}),l===e.id&&(0,Zm.jsx)(vv,{itemId:e.id,actions:mv(e.currentStatus,e.isFlagged),onActionSelected:h,onClose:d})]},"actions");case"currentStatus":const r=fv(e);return(0,Zm.jsx)("td",{style:{border:"1px solid #ccc",padding:"8px",...pv(e.currentStatus,r,e.isFlagged)},onClick:e=>e.stopPropagation(),children:e.currentStatus},t);case"quantity":case"pricePerItem":const i=e[t];return(0,Zm.jsx)("td",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"right"},children:"number"===typeof i?i:"-"},t);case"dateDelivered":case"orderDate":const s=e[t],o="string"===typeof s&&s?new Date(s).toLocaleDateString():"-";return(0,Zm.jsx)("td",{style:{border:"1px solid #ccc",padding:"8px"},children:o},t);case"acquisitionNotes":case"issueDescription":const a=e[t];return(0,Zm.jsx)("td",{style:{border:"1px solid #ccc",padding:"8px"},children:"string"===typeof a?n(a):"-"},t);case"productName":case"deliveryName":case"seller":case"destination":case"asinSku":case"purchaseStatus":case"orderNumber":return(0,Zm.jsx)("td",{style:{border:"1px solid #ccc",padding:"8px"},children:n(e[t])},t);default:return console.warn("Unhandled column ID in renderCellContent:",t),(0,Zm.jsx)("td",{style:{border:"1px solid #ccc",padding:"8px"},children:"???"},t)}};return(0,Zm.jsxs)("div",{children:[(0,Zm.jsx)("h4",{children:"Stock & Processing List"}),(0,Zm.jsx)(Im,{sensors:c,collisionDetection:lg,onDragEnd:o,children:(0,Zm.jsx)(zm,{items:n.map((e=>e.id)),strategy:Fm,children:(0,Zm.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid #ccc"},children:[(0,Zm.jsx)("thead",{children:(0,Zm.jsx)("tr",{style:{backgroundColor:"#f2f2f2"},children:n.map((e=>(0,Zm.jsx)(Sv,{col:e},e.id)))})}),(0,Zm.jsx)("tbody",{children:t.length>0?t.map(((e,t)=>{const r=t===a;return(0,Zm.jsx)("tr",{style:r?{background:"#e3f0ff",outline:"2px solid #1976d2"}:{},children:n.map((t=>f(e,t.id)))},e.id)})):(0,Zm.jsx)("tr",{children:(0,Zm.jsx)("td",{colSpan:n.length,style:{border:"1px solid #ccc",padding:"16px",textAlign:"center"},children:"No items match the current filter."})})})]})})})]})},kv=e=>{let{onClick:t}=e;return(0,Zm.jsx)("button",{onClick:t,style:{marginTop:"1rem",padding:"0.8rem 1.5rem",cursor:"pointer"},children:"+ Add New Item"})},_v=e=>{let{isChecked:t,onChange:n}=e;return(0,Zm.jsxs)("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center"},children:[" ",(0,Zm.jsx)("label",{htmlFor:"flagToggle",style:{marginRight:"8px",fontWeight:"bold"},children:"Show Flagged Only:"}),(0,Zm.jsx)("input",{type:"checkbox",id:"flagToggle",checked:t,onChange:e=>n(e.target.checked),style:{width:"20px",height:"20px"}})]})},Tv=e=>{let{onClose:t}=e;return(0,Zm.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",zIndex:100,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,Zm.jsxs)("div",{style:{background:"white",padding:32,borderRadius:8,minWidth:400},children:[(0,Zm.jsx)("h3",{children:"Keyboard Shortcuts"}),(0,Zm.jsxs)("ul",{style:{lineHeight:2},children:[(0,Zm.jsxs)("li",{children:[(0,Zm.jsx)("b",{children:"/"})," \u2014 Focus search bar"]}),(0,Zm.jsxs)("li",{children:[(0,Zm.jsx)("b",{children:"a"})," \u2014 Add new item"]}),(0,Zm.jsxs)("li",{children:[(0,Zm.jsx)("b",{children:"c"})," \u2014 Open columns/settings"]}),(0,Zm.jsxs)("li",{children:[(0,Zm.jsx)("b",{children:"f"})," \u2014 Toggle flagged only"]}),(0,Zm.jsxs)("li",{children:[(0,Zm.jsx)("b",{children:"1-6"})," \u2014 Switch filter tabs"]}),(0,Zm.jsxs)("li",{children:[(0,Zm.jsx)("b",{children:"?"})," \u2014 Show this help"]}),(0,Zm.jsxs)("li",{children:[(0,Zm.jsx)("b",{children:"Arrow Up/Down"})," \u2014 Move row selection"]}),(0,Zm.jsxs)("li",{children:[(0,Zm.jsx)("b",{children:"Enter/o"})," \u2014 View details for selected row"]}),(0,Zm.jsxs)("li",{children:[(0,Zm.jsx)("b",{children:"e"})," \u2014 Edit selected row"]}),(0,Zm.jsxs)("li",{children:[(0,Zm.jsx)("b",{children:"r"})," \u2014 Report issue for selected row"]}),(0,Zm.jsxs)("li",{children:[(0,Zm.jsx)("b",{children:"l"})," \u2014 Flag/unflag selected row"]}),(0,Zm.jsxs)("li",{children:[(0,Zm.jsx)("b",{children:"Esc"})," \u2014 Close any open modal"]})]}),(0,Zm.jsx)("button",{autoFocus:!0,onClick:t,style:{marginTop:16,padding:"8px 20px"},children:"Close"})]})})},Cv={apiKey:"AIzaSyCC6x0MS2KOTIZtZUYh59KdsBos1fasNtA",authDomain:"hubalm.firebaseapp.com",projectId:"hubalm",storageBucket:"hubalm.firebasestorage.app",messagingSenderId:"201098929511",appId:"1:201098929511:web:a257c60dd4d6b4d2ab7bc2"};Object.entries(Cv).forEach((e=>{let[t,n]=e;if(!n)throw new Error(`Missing Firebase config value for ${t}. Did you set your .env file?`)}));const Iv=We(Cv),xv=(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke();const t=ze(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=ze(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(k(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;dt(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:wi,persistence:[Nr,cr,gr]}),r=g("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>_i)return;const r=null===t||void 0===t?void 0:t.token;Ti!==r&&(Ti=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){N(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,t,n,r){N(e).onIdTokenChanged(t,n,r)}(n,(e=>t(e)))}}var i;const s=f("auth");s&&Pn(n,`http://${s}`)}(Iv),function(e,t){const n="object"==typeof e?e:Ke(),r="string"==typeof e?e:t||$o,i=ze(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=(e=>{const t=f(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&uf(i,...e)}return i}(Iv)),Av=e=>{let{user:t,org:n,permissions:i,logAction:s}=e;console.log("ToolApp Props Received:",{user:t,orgId:null===n||void 0===n?void 0:n.id,permissions:i,logActionExists:!!s});const[o,a]=(0,r.useState)(-1),[l,u]=(0,r.useState)(!1),[c,d]=(0,r.useState)([]),[h,f]=(0,r.useState)(!0),[p,g]=(0,r.useState)(null),[m,v]=(0,r.useState)(""),[y,b]=(0,r.useState)("Pending Delivery"),[w,S]=(0,r.useState)(null),[E,k]=(0,r.useState)(!1),[_,T]=(0,r.useState)(!1),[C,I]=(0,r.useState)(null),[x,A]=(0,r.useState)(null),[D,R]=(0,r.useState)(null),[P,O]=(0,r.useState)(null),[L,M]=(0,r.useState)(!1),[F,j]=(0,r.useState)((()=>{try{const e=localStorage.getItem(wv),t=e?JSON.parse(e):bv;return Array.isArray(t)?t:bv}catch(p){return console.error("Error reading visible columns from localStorage",p),bv}}));(0,r.useEffect)((()=>{try{localStorage.setItem(wv,JSON.stringify(F))}catch(p){console.error("Error saving visible columns to localStorage",p)}}),[F]);const U=F.map((e=>yv.find((t=>t.id===e)))).filter((e=>void 0!==e)),V=c.filter((e=>{const t=!m||e.deliveryName.toLowerCase().includes(m.toLowerCase())||e.productName.toLowerCase().includes(m.toLowerCase());let n=!1;n="All"===y||("Late"===y?fv(e):e.currentStatus===y);const r=!_||!0===e.isFlagged;return n&&t&&r}));(0,r.useEffect)((()=>{a((e=>0===V.length?-1:e<0?0:e>=V.length?V.length-1:e))}),[V]),(0,r.useEffect)((()=>{if(null===n||void 0===n||!n.id)return;f(!0),g(null);const e=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=N(e);let a={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||vf(n[l])||(a=n[l],l++);const u={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(vf(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let c,d,h;if(e instanceof df)d=rf(e.firestore,yf),h=Wa(e._key.path),c={next:t=>{n[l]&&n[l](mp(d,e,t))},error:n[l+1],complete:n[l+2]};else{const t=rf(e,cf);d=rf(t.firestore,yf),h=t._query;const r=new fp(d);c={next:e=>{n[l]&&n[l](new dp(d,r,t,e))},error:n[l+1],complete:n[l+2]},Xf(e._query)}return function(e,t,n,r){const i=new Bh(r),s=new lh(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>th(await Yh(e),s))),()=>{i.su(),e.asyncQueue.enqueueAndForget((async()=>nh(await Yh(e),s)))}}(bf(d),h,u,c)}(function(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof Jf&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof tp)).length,n=e.filter((e=>e instanceof ep)).length;if(t>1||t>0&&n>0)throw new ts(es.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}(ff(xv,"orgs",n.id,"stockItems"),function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Yf("orderBy",e);return np._create(n,t)}("orderDate","desc")),(e=>{const t=e.docs.map((e=>({id:e.id,...e.data()})));d(t),f(!1)}),(e=>{g("Failed to load items: "+e.message),f(!1)}));return()=>e()}),[null===n||void 0===n?void 0:n.id]);const z=(0,r.useCallback)((async(e,t,r,i)=>{if(!xv||null===n||void 0===n||!n.id||!t)return console.error("Cannot update item: Missing configuration.",{db:!!xv,orgId:null===n||void 0===n?void 0:n.id,userId:t}),void g("Cannot update item: Missing configuration.");const o=pf(xv,"orgs",n.id,"stockItems",e),a=c.find((t=>t.id===e));if(!a)return console.error(`Item ${e} not found for update`),void g(`Item ${e} not found.`);const l=cv({...r,activityLog:[...a.activityLog||[],i],lastUpdated:vp()}),u={...a,...l};try{if(await pp(o,l),console.log(`Item ${e} updated successfully.`),console.log("updateItemAndLog: Attempting to log action. logAction available?",!!s),s){let t;try{if("EDITED"===i.type)t="item.update.fields";else if("FLAG_TOGGLED"===i.type)t="item.update.flag";else if("STATUS_CHANGED"===i.type){var d,h;t=`item.update.status.${(null===(d=i.details)||void 0===d||null===(h=d.newStatus)||void 0===h?void 0:h.toLowerCase())||"unknown"}`}else t="ISSUE_UPDATE_ADDED"===i.type?"item.update.issue.addNote":i.type}catch(f){console.error("Error deriving action name for logging:",f),t=i.type}const r={orgId:n.id,toolKey:"incomingtool",action:t,entityPath:`stockItems/${e}`,...void 0!==a&&{before:a},...void 0!==u&&{after:u},...void 0!==i.details&&{details:i.details}};await s(r)}}catch(p){throw console.error(`Error updating item ${e}:`,p),g(`Failed to update item: ${p.message}`),p}}),[n,c,s]),B=(0,r.useCallback)((async(e,n)=>{console.log(`Action: ${n} on item ${e}`);const r=c.find((t=>t.id===e));if(r)switch(n){case"Edit Item":I(r),k(!0);break;case"Flag Item":case"Unflag Item":const i="Flag Item"===n;await z(e,null===t||void 0===t?void 0:t.uid,{isFlagged:i},gv((null===t||void 0===t?void 0:t.uid)||"","FLAG_TOGGLED",{isFlagged:i}));break;case"Mark as Delivered":"Delivered"!==r.currentStatus&&await z(e,null===t||void 0===t?void 0:t.uid,{currentStatus:"Delivered",dateDelivered:(new Date).toISOString()},gv((null===t||void 0===t?void 0:t.uid)||"","STATUS_CHANGED",{previousStatus:r.currentStatus,newStatus:"Delivered"}));break;case"Archive":"Archived"!==r.currentStatus&&await z(e,null===t||void 0===t?void 0:t.uid,{currentStatus:"Archived"},gv((null===t||void 0===t?void 0:t.uid)||"","STATUS_CHANGED",{previousStatus:r.currentStatus,newStatus:"Archived"}))}}),[null===t||void 0===t?void 0:t.uid,c,z,I,k]),$=(0,r.useCallback)((async e=>{if(!x||null===n||void 0===n||!n.id||!xv)return;const r=x.id,i=x.currentStatus,o=gv((null===t||void 0===t?void 0:t.uid)||"","ISSUE_REPORTED",{issueDescription:e}),a=gv((null===t||void 0===t?void 0:t.uid)||"","STATUS_CHANGED",{previousStatus:i,newStatus:"Issue"});try{var l;const t=pf(xv,"orgs",n.id,"stockItems",r);await pp(t,{currentStatus:"Issue",issueDescription:e,activityLog:[...(null===(l=c.find((e=>e.id===r)))||void 0===l?void 0:l.activityLog)||[],o,a],lastUpdated:vp()});const i=c.find((e=>e.id===r));console.log("handleSaveReportIssue: Attempting to log action. logAction available?",!!s),s&&await s({orgId:n.id,toolKey:"incomingtool",action:"item.update.issue.report",entityPath:`stockItems/${r}`,before:i,after:{...i,currentStatus:"Issue",issueDescription:e},details:{issueDescription:e}}),A(null)}catch(u){g("Failed to report issue: "+u.message)}}),[x,null===n||void 0===n?void 0:n.id,null===t||void 0===t?void 0:t.uid,c,s,A,g]),q=(0,r.useCallback)((async e=>{if(D)try{await z(D.id,null===t||void 0===t?void 0:t.uid,{},gv((null===t||void 0===t?void 0:t.uid)||"","ISSUE_UPDATE_ADDED",{note:e})),R(null)}catch(n){}}),[D,z,R,null===t||void 0===t?void 0:t.uid]),H=(0,r.useCallback)((async(e,r)=>{if(!P||null===n||void 0===n||!n.id||!xv)return;const i=P.id,o=P.currentStatus;let a="Delivered";"Returned to Supplier"!==e&&"Disposed Of"!==e||(a="Archived");const l=gv((null===t||void 0===t?void 0:t.uid)||"","ISSUE_RESOLVED",{resolutionOutcome:e,note:r}),u=gv((null===t||void 0===t?void 0:t.uid)||"","STATUS_CHANGED",{previousStatus:o,newStatus:a});try{var d;const t=pf(xv,"orgs",n.id,"stockItems",i);await pp(t,{currentStatus:a,activityLog:[...(null===(d=c.find((e=>e.id===i)))||void 0===d?void 0:d.activityLog)||[],l,u],lastUpdated:vp()});const o=c.find((e=>e.id===i));console.log("handleSaveResolveIssue: Attempting to log action. logAction available?",!!s),s&&await s({orgId:n.id,toolKey:"incomingtool",action:"item.update.issue.resolve",entityPath:`stockItems/${i}`,before:o,after:{...o,currentStatus:a},details:{resolutionOutcome:e,note:r}}),O(null)}catch(h){g("Failed to resolve issue: "+h.message)}}),[P,null===n||void 0===n?void 0:n.id,null===t||void 0===t?void 0:t.uid,c,s,O,g]),W=(0,r.useCallback)((()=>{k(!1),I(null)}),[k,I]),K=(0,r.useCallback)((async e=>{if(console.log("ToolApp: current editingItem at save",C),null===n||void 0===n||!n.id||!xv)return console.error("ToolApp: Cannot save item because org.id or db is undefined",n),void g("Cannot save item: No organization selected or database unavailable.");console.log("ToolApp: handleSaveItem called",e);try{if(C&&C.id){const n=C.id,r=Object.keys(e).filter((t=>C.hasOwnProperty(t)&&C[t]!==e[t]));"isFlagged"in e&&!r.includes("isFlagged")&&C.isFlagged!==e.isFlagged&&r.push("isFlagged");const i=gv((null===t||void 0===t?void 0:t.uid)||"","EDITED",{changedFields:r.length>0?r:void 0});await z(n,null===t||void 0===t?void 0:t.uid,e,i)}else{const r=gv((null===t||void 0===t?void 0:t.uid)||"","CREATED"),i=cv({...e,currentStatus:"Pending Delivery",activityLog:[r],lastUpdated:vp()}),o=await function(e,t){const n=rf(e.firestore,yf),r=pf(e),i=ap(e.converter,t);return gp(n,[Pf(Rf(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,jl.exists(!1))]).then((()=>r))}(ff(xv,"orgs",n.id,"stockItems"),i);console.log("handleSaveItem: Attempting to log action. logAction available?",!!s),s&&await s({orgId:n.id,toolKey:"incomingtool",action:"item.create",entityPath:`stockItems/${o.id}`,after:i})}W()}catch(r){console.error("Failed to save item",r),g("Failed to save item: "+r.message)}}),[C,n,t,s,z,W,g]),G=(0,r.useCallback)((()=>{S(null)}),[S]),Q=(0,r.useRef)(void 0);(0,r.useEffect)((()=>{Q.current=null===n||void 0===n?void 0:n.id}),[n]);const Y=(0,r.useCallback)((()=>{Q.current?(I(null),k(!0)):g("Cannot add item: Organization ID is missing.")}),[k,I,g]),X=(0,r.useRef)(null);return(0,r.useEffect)((()=>{const e=e=>{var t;const n=e.target,r=n.tagName;if("INPUT"===r||"TEXTAREA"===r||n.isContentEditable)return;if(E||L||w||x||D||P||l)"Escape"===e.key&&(E&&k(!1),L&&M(!1),w&&S(null),x&&A(null),D&&R(null),P&&O(null),l&&u(!1));else{if(e.key>="1"&&e.key<="6"){const t=["All","Pending Delivery","Delivered","Issue","Late","Archived"],n=parseInt(e.key,10)-1;if(n>=0&&n<t.length)return b(t[n]),void e.preventDefault()}if("?"===e.key)return u(!0),void e.preventDefault();if(V.length>0){if("ArrowDown"===e.key)return a((e=>Math.min(V.length-1,e<0?0:e+1))),void e.preventDefault();if("ArrowUp"===e.key)return a((e=>Math.max(0,e-1))),void e.preventDefault();if(("Enter"===e.key||"o"===e.key)&&o>=0&&o<V.length)return S(V[o]),void e.preventDefault();if("e"===e.key&&o>=0&&o<V.length){const t=V[o];return I(t),k(!0),void e.preventDefault()}if("r"===e.key&&o>=0&&o<V.length)return A(V[o]),void e.preventDefault();if("l"===e.key&&o>=0&&o<V.length){const t=V[o];return B(t.id,t.isFlagged?"Unflag Item":"Flag Item"),void e.preventDefault()}}switch(e.key){case"/":e.preventDefault(),null===(t=X.current)||void 0===t||t.focus();break;case"a":case"A":C||Y();break;case"c":case"C":M(!0)}}};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[E,L,w,x,D,P,l,V,o,C,B,b,Y]),(0,Zm.jsxs)("div",{style:{padding:24},children:[" ",(0,Zm.jsx)("h2",{children:"Incoming Stock Tool"}),p&&(0,Zm.jsxs)("div",{style:{color:"red",marginBottom:"1rem"},children:["Error: ",p]}),h&&(0,Zm.jsx)("div",{style:{color:"blue",marginBottom:"1rem"},children:"Loading items..."}),(0,Zm.jsx)(kv,{onClick:Y}),(0,Zm.jsx)(dv,{onSearch:e=>{v(e)},inputRef:X}),(0,Zm.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"1rem"},children:[(0,Zm.jsx)(hv,{currentFilter:y,onFilterChange:e=>{b(e)}}),(0,Zm.jsx)(_v,{isChecked:_,onChange:T}),(0,Zm.jsx)("button",{onClick:()=>M(!0),style:{marginLeft:"auto",padding:"5px 10px"},title:"Configure Table Columns",children:"\u2699\ufe0f Columns"})]}),(0,Zm.jsx)(Ev,{items:V,visibleColumns:U,onActionSelected:B,onViewDetails:e=>{const t=c.find((t=>t.id===e));t&&S(t)},onColumnReorder:e=>{const{active:t,over:n}=e;n&&t.id!==n.id&&j((e=>{const r=e.indexOf(t.id),i=e.indexOf(n.id);return Pm(e,r,i)}))},selectedRowIndex:o}),E&&(0,Zm.jsxs)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:20},children:[" ",(0,Zm.jsx)(tv,{onSave:K,onClose:W,initialData:C})]}),w&&(0,Zm.jsx)(iv,{item:w,onClose:G}),x&&(0,Zm.jsx)(sv,{item:x,onSubmit:$,onClose:()=>A(null)}),D&&(0,Zm.jsx)(ov,{item:D,onSubmit:q,onClose:()=>R(null)}),P&&(0,Zm.jsx)(lv,{item:P,onSubmit:H,onClose:()=>O(null)}),(0,Zm.jsx)(uv,{isOpen:L,onClose:()=>M(!1),allColumns:yv,initialVisibleColumns:U,onSave:e=>{j((t=>{const n=new Set(e);return[...t.filter((e=>n.has(e))),...e.filter((e=>!t.includes(e)))]})),M(!1)}}),l&&(0,Zm.jsx)(Tv,{onClose:()=>u(!1)})]})},Nv={apiKey:"AIzaSyCC6x0MS2KOTIZtZUYh59KdsBos1fasNtA",authDomain:"hubalm.firebaseapp.com",projectId:"hubalm",storageBucket:"hubalm.firebasestorage.app",messagingSenderId:"201098929511",appId:"1:201098929511:web:a257c60dd4d6b4d2ab7bc2"};Object.entries(Nv).forEach((e=>{let[t,n]=e;if(!n)throw new Error(`Missing Firebase config value for ${t}. Did you set your .env file?`)})),We(Nv);const Dv={id:"dev-org",name:"Dev Org (Standalone)"},Rv=["read","write","admin"],Pv=document.getElementById("root");if(Pv){s.createRoot(Pv).render((0,Zm.jsx)(i().StrictMode,{children:(0,Zm.jsx)(Av,{user:null,org:Dv,permissions:Rv})}))}else console.error("Failed to find the root element")},8853:(e,t,n)=>{e.exports=n(5896)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.m=e,n.c=t,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+"."+{43:"648a87b0",287:"a1d2ae17",569:"20fbcc62",668:"75da48e3",694:"e9ffa325",950:"ed304175"}[e]+".chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="incoming-tool:";n.l=(r,i,s,o)=>{if(e[r])e[r].push(i);else{var a,l;if(void 0!==s)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var d=u[c];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+s){a=d;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+s),a.src=r),e[r]=[i];var h=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(n))),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),(()=>{var e={},t={};n.f.remotes=(r,i)=>{n.o(e,r)&&e[r].forEach((e=>{var r=n.R;r||(r=[]);var s=t[e];if(!(r.indexOf(s)>=0)){if(r.push(s),s.p)return i.push(s.p);var o=t=>{t||(t=new Error("Container missing")),"string"===typeof t.message&&(t.message+='\nwhile loading "'+s[1]+'" from '+s[2]),n.m[e]=()=>{throw t},s.p=0},a=(e,t,n,r,a,l)=>{try{var u=e(t,n);if(!u||!u.then)return a(u,r,l);var c=u.then((e=>a(e,r)),o);if(!l)return c;i.push(s.p=c)}catch(d){o(d)}},l=(e,t,n)=>a(t.get,s[1],r,0,u,n),u=t=>{s.p=1,n.m[e]=e=>{e.exports=t()}};a(n,s[2],0,0,((e,t,r)=>e?a(n.I,s[0],0,e,l,r):o()),1)}}))}})(),(()=>{n.S={};var e={},t={};n.I=(r,i)=>{i||(i=[]);var s=t[r];if(s||(s=t[r]={}),!(i.indexOf(s)>=0)){if(i.push(s),e[r])return e[r];n.o(n.S,r)||(n.S[r]={});var o=n.S[r],a="incoming-tool",l=(e,t,n,r)=>{var i=o[e]=o[e]||{},s=i[t];(!s||!s.loaded&&(!r!=!s.eager?r:a>s.from))&&(i[t]={get:n,from:a,eager:!!r})},u=[];if("default"===r)l("react-dom","19.1.0",(()=>Promise.all([n.e(613),n.e(950)]).then((()=>()=>n(7950))))),l("react-dom","19.1.0",(()=>Promise.all([n.e(550),n.e(668)]).then((()=>()=>n(9287))))),l("react","19.1.0",(()=>n.e(43).then((()=>()=>n(5043))))),l("react","19.1.0",(()=>n.e(694).then((()=>()=>n(4694)))));return u.length?e[r]=Promise.all(u).then((()=>e[r]=1)):e[r]=1}}})(),n.p="https://SupportALM.github.io/IncomingTool/",(()=>{var e=e=>{var t=e=>e.split(".").map((e=>+e==e?+e:e)),n=/^([^-+]+)?(?:-([^+]+))?(?:\+(.+))?$/.exec(e),r=n[1]?t(n[1]):[];return n[2]&&(r.length++,r.push.apply(r,t(n[2]))),n[3]&&(r.push([]),r.push.apply(r,t(n[3]))),r},t=(t,n)=>{t=e(t),n=e(n);for(var r=0;;){if(r>=t.length)return r<n.length&&"u"!=(typeof n[r])[0];var i=t[r],s=(typeof i)[0];if(r>=n.length)return"u"==s;var o=n[r],a=(typeof o)[0];if(s!=a)return"o"==s&&"n"==a||"s"==a||"u"==s;if("o"!=s&&"u"!=s&&i!=o)return i<o;r++}},r=e=>{var t=e[0],n="";if(1===e.length)return"*";if(t+.5){n+=0==t?">=":-1==t?"<":1==t?"^":2==t?"~":t>0?"=":"!=";for(var i=1,s=1;s<e.length;s++)i--,n+="u"==(typeof(a=e[s]))[0]?"-":(i>0?".":"")+(i=2,a);return n}var o=[];for(s=1;s<e.length;s++){var a=e[s];o.push(0===a?"not("+l()+")":1===a?"("+l()+" || "+l()+")":2===a?o.pop()+" "+o.pop():r(a))}return l();function l(){return o.pop().replace(/^\((.+)\)$/,"$1")}},i=(t,n)=>{if(0 in t){n=e(n);var r=t[0],s=r<0;s&&(r=-r-1);for(var o=0,a=1,l=!0;;a++,o++){var u,c,d=a<t.length?(typeof t[a])[0]:"";if(o>=n.length||"o"==(c=(typeof(u=n[o]))[0]))return!l||("u"==d?a>r&&!s:""==d!=s);if("u"==c){if(!l||"u"!=d)return!1}else if(l)if(d==c)if(a<=r){if(u!=t[a])return!1}else{if(s?u>t[a]:u<t[a])return!1;u!=t[a]&&(l=!1)}else if("s"!=d&&"n"!=d){if(s||a<=r)return!1;l=!1,a--}else{if(a<=r||c<d!=s)return!1;l=!1}else"s"!=d&&"n"!=d&&(l=!1,a--)}}var h=[],f=h.pop.bind(h);for(o=1;o<t.length;o++){var p=t[o];h.push(1==p?f()|f():2==p?f()&f():p?i(p,n):!f())}return!!f()},s=(e,t)=>e&&n.o(e,t),o=e=>(e.loaded=1,e.get()),a=e=>Object.keys(e).reduce(((t,n)=>(e[n].eager&&(t[n]=e[n]),t)),{}),l=(e,n,r)=>{var i=r?a(e[n]):e[n];return Object.keys(i).reduce(((e,n)=>!e||!i[e].loaded&&t(e,n)?n:e),0)},u=(e,t,n,i)=>"Unsatisfied version "+n+" from "+(n&&e[t][n].from)+" of shared singleton module "+t+" (required "+r(i)+")",c=e=>{throw new Error(e)},d=e=>{"undefined"!==typeof console&&console.warn&&console.warn(e)},h=e=>function(t,r,i,s,o){var a=n.I(t);return a&&a.then&&!i?a.then(e.bind(e,t,n.S[t],r,!1,s,o)):e(t,n.S[t],r,i,s,o)},f=(e,t,n)=>n?n():((e,t)=>c("Shared module "+t+" doesn't exist in shared scope "+e))(e,t),p=h(((e,t,n,r,a,c)=>{if(!s(t,n))return f(e,n,c);var h=l(t,n,r);return i(a,h)||d(u(t,n,h,a)),o(t[n][h])})),g={},m={8613:()=>p("default","react",!1,[4,19,1,0],(()=>n.e(43).then((()=>()=>n(5043))))),5055:()=>p("default","react-dom",!1,[4,19,1,0],(()=>n.e(569).then((()=>()=>n(7950))))),6550:()=>p("default","react",!1,[4,19,1,0],(()=>n.e(694).then((()=>()=>n(4694))))),2092:()=>p("default","react-dom",!1,[4,19,1,0],(()=>n.e(287).then((()=>()=>n(9287)))))};[8613,5055,6550,2092].forEach((e=>{n.m[e]=t=>{g[e]=0,delete n.c[e];var r=m[e]();if("function"!==typeof r)throw new Error("Shared module is not available for eager consumption: "+e);t.exports=r()}}));var v={550:[6550],613:[8613],792:[8613,5055,6550,2092]},y={};n.f.consumes=(e,t)=>{n.o(v,e)&&v[e].forEach((e=>{if(n.o(g,e))return t.push(g[e]);if(!y[e]){var r=t=>{g[e]=0,n.m[e]=r=>{delete n.c[e],r.exports=t()}};y[e]=!0;var i=t=>{delete g[e],n.m[e]=r=>{throw delete n.c[e],t}};try{var s=m[e]();s.then?t.push(g[e]=s.then(r).catch(i)):r(s)}catch(o){i(o)}}}))}})(),(()=>{var e={550:0,613:0,792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else if(/^(550|613)$/.test(t))e[t]=0;else{var s=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=s);var o=n.p+n.u(t),a=new Error;n.l(o,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,i[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,s,o=r[0],a=r[1],l=r[2],u=0;if(o.some((t=>0!==e[t]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)l(n)}for(t&&t(r);u<o.length;u++)s=o[u],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkincoming_tool=self.webpackChunkincoming_tool||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();n(7936)})();
//# sourceMappingURL=main.eecf6beb.js.map